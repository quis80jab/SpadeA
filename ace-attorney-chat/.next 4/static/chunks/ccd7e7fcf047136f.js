(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88653,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),a=e.i(31178),s=e.i(47414),n=e.i(74008),i=e.i(21476),l=e.i(72846),o=r,c=e.i(37806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,r=(0,l.isHTMLElement)(e)&&e.offsetWidth||0,a=(0,l.isHTMLElement)(e)&&e.offsetHeight||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left,s.bottom=a-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:e,isPresent:a,anchorX:s,anchorY:n,root:i,pop:l}){let m=(0,o.useId)(),x=(0,o.useRef)(null),p=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=(0,o.useContext)(c.MotionConfigContext),f=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,a=e.map(e=>{let a=d(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():d(e[t],null)}}}}(...e),e)}(x,e.props?.ref??e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:o,right:c,bottom:d}=p.current;if(a||!1===l||!x.current||!e||!t)return;let u="left"===s?`left: ${o}`:`right: ${c}`,f="bottom"===n?`bottom: ${d}`:`top: ${r}`;x.current.dataset.motionPopId=m;let y=document.createElement("style");h&&(y.nonce=h);let g=i??document.head;return g.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${m}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            ${f}px !important;
          }
        `),()=>{g.contains(y)&&g.removeChild(y)}},[a]),(0,t.jsx)(u,{isPresent:a,childRef:x,sizeRef:p,pop:l,children:!1===l?e:o.cloneElement(e,{ref:f})})}let x=({children:e,initial:a,isPresent:n,onExitComplete:l,custom:o,presenceAffectsLayout:c,mode:d,anchorX:u,anchorY:x,root:h})=>{let f=(0,s.useConstant)(p),y=(0,r.useId)(),g=!0,b=(0,r.useMemo)(()=>(g=!1,{id:y,initial:a,isPresent:n,custom:o,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;l&&l()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[n,f,l]);return c&&g&&(b={...b}),(0,r.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[n]),r.useEffect(()=>{n||f.size||!l||l()},[n]),e=(0,t.jsx)(m,{pop:"popLayout"===d,isPresent:n,anchorX:u,anchorY:x,root:h,children:e}),(0,t.jsx)(i.PresenceContext.Provider,{value:b,children:e})};function p(){return new Map}var h=e.i(64978);let f=e=>e.key||"";function y(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let g=({children:e,custom:i,initial:l=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:m="left",anchorY:p="top",root:g})=>{let[b,v]=(0,h.usePresence)(u),k=(0,r.useMemo)(()=>y(e),[e]),j=u&&!b?[]:k.map(f),w=(0,r.useRef)(!0),C=(0,r.useRef)(k),N=(0,s.useConstant)(()=>new Map),S=(0,r.useRef)(new Set),[P,$]=(0,r.useState)(k),[E,H]=(0,r.useState)(k);(0,n.useIsomorphicLayoutEffect)(()=>{w.current=!1,C.current=k;for(let e=0;e<E.length;e++){let t=f(E[e]);j.includes(t)?(N.delete(t),S.current.delete(t)):!0!==N.get(t)&&N.set(t,!1)}},[E,j.length,j.join("-")]);let _=[];if(k!==P){let e=[...k];for(let t=0;t<E.length;t++){let r=E[t],a=f(r);j.includes(a)||(e.splice(t,0,r),_.push(r))}return"wait"===d&&_.length&&(e=_),H(y(e)),$(k),null}let{forceRender:T}=(0,r.useContext)(a.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:E.map(e=>{let r=f(e),a=(!u||!!b)&&(k===E||j.includes(r));return(0,t.jsx)(x,{isPresent:a,initial:(!w.current||!!l)&&void 0,custom:i,presenceAffectsLayout:c,mode:d,root:g,onExitComplete:a?void 0:()=>{if(S.current.has(r)||(S.current.add(r),!N.has(r)))return;N.set(r,!0);let e=!0;N.forEach(t=>{t||(e=!1)}),e&&(T?.(),H(C.current),u&&v?.(),o&&o())},anchorX:m,anchorY:p,children:e},r)})})};e.s(["AnimatePresence",()=>g],88653)},68834,e=>{"use strict";var t=e.i(71645);let r=e=>{let t,r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,n={setState:a,getState:s,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(a,s,n);return n},a=e=>{let a=e?r(e):r,s=e=>(function(e,r=e=>e){let a=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>r(e.getState()),[e,r]),t.default.useCallback(()=>r(e.getInitialState()),[e,r]));return t.default.useDebugValue(a),a})(a,e);return Object.assign(s,a),s},s=e=>e?a(e):a;e.s(["create",()=>s],68834)},73319,e=>{"use strict";var t=e.i(68834),r=e.i(11795);let a="ace_attorney_history";function s(e){return{id:e.id,user_id:e.user_id,caseData:e.case_data,messages:e.messages,outcome:e.outcome,finalHealth:e.final_health,exchangeCount:e.exchange_count,score:e.score??0,starred:e.starred,is_public:e.is_public,createdAt:new Date(e.created_at).getTime()}}let n=(0,t.create)((e,t)=>({arguments:[],userId:null,setUserId:t=>e({userId:t}),saveArgument:async a=>{let{userId:s}=t(),n=(0,r.createClient)();if(!s)return i(a,e,t);{let{data:r,error:l}=await n.from("arguments").insert({user_id:s,case_data:a.caseData,messages:a.messages,outcome:a.outcome,final_health:a.finalHealth,exchange_count:a.exchangeCount,score:a.score,is_public:a.is_public??!0}).select("id").single();if(l)return console.error("Failed to save argument to Supabase:",l.message),i(a,e,t);let o=r.id,c={...a,id:o,user_id:s,starred:!1,is_public:a.is_public??!0,createdAt:Date.now()};return e(e=>({arguments:[c,...e.arguments]})),o}},toggleStar:async a=>{let{userId:s}=t(),n=t().arguments.find(e=>e.id===a);if(n)if(e(e=>({arguments:e.arguments.map(e=>e.id===a?{...e,starred:!e.starred}:e)})),s){let e=(0,r.createClient)();await e.from("arguments").update({starred:!n.starred}).eq("id",a)}else l(t)},deleteArgument:async a=>{let{userId:s}=t();if(e(e=>({arguments:e.arguments.filter(e=>e.id!==a)})),s){let e=(0,r.createClient)();await e.from("arguments").delete().eq("id",a)}else l(t)},getArgument:e=>t().arguments.find(t=>t.id===e),hydrate:async()=>{let{userId:n}=t();if(n){let t=(0,r.createClient)(),{data:a,error:i}=await t.from("arguments").select("*").eq("user_id",n).order("created_at",{ascending:!1});if(!i&&a)return void e({arguments:a.map(s)})}try{let t=localStorage.getItem(a);if(t){let r=JSON.parse(t),a=(Array.isArray(r)?r:[]).map(e=>({...e,score:e.score??0,is_public:e.is_public??!0}));e({arguments:a})}}catch{}}}));function i(e,t,r){let a=`arg_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,s={...e,id:a,createdAt:Date.now(),starred:!1,is_public:e.is_public??!0};return t(e=>({arguments:[s,...e.arguments]})),setTimeout(()=>l(r),0),a}function l(e){try{let{arguments:t}=e();localStorage.setItem(a,JSON.stringify(t))}catch{}}e.s(["useHistoryStore",0,n])},86489,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(46932),s=e.i(88653);function n(e,t){let r=e/t;return r>.6?"#22c55e":r>.35?"#eab308":r>.15?"#f97316":"#ef4444"}function i({damage:e,side:r}){return e<=0?null:(0,t.jsxs)(a.motion.span,{initial:{opacity:1,y:0},animate:{opacity:0,y:-30},transition:{duration:1.2},className:`absolute top-0 text-sm font-black pointer-events-none ${"left"===r?"left-2":"right-2"}`,style:{color:"#ef4444",textShadow:"0 0 8px rgba(239,68,68,0.6)"},children:["-",e]})}function l({health:e,lastDamageToAttorney:l=0,lastDamageToDefendant:o=0}){let[c,d]=(0,r.useState)(0);(0,r.useEffect)(()=>{(l>0||o>0)&&d(e=>e+1)},[l,o]);let u=e.attorneyHP/e.maxHP*100,m=e.defendantHP/e.maxHP*100,x=n(e.attorneyHP,e.maxHP),p=n(e.defendantHP,e.maxHP);return(0,t.jsxs)("div",{className:"flex items-center gap-3 px-5 py-2.5 shrink-0",style:{borderBottom:"1px solid var(--border-subtle)"},children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wider",style:{color:"var(--primary)"},children:"PROSECUTION"}),(0,t.jsx)("span",{className:"text-[10px] font-medium tabular-nums",style:{color:x},children:e.attorneyHP})]}),(0,t.jsx)("div",{className:"h-2 rounded-full overflow-hidden",style:{background:"var(--bar-track)"},children:(0,t.jsx)(a.motion.div,{className:"h-full rounded-full",style:{background:x,originX:0},animate:{width:`${u}%`},transition:{duration:.6,ease:"easeOut"}})}),(0,t.jsx)(s.AnimatePresence,{mode:"popLayout",children:l>0&&(0,t.jsx)(i,{damage:l,side:"left"},`att-${c}`)})]}),(0,t.jsx)("div",{className:"flex flex-col items-center shrink-0 px-1",children:(0,t.jsx)("span",{className:"text-[9px] font-semibold tracking-widest",style:{color:"var(--text-muted)"},children:"VS"})}),(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-[10px] font-medium tabular-nums",style:{color:p},children:e.defendantHP}),(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wider",style:{color:"var(--accent)"},children:"DEFENSE"})]}),(0,t.jsx)("div",{className:"h-2 rounded-full overflow-hidden",style:{background:"var(--bar-track)"},children:(0,t.jsx)(a.motion.div,{className:"h-full rounded-full ml-auto",style:{background:p,originX:1},animate:{width:`${m}%`},transition:{duration:.6,ease:"easeOut"}})}),(0,t.jsx)(s.AnimatePresence,{mode:"popLayout",children:o>0&&(0,t.jsx)(i,{damage:o,side:"right"},`def-${c}`)})]})]})}function o({health:e}){let r=e.attorneyHP/e.maxHP*100,a=e.defendantHP/e.maxHP*100,s=n(e.attorneyHP,e.maxHP),i=n(e.defendantHP,e.maxHP);return(0,t.jsxs)("div",{className:"flex items-center gap-3 px-5 py-2.5",style:{borderBottom:"1px solid var(--border-subtle)"},children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wider",style:{color:"var(--primary)"},children:"PROSECUTION"}),(0,t.jsx)("span",{className:"text-[10px] font-medium tabular-nums",style:{color:s},children:e.attorneyHP})]}),(0,t.jsx)("div",{className:"h-2 rounded-full overflow-hidden",style:{background:"var(--bar-track)"},children:(0,t.jsx)("div",{className:"h-full rounded-full",style:{background:s,width:`${r}%`}})})]}),(0,t.jsx)("span",{className:"text-[9px] font-semibold tracking-widest shrink-0 px-1",style:{color:"var(--text-muted)"},children:"VS"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-[10px] font-medium tabular-nums",style:{color:i},children:e.defendantHP}),(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wider",style:{color:"var(--accent)"},children:"DEFENSE"})]}),(0,t.jsx)("div",{className:"h-2 rounded-full overflow-hidden",style:{background:"var(--bar-track)"},children:(0,t.jsx)("div",{className:"h-full rounded-full ml-auto",style:{background:i,width:`${a}%`}})})]})]})}e.s(["HealthBar",()=>l,"HealthBarStatic",()=>o])},37768,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(46932),s=e.i(88653);let n="spadeattorney.netlify.app";function i({message:i,argumentId:l,isPublic:o,onMakePublic:c,highlighted:d}){let u="attorney"===i.sender,m=i.intensity??1,x=(0,r.useRef)(null),p=(0,r.useRef)(null),h=(0,r.useRef)(null),[f,y]=(0,r.useState)(!1),[g,b]=(0,r.useState)({x:0,y:0}),[v,k]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1),[C,N]=(0,r.useState)(!1),[S,P]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!f)return;let e=()=>y(!1);return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[f]);let $=(0,r.useCallback)((e,t)=>{b({x:e,y:t}),y(!0)},[]),E=(0,r.useCallback)(e=>{let{clientX:t,clientY:r}=e;h.current=setTimeout(()=>{$(t,r)},500)},[$]),H=(0,r.useCallback)(()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]),_=(0,r.useCallback)(()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]),T=(0,r.useCallback)(e=>{e.preventDefault(),$(e.clientX,e.clientY)},[$]),L=(0,r.useCallback)(async()=>{if(x.current&&!j){w(!0);try{let t=(await e.A(48503)).default,r=x.current,a=getComputedStyle(r),s=a.backgroundColor,i=a.color,l=r.offsetWidth,o=a.padding,c=a.borderRadius,d=a.font,u=getComputedStyle(document.documentElement).getPropertyValue("--bg").trim()||"#111111",m=Math.max(l+48,280),p=document.createElement("div");p.style.cssText=`
        padding: 24px 24px 0 24px;
        background: ${u};
        border-radius: 16px 16px 0 0;
        display: block;
        position: fixed;
        left: -9999px;
        top: 0;
        width: ${m}px;
        font-family: "Berkeley Mono", system-ui, -apple-system, sans-serif;
        overflow-wrap: break-word;
        word-break: break-word;
      `;let h=r.cloneNode(!0);h.style.transform="none",h.style.width=`${l}px`,h.style.maxWidth="100%",h.style.backgroundColor=s,h.style.padding=o,h.style.borderRadius=c,h.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)";let f=h.querySelector("p");f&&(f.style.color=i,f.style.font=d,f.style.whiteSpace="pre-wrap"),p.appendChild(h);let y=document.createElement("div");y.style.cssText=`
        background: #ffffff;
        margin-top: 20px;
        padding: 12px 24px;
        border-radius: 0 0 16px 16px;
        text-align: center;
        font-size: 12px;
        font-weight: 500;
        color: #222222;
        letter-spacing: 0.05em;
        font-family: "Berkeley Mono", system-ui, -apple-system, sans-serif;
      `,y.textContent=n;let g=document.createElement("div");g.style.cssText=`
        position: fixed;
        left: -9999px;
        top: 0;
        display: inline-block;
        width: ${m}px;
      `,g.appendChild(p),g.appendChild(y),document.body.appendChild(g);let b=await t(g,{backgroundColor:null,scale:2,useCORS:!0});document.body.removeChild(g);let v=document.createElement("a");v.download=`ace-attorney-${Date.now()}.png`,v.href=b.toDataURL("image/png"),v.click()}catch{}w(!1),y(!1)}},[j]),M=(0,r.useCallback)(async()=>{k(!0),await navigator.clipboard.writeText(i.text),setTimeout(()=>{k(!1),y(!1)},600)},[i.text]),A=(0,r.useCallback)(async()=>{if(l){if(!1===o&&c){y(!1),N(!0);return}let e=`https://${n}/a/${l}?m=${i.id}`;if(navigator.share)try{await navigator.share({text:"Check out this courtroom argument",url:e})}catch{}else await navigator.clipboard.writeText(e)}else{let e=`"${i.text.slice(0,200)}${i.text.length>200?"...":""}" — ${n}`;if(navigator.share)try{await navigator.share({text:e,url:`https://${n}`})}catch{}else await navigator.clipboard.writeText(e)}y(!1)},[i.text,i.id,l,o,c]),R=(0,r.useCallback)(async()=>{if(c&&l){P(!0);try{await c();let e=`https://${n}/a/${l}?m=${i.id}`;if(navigator.share)try{await navigator.share({text:"Check out this courtroom argument",url:e})}catch{}else await navigator.clipboard.writeText(e)}catch{}P(!1),N(!1)}},[c,l,i.id]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.motion.div,{ref:p,id:`msg-${i.id}`,initial:u?m>=7?{opacity:0,scale:.9}:{opacity:0,x:-20}:{opacity:0,x:20},animate:{opacity:1,x:0,scale:1},transition:{duration:m>=7?.4:.3,type:m>=7?"spring":"tween"},className:`flex flex-col max-w-[82%] my-1.5 px-5 ${u?"self-start":"self-end"} ${d?"msg-highlight":""}`,onPointerDown:E,onPointerUp:H,onPointerCancel:_,onContextMenu:T,style:{touchAction:"auto",userSelect:"none"},children:[(0,t.jsx)("span",{className:`text-[10px] font-medium tracking-wider mb-1 ${u?"text-left":"text-right"}`,style:{color:u?"var(--primary)":"var(--accent)"},children:u?"PROSECUTION":"YOU"}),(0,t.jsx)("div",{ref:x,className:`rounded-2xl px-4 py-3.5 ${u?"rounded-tl-md":"rounded-tr-md"}`,style:{background:u?"var(--attorney-bubble)":"var(--user-bubble)",transform:`scale(${m>=4?1+(m-4)*.008:1})`,boxShadow:"0 1px 3px rgba(0,0,0,0.2)"},children:(0,t.jsx)("p",{className:"text-[15px] leading-relaxed whitespace-pre-wrap",style:{color:u?"var(--attorney-text)":"var(--user-text)"},children:i.text})})]}),(0,t.jsx)(s.AnimatePresence,{children:f&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},className:"fixed z-[300] rounded-2xl overflow-hidden shadow-2xl",style:{left:Math.min(g.x,window.innerWidth-200),top:Math.min(g.y-10,window.innerHeight-200),background:"var(--bg-card)",border:"1px solid var(--border-subtle)",minWidth:180},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("button",{onClick:L,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-left transition-colors cursor-pointer",style:{color:"var(--text-primary)"},onMouseEnter:e=>e.currentTarget.style.background="var(--hover-overlay)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("polyline",{points:"7 10 12 15 17 10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3",strokeLinecap:"round"})]}),j?"Saving...":"Save as Image"]}),(0,t.jsx)("div",{className:"h-px",style:{background:"var(--border-subtle)"}}),(0,t.jsxs)("button",{onClick:A,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-left transition-colors cursor-pointer",style:{color:"var(--text-primary)"},onMouseEnter:e=>e.currentTarget.style.background="var(--hover-overlay)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,t.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,t.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,t.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49",strokeLinecap:"round"})]}),l?"Share Link":"Share"]}),(0,t.jsx)("div",{className:"h-px",style:{background:"var(--border-subtle)"}}),(0,t.jsxs)("button",{onClick:M,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-left transition-colors cursor-pointer",style:{color:"var(--text-primary)"},onMouseEnter:e=>e.currentTarget.style.background="var(--hover-overlay)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1",strokeLinecap:"round",strokeLinejoin:"round"})]}),v?"Copied":"Copy Text"]})]})}),(0,t.jsx)(s.AnimatePresence,{children:C&&(0,t.jsx)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[400] flex items-center justify-center",style:{background:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)"},onClick:()=>!S&&N(!1),children:(0,t.jsxs)(a.motion.div,{initial:{opacity:0,scale:.9,y:12},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:12},transition:{type:"spring",damping:25,stiffness:300},className:"mx-6 w-full max-w-sm rounded-2xl p-6",style:{background:"var(--bg-card)",boxShadow:"0 16px 48px rgba(0,0,0,0.4)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h3",{className:"text-base font-semibold mb-2",style:{color:"var(--text-primary)"},children:"This argument is private"}),(0,t.jsx)("p",{className:"text-sm mb-5 leading-relaxed",style:{color:"var(--text-muted)"},children:"To share a link to this conversation, it needs to be made public. Anyone with the link will be able to view it."}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>N(!1),disabled:S,className:"flex-1 py-2.5 rounded-xl text-sm font-medium cursor-pointer transition-all duration-150",style:{color:"var(--text-muted)",border:"1px solid var(--border-subtle)"},children:"Cancel"}),(0,t.jsx)("button",{onClick:R,disabled:S,className:"flex-1 py-2.5 rounded-xl text-sm font-semibold text-white cursor-pointer transition-all duration-200 hover:brightness-110 active:scale-[0.98] disabled:opacity-50",style:{background:"var(--primary)"},children:S?"Sharing...":"Make Public & Share"})]})]})})})]})}e.s(["MessageBubble",()=>i])},71521,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(46932),n=e.i(73319),i=e.i(11795),l=e.i(86489),o=e.i(37768);function c(){let e=(0,a.useRouter)(),c=(0,a.useParams)().id,{hydrate:d,getArgument:u}=(0,n.useHistoryStore)(),[m,x]=(0,r.useState)(null),[p,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{!async function(){await d();let e=u(c);if(e){x(e),h(!1);return}let t=(0,i.createClient)(),{data:r}=await t.from("arguments").select("*").eq("id",c).single();r&&x({id:r.id,user_id:r.user_id,caseData:r.case_data,messages:r.messages,outcome:r.outcome,finalHealth:r.final_health,exchangeCount:r.exchange_count,score:r.score??0,starred:r.starred,is_public:r.is_public,createdAt:new Date(r.created_at).getTime()}),h(!1)}()},[c]);let f=(0,r.useCallback)(async()=>{if(!m)return;let e=(0,i.createClient)();await e.from("arguments").update({is_public:!0}).eq("id",m.id),x({...m,is_public:!0})},[m]);if(p)return(0,t.jsx)("div",{className:"flex items-center justify-center h-dvh",style:{background:"var(--bg)"},children:(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"var(--primary)",borderTopColor:"transparent"}})});if(!m)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-dvh gap-4",style:{background:"var(--bg)"},children:[(0,t.jsx)("p",{style:{color:"var(--text-muted)"},children:"Argument not found."}),(0,t.jsx)("button",{onClick:()=>e.push("/"),className:"text-sm cursor-pointer",style:{color:"var(--primary)"},children:"Go Home"})]});let y={won:{label:"Not Guilty",color:"#34D399"},lost:{label:"Guilty",color:"#F87171"},"in-progress":{label:"In Progress",color:"#E0B97A"}}[m.outcome];return(0,t.jsxs)("div",{className:"flex flex-col h-dvh",style:{background:"var(--bg)"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-5 py-3.5 shrink-0",style:{borderBottom:"1px solid var(--border-subtle)"},children:[(0,t.jsxs)("button",{onClick:()=>e.push("/"),className:"text-sm px-3.5 py-1.5 rounded-full border cursor-pointer transition-all duration-150",style:{borderColor:"var(--chip-border)",color:"var(--text-secondary)"},children:[(0,t.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"inline mr-1 -mt-0.5",children:(0,t.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h1",{className:"text-sm font-medium truncate",style:{color:"var(--text-primary)"},children:m.caseData.title}),(0,t.jsxs)("p",{className:"text-[11px] truncate mt-0.5",style:{color:"var(--text-muted)"},children:[m.exchangeCount," rounds · +",m.score," pts · ",new Date(m.createdAt).toLocaleDateString()]})]}),(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wide px-2.5 py-1 rounded-full shrink-0",style:{color:y.color,background:`${y.color}18`},children:y.label})]}),(0,t.jsx)(l.HealthBarStatic,{health:m.finalHealth}),(0,t.jsxs)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"px-5 py-3 shrink-0",style:{background:"var(--hover-overlay)",borderBottom:"1px solid var(--border-subtle)"},children:[(0,t.jsxs)("p",{className:"text-xs font-medium",style:{color:"var(--text-secondary)"},children:[(0,t.jsx)("span",{style:{color:"var(--text-muted)"},children:"Charged with: "}),m.caseData.charge]}),(0,t.jsx)("p",{className:"text-[11px] mt-1 leading-relaxed",style:{color:"var(--text-muted)"},children:m.caseData.context})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto flex flex-col py-2",children:m.messages.map(e=>(0,t.jsx)(o.MessageBubble,{message:e,argumentId:m.id,isPublic:m.is_public,onMakePublic:f},e.id))})]})}e.s(["default",()=>c])},48503,e=>{e.v(t=>Promise.all(["static/chunks/adabfc2d4bff09a9.js"].map(t=>e.l(t))).then(()=>t(15833)))}]);