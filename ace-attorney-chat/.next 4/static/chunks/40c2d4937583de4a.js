(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,652,(e,t,r)=>{var o,i,n,a,s,c,l,p,d,u,h,m,v,g,f,x=!1;function y(){if(!x){x=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(m=/\b(iPhone|iP[ao]d)/.exec(e),v=/\b(iP[ao]d)/.exec(e),u=/Android/i.exec(e),g=/FBAN\/\w+;/i.exec(e),f=/Mobile/i.exec(e),h=!!/Win64/.exec(e),t){(o=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(o=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(e);c=y?parseFloat(y[1])+4:o,i=t[2]?parseFloat(t[2]):NaN,n=t[3]?parseFloat(t[3]):NaN,s=(a=t[4]?parseFloat(t[4]):NaN)&&(t=/(?:Chrome\/(\d+\.\d+))/.exec(e))&&t[1]?parseFloat(t[1]):NaN}else o=i=n=s=a=NaN;if(r){if(r[1]){var w=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);l=!w||parseFloat(w[1].replace("_","."))}else l=!1;p=!!r[2],d=!!r[3]}else l=p=d=!1}}var w={ie:function(){return y()||o},ieCompatibilityMode:function(){return y()||c>o},ie64:function(){return w.ie()&&h},firefox:function(){return y()||i},opera:function(){return y()||n},webkit:function(){return y()||a},safari:function(){return w.webkit()},chrome:function(){return y()||s},windows:function(){return y()||p},osx:function(){return y()||l},linux:function(){return y()||d},iphone:function(){return y()||m},mobile:function(){return y()||m||v||u||f},nativeApp:function(){return y()||g},android:function(){return y()||u},ipad:function(){return y()||v}};t.exports=w},10316,(e,t,r)=>{"use strict";var o=!!("u">typeof window&&window.document&&window.document.createElement);t.exports={canUseDOM:o,canUseWorkers:"u">typeof Worker,canUseEventListeners:o&&!!(window.addEventListener||window.attachEvent),canUseViewport:o&&!!window.screen,isInWorker:!o}},33418,(e,t,r)=>{"use strict";var o,i=e.r(10316);i.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=function(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,n=r in document;if(!n){var a=document.createElement("div");a.setAttribute(r,"return;"),n="function"==typeof a[r]}return!n&&o&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}},52545,(e,t,r)=>{"use strict";var o=e.r(652),i=e.r(33418);function n(e){var t=0,r=0,o=0,i=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),o=10*t,i=10*r,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(o=e.deltaX),(o||i)&&e.deltaMode&&(1==e.deltaMode?(o*=40,i*=40):(o*=800,i*=800)),o&&!t&&(t=o<1?-1:1),i&&!r&&(r=i<1?-1:1),{spinX:t,spinY:r,pixelX:o,pixelY:i}}n.getEventType=function(){return o.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},t.exports=n},99733,(e,t,r)=>{t.exports=e.r(52545)},32545,e=>{"use strict";var t=e.i(43476),r=e.i(71645),o=e.i(18566),i=e.i(46932),n=e.i(11795),a=e.i(90571),s=e.i(99733);function c(e,t,r,o,i){void 0===i&&(i=0);var n=v(t.width,t.height,i),a=n.width,s=n.height;return{x:l(e.x,a,r.width,o),y:l(e.y,s,r.height,o)}}function l(e,t,r,o){var i=t*o/2-r/2;return g(e,-i,i)}function p(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function d(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function u(e,t){return Math.min(e,Math.max(0,t))}function h(e,t){return t}function m(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function v(e,t,r){var o=r*Math.PI/180;return{width:Math.abs(Math.cos(o)*e)+Math.abs(Math.sin(o)*t),height:Math.abs(Math.sin(o)*e)+Math.abs(Math.cos(o)*t)}}function g(e,t,r){return Math.min(Math.max(e,t),r)}function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return"string"==typeof e&&!!(e.length>0)}).join(" ").trim()}var x=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.cropperRef=r.createRef(),o.imageRef=r.createRef(),o.videoRef=r.createRef(),o.containerPosition={x:0,y:0},o.containerRef=null,o.styleRef=null,o.containerRect=null,o.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},o.dragStartPosition={x:0,y:0},o.dragStartCrop={x:0,y:0},o.gestureZoomStart=0,o.gestureRotationStart=0,o.isTouching=!1,o.lastPinchDistance=0,o.lastPinchRotation=0,o.rafDragTimeout=null,o.rafPinchTimeout=null,o.wheelTimer=null,o.currentDoc="u">typeof document?document:null,o.currentWindow="u">typeof window?window:null,o.resizeObserver=null,o.previousCropSize=null,o.isInitialized=!1,o.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},o.initResizeObserver=function(){if(void 0!==window.ResizeObserver&&o.containerRef){var e=!0;o.resizeObserver=new window.ResizeObserver(function(t){if(e){e=!1;return}o.computeSizes()}),o.resizeObserver.observe(o.containerRef)}},o.preventZoomSafari=function(e){return e.preventDefault()},o.cleanEvents=function(){o.currentDoc&&(o.currentDoc.removeEventListener("mousemove",o.onMouseMove),o.currentDoc.removeEventListener("mouseup",o.onDragStopped),o.currentDoc.removeEventListener("touchmove",o.onTouchMove),o.currentDoc.removeEventListener("touchend",o.onDragStopped),o.currentDoc.removeEventListener("gesturechange",o.onGestureChange),o.currentDoc.removeEventListener("gestureend",o.onGestureEnd),o.currentDoc.removeEventListener("scroll",o.onScroll))},o.clearScrollEvent=function(){o.containerRef&&o.containerRef.removeEventListener("wheel",o.onWheel),o.wheelTimer&&clearTimeout(o.wheelTimer)},o.onMediaLoad=function(){var e=o.computeSizes();e&&(o.previousCropSize=e,o.emitCropData(),o.setInitialCrop(e),o.isInitialized=!0),o.props.onMediaLoaded&&o.props.onMediaLoaded(o.mediaSize)},o.setInitialCrop=function(e){if(o.props.initialCroppedAreaPercentages){var t,r,i,n,a,s,c,l=(t=o.props.initialCroppedAreaPercentages,r=o.mediaSize,i=o.props.rotation,n=o.props.minZoom,a=o.props.maxZoom,s=v(r.width,r.height,i),{crop:{x:(c=g(e.width/s.width*(100/t.width),n,a))*s.width/2-e.width/2-s.width*c*(t.x/100),y:c*s.height/2-e.height/2-s.height*c*(t.y/100)},zoom:c}),p=l.crop,d=l.zoom;o.props.onCropChange(p),o.props.onZoomChange&&o.props.onZoomChange(d)}else if(o.props.initialCroppedAreaPixels){var u,h,m,f,x,y,w,b,C,S=(u=o.props.initialCroppedAreaPixels,h=o.mediaSize,m=o.props.rotation,f=o.props.minZoom,x=o.props.maxZoom,void 0===m&&(m=0),y=v(h.naturalWidth,h.naturalHeight,m),b=g((w=h.width>h.height?h.width/h.naturalWidth:h.height/h.naturalHeight,e.height>e.width?e.height/(u.height*w):e.width/(u.width*w)),f,x),C=e.height>e.width?e.height/u.height:e.width/u.width,{crop:{x:((y.width-u.width)/2-u.x)*C,y:((y.height-u.height)/2-u.y)*C},zoom:b}),p=S.crop,d=S.zoom;o.props.onCropChange(p),o.props.onZoomChange&&o.props.onZoomChange(d)}},o.computeSizes=function(){var e,t,r,i,n,s,c=o.imageRef.current||o.videoRef.current;if(c&&o.containerRef){o.containerRect=o.containerRef.getBoundingClientRect(),o.saveContainerPosition();var l,p,d,u,h,m,g,f,x,y,w,b=o.containerRect.width/o.containerRect.height,C=(null==(e=o.imageRef.current)?void 0:e.naturalWidth)||(null==(t=o.videoRef.current)?void 0:t.videoWidth)||0,S=(null==(r=o.imageRef.current)?void 0:r.naturalHeight)||(null==(i=o.videoRef.current)?void 0:i.videoHeight)||0,z=c.offsetWidth<C||c.offsetHeight<S,R=C/S,P=void 0;if(z)switch(o.state.mediaObjectFit){default:case"contain":P=b>R?{width:o.containerRect.height*R,height:o.containerRect.height}:{width:o.containerRect.width,height:o.containerRect.width/R};break;case"horizontal-cover":P={width:o.containerRect.width,height:o.containerRect.width/R};break;case"vertical-cover":P={width:o.containerRect.height*R,height:o.containerRect.height}}else P={width:c.offsetWidth,height:c.offsetHeight};o.mediaSize=(0,a.__assign)((0,a.__assign)({},P),{naturalWidth:C,naturalHeight:S}),o.props.setMediaSize&&o.props.setMediaSize(o.mediaSize);var D=o.props.cropSize?o.props.cropSize:(l=o.mediaSize.width,p=o.mediaSize.height,d=o.containerRect.width,u=o.containerRect.height,h=o.props.aspect,void 0===(m=o.props.rotation)&&(m=0),f=(g=v(l,p,m)).width,x=g.height,(y=Math.min(f,d))>(w=Math.min(x,u))*h?{width:w*h,height:w}:{width:y,height:y/h});return((null==(n=o.state.cropSize)?void 0:n.height)!==D.height||(null==(s=o.state.cropSize)?void 0:s.width)!==D.width)&&o.props.onCropSizeChange&&o.props.onCropSizeChange(D),o.setState({cropSize:D},o.recomputeCropPosition),o.props.setCropSize&&o.props.setCropSize(D),D}},o.saveContainerPosition=function(){if(o.containerRef){var e=o.containerRef.getBoundingClientRect();o.containerPosition={x:e.left,y:e.top}}},o.onMouseDown=function(e){o.currentDoc&&(e.preventDefault(),o.currentDoc.addEventListener("mousemove",o.onMouseMove),o.currentDoc.addEventListener("mouseup",o.onDragStopped),o.saveContainerPosition(),o.onDragStart(t.getMousePoint(e)))},o.onMouseMove=function(e){return o.onDrag(t.getMousePoint(e))},o.onScroll=function(e){o.currentDoc&&(e.preventDefault(),o.saveContainerPosition())},o.onTouchStart=function(e){!o.currentDoc||(o.isTouching=!0,(!o.props.onTouchRequest||o.props.onTouchRequest(e))&&(o.currentDoc.addEventListener("touchmove",o.onTouchMove,{passive:!1}),o.currentDoc.addEventListener("touchend",o.onDragStopped),o.saveContainerPosition(),2===e.touches.length?o.onPinchStart(e):1===e.touches.length&&o.onDragStart(t.getTouchPoint(e.touches[0]))))},o.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?o.onPinchMove(e):1===e.touches.length&&o.onDrag(t.getTouchPoint(e.touches[0]))},o.onGestureStart=function(e){o.currentDoc&&(e.preventDefault(),o.currentDoc.addEventListener("gesturechange",o.onGestureChange),o.currentDoc.addEventListener("gestureend",o.onGestureEnd),o.gestureZoomStart=o.props.zoom,o.gestureRotationStart=o.props.rotation)},o.onGestureChange=function(e){if(e.preventDefault(),!o.isTouching){var r=t.getMousePoint(e),i=o.gestureZoomStart-1+e.scale;if(o.setNewZoom(i,r,{shouldUpdatePosition:!0}),o.props.onRotationChange){var n=o.gestureRotationStart+e.rotation;o.props.onRotationChange(n)}}},o.onGestureEnd=function(e){o.cleanEvents()},o.onDragStart=function(e){var t,r;o.dragStartPosition={x:e.x,y:e.y},o.dragStartCrop=(0,a.__assign)({},o.props.crop),null==(r=(t=o.props).onInteractionStart)||r.call(t)},o.onDrag=function(e){var t=e.x,r=e.y;o.currentWindow&&(o.rafDragTimeout&&o.currentWindow.cancelAnimationFrame(o.rafDragTimeout),o.rafDragTimeout=o.currentWindow.requestAnimationFrame(function(){if(o.state.cropSize&&void 0!==t&&void 0!==r){var e=t-o.dragStartPosition.x,i=r-o.dragStartPosition.y,n={x:o.dragStartCrop.x+e,y:o.dragStartCrop.y+i},a=o.props.restrictPosition?c(n,o.mediaSize,o.state.cropSize,o.props.zoom,o.props.rotation):n;o.props.onCropChange(a)}}))},o.onDragStopped=function(){var e,t;o.isTouching=!1,o.cleanEvents(),o.emitCropData(),null==(t=(e=o.props).onInteractionEnd)||t.call(e)},o.onWheel=function(e){if(o.currentWindow&&(!o.props.onWheelRequest||o.props.onWheelRequest(e))){e.preventDefault();var r=t.getMousePoint(e),i=(0,s.default)(e).pixelY,n=o.props.zoom-i*o.props.zoomSpeed/200;o.setNewZoom(n,r,{shouldUpdatePosition:!0}),o.state.hasWheelJustStarted||o.setState({hasWheelJustStarted:!0},function(){var e,t;return null==(t=(e=o.props).onInteractionStart)?void 0:t.call(e)}),o.wheelTimer&&clearTimeout(o.wheelTimer),o.wheelTimer=o.currentWindow.setTimeout(function(){return o.setState({hasWheelJustStarted:!1},function(){var e,t;return null==(t=(e=o.props).onInteractionEnd)?void 0:t.call(e)})},250)}},o.getPointOnContainer=function(e,t){var r=e.x,i=e.y;if(!o.containerRect)throw Error("The Cropper is not mounted");return{x:o.containerRect.width/2-(r-t.x),y:o.containerRect.height/2-(i-t.y)}},o.getPointOnMedia=function(e){var t=e.x,r=e.y,i=o.props,n=i.crop,a=i.zoom;return{x:(t+n.x)/a,y:(r+n.y)/a}},o.setNewZoom=function(e,t,r){var i=(void 0===r?{}:r).shouldUpdatePosition;if(o.state.cropSize&&o.props.onZoomChange){var n=g(e,o.props.minZoom,o.props.maxZoom);if(void 0===i||i){var a=o.getPointOnContainer(t,o.containerPosition),s=o.getPointOnMedia(a),l={x:s.x*n-a.x,y:s.y*n-a.y},p=o.props.restrictPosition?c(l,o.mediaSize,o.state.cropSize,n,o.props.rotation):l;o.props.onCropChange(p)}o.props.onZoomChange(n)}},o.getCropData=function(){var e,t,r,i,n,s,l,p,d,m,g,f,x,y,w;return o.state.cropSize?(e=o.props.restrictPosition?c(o.props.crop,o.mediaSize,o.state.cropSize,o.props.zoom,o.props.rotation):o.props.crop,t=o.mediaSize,r=o.state.cropSize,i=o.getAspect(),n=o.props.zoom,s=o.props.rotation,l=o.props.restrictPosition,void 0===s&&(s=0),void 0===l&&(l=!0),p=l?u:h,d=v(t.width,t.height,s),m=v(t.naturalWidth,t.naturalHeight,s),g={x:p(100,((d.width-r.width/n)/2-e.x/n)/d.width*100),y:p(100,((d.height-r.height/n)/2-e.y/n)/d.height*100),width:p(100,r.width/d.width*100/n),height:p(100,r.height/d.height*100/n)},f=Math.round(p(m.width,g.width*m.width/100)),x=Math.round(p(m.height,g.height*m.height/100)),y=m.width>=m.height*i?{width:Math.round(x*i),height:x}:{width:f,height:Math.round(f/i)},w=(0,a.__assign)((0,a.__assign)({},y),{x:Math.round(p(m.width-y.width,g.x*m.width/100)),y:Math.round(p(m.height-y.height,g.y*m.height/100))}),{croppedAreaPercentages:g,croppedAreaPixels:w}):null},o.emitCropData=function(){var e=o.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;o.props.onCropComplete&&o.props.onCropComplete(t,r),o.props.onCropAreaChange&&o.props.onCropAreaChange(t,r)}},o.emitCropAreaChange=function(){var e=o.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;o.props.onCropAreaChange&&o.props.onCropAreaChange(t,r)}},o.recomputeCropPosition=function(){if(o.state.cropSize){var e,t,r=o.props.crop;if(o.isInitialized&&(null==(e=o.previousCropSize)?void 0:e.width)&&(null==(t=o.previousCropSize)?void 0:t.height)&&(Math.abs(o.previousCropSize.width-o.state.cropSize.width)>1e-6||Math.abs(o.previousCropSize.height-o.state.cropSize.height)>1e-6)){var i=o.state.cropSize.width/o.previousCropSize.width,n=o.state.cropSize.height/o.previousCropSize.height;r={x:o.props.crop.x*i,y:o.props.crop.y*n}}var a=o.props.restrictPosition?c(r,o.mediaSize,o.state.cropSize,o.props.zoom,o.props.rotation):r;o.previousCropSize=o.state.cropSize,o.props.onCropChange(a),o.emitCropData()}},o.onKeyDown=function(e){var t,r,i=o.props,n=i.crop,s=i.onCropChange,l=i.keyboardStep,p=i.zoom,d=i.rotation,u=l;if(o.state.cropSize){e.shiftKey&&(u*=.2);var h=(0,a.__assign)({},n);switch(e.key){case"ArrowUp":h.y-=u,e.preventDefault();break;case"ArrowDown":h.y+=u,e.preventDefault();break;case"ArrowLeft":h.x-=u,e.preventDefault();break;case"ArrowRight":h.x+=u,e.preventDefault();break;default:return}o.props.restrictPosition&&(h=c(h,o.mediaSize,o.state.cropSize,p,d)),e.repeat||null==(r=(t=o.props).onInteractionStart)||r.call(t),s(h)}},o.onKeyUp=function(e){var t,r;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault();break;default:return}o.emitCropData(),null==(r=(t=o.props).onInteractionEnd)||r.call(t)},o}return(0,a.__extends)(t,e),t.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),void 0===window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&(void 0===window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null==(e=this.resizeObserver)||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null==(t=this.styleRef.parentNode)||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(e){e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null==(t=e.cropSize)?void 0:t.height)!==(null==(r=this.props.cropSize)?void 0:r.height)||(null==(o=e.cropSize)?void 0:o.width)!==(null==(i=this.props.cropSize)?void 0:i.width)?this.computeSizes():((null==(n=e.crop)?void 0:n.x)!==(null==(a=this.props.crop)?void 0:a.x)||(null==(s=e.crop)?void 0:s.y)!==(null==(c=this.props.crop)?void 0:c.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null==(l=this.videoRef.current)||l.load());var t,r,o,i,n,a,s,c,l,p=this.getObjectFit();p!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:p},this.computeSizes)},t.prototype.getAspect=function(){var e=this.props,t=e.cropSize,r=e.aspect;return t?t.width/t.height:r},t.prototype.getObjectFit=function(){var e,t,r,o;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var i=this.containerRect.width/this.containerRect.height;return((null==(e=this.imageRef.current)?void 0:e.naturalWidth)||(null==(t=this.videoRef.current)?void 0:t.videoWidth)||0)/((null==(r=this.imageRef.current)?void 0:r.naturalHeight)||(null==(o=this.videoRef.current)?void 0:o.videoHeight)||0)<i?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(e){var r=t.getTouchPoint(e.touches[0]),o=t.getTouchPoint(e.touches[1]);this.lastPinchDistance=p(r,o),this.lastPinchRotation=d(r,o),this.onDragStart(m(r,o))},t.prototype.onPinchMove=function(e){var r=this;if(this.currentDoc&&this.currentWindow){var o=t.getTouchPoint(e.touches[0]),i=t.getTouchPoint(e.touches[1]),n=m(o,i);this.onDrag(n),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var e=p(o,i),t=r.props.zoom*(e/r.lastPinchDistance);r.setNewZoom(t,n,{shouldUpdatePosition:!1}),r.lastPinchDistance=e;var a=d(o,i),s=r.props.rotation+(a-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(s),r.lastPinchRotation=a})}},t.prototype.render=function(){var e,t=this,o=this.props,i=o.image,n=o.video,s=o.mediaProps,c=o.cropperProps,l=o.transform,p=o.crop,d=p.x,u=p.y,h=o.rotation,m=o.zoom,v=o.cropShape,g=o.showGrid,x=o.roundCropAreaPixels,y=o.style,w=y.containerStyle,b=y.cropAreaStyle,C=y.mediaStyle,S=o.classes,z=S.containerClassName,R=S.cropAreaClassName,P=S.mediaClassName,D=null!=(e=this.state.mediaObjectFit)?e:this.getObjectFit();return r.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return t.containerRef=e},"data-testid":"container",style:w,className:f("reactEasyCrop_Container",z)},i?r.createElement("img",(0,a.__assign)({alt:"",className:f("reactEasyCrop_Image","contain"===D&&"reactEasyCrop_Contain","horizontal-cover"===D&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===D&&"reactEasyCrop_Cover_Vertical",P)},s,{src:i,ref:this.imageRef,style:(0,a.__assign)((0,a.__assign)({},C),{transform:l||"translate(".concat(d,"px, ").concat(u,"px) rotate(").concat(h,"deg) scale(").concat(m,")")}),onLoad:this.onMediaLoad})):n&&r.createElement("video",(0,a.__assign)({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:f("reactEasyCrop_Video","contain"===D&&"reactEasyCrop_Contain","horizontal-cover"===D&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===D&&"reactEasyCrop_Cover_Vertical",P)},s,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:(0,a.__assign)((0,a.__assign)({},C),{transform:l||"translate(".concat(d,"px, ").concat(u,"px) rotate(").concat(h,"deg) scale(").concat(m,")")}),controls:!1}),(Array.isArray(n)?n:[{src:n}]).map(function(e){return r.createElement("source",(0,a.__assign)({key:e.src},e))})),this.state.cropSize&&r.createElement("div",(0,a.__assign)({ref:this.cropperRef,style:(0,a.__assign)((0,a.__assign)({},b),{width:x?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:x?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:f("reactEasyCrop_CropArea","round"===v&&"reactEasyCrop_CropAreaRound",g&&"reactEasyCrop_CropAreaGrid",R)},c)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},t.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t}(r.Component),y=e.i(88653);async function w(e,t,r=256){let o=new Image;o.crossOrigin="anonymous",await new Promise((t,r)=>{o.onload=()=>t(),o.onerror=r,o.src=e});let i=document.createElement("canvas");return i.width=r,i.height=r,i.getContext("2d").drawImage(o,t.x,t.y,t.width,t.height,0,0,r,r),new Promise((e,t)=>{i.toBlob(r=>r?e(r):t(Error("Canvas toBlob failed")),"image/png",1)})}function b({open:e,imageSrc:o,onClose:n,onCropComplete:a}){let[s,c]=(0,r.useState)({x:0,y:0}),[l,p]=(0,r.useState)(1),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1),v=(0,r.useCallback)((e,t)=>{u(t)},[]),g=(0,r.useCallback)(async()=>{if(d){m(!0);try{let e=await w(o,d,256);a(e)}catch{}m(!1)}},[d,o,a]);return(0,t.jsx)(y.AnimatePresence,{children:e&&(0,t.jsx)(i.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[500] flex items-center justify-center",style:{background:"rgba(0,0,0,0.7)",backdropFilter:"blur(6px)"},onClick:()=>!h&&n(),children:(0,t.jsxs)(i.motion.div,{initial:{opacity:0,scale:.9,y:16},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:16},transition:{type:"spring",damping:25,stiffness:300},className:"mx-4 w-full max-w-sm rounded-2xl overflow-hidden",style:{background:"var(--bg-card)",boxShadow:"0 16px 48px rgba(0,0,0,0.5)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"px-5 py-4 flex items-center justify-between",style:{borderBottom:"1px solid var(--border-subtle)"},children:[(0,t.jsx)("h3",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Crop Photo"}),(0,t.jsx)("button",{onClick:n,disabled:h,className:"p-1.5 -m-1 rounded-full cursor-pointer transition-colors",style:{color:"var(--text-muted)"},children:(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,t.jsx)("path",{d:"M12 4L4 12M4 4l8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]}),(0,t.jsx)("div",{className:"relative w-full",style:{height:320},children:(0,t.jsx)(x,{image:o,crop:s,zoom:l,aspect:1,cropShape:"round",showGrid:!1,onCropChange:c,onZoomChange:p,onCropComplete:v})}),(0,t.jsxs)("div",{className:"px-5 py-3 flex items-center gap-3",style:{borderTop:"1px solid var(--border-subtle)"},children:[(0,t.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--text-muted)",flexShrink:0},children:[(0,t.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,t.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),(0,t.jsx)("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]}),(0,t.jsx)("input",{type:"range",min:1,max:3,step:.05,value:l,onChange:e=>p(Number(e.target.value)),className:"flex-1 accent-[var(--primary)]",style:{height:4}}),(0,t.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--text-muted)",flexShrink:0},children:[(0,t.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,t.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),(0,t.jsx)("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),(0,t.jsx)("line",{x1:"11",y1:"8",x2:"11",y2:"14"})]})]}),(0,t.jsxs)("div",{className:"px-5 py-4 flex gap-3",style:{borderTop:"1px solid var(--border-subtle)"},children:[(0,t.jsx)("button",{onClick:n,disabled:h,className:"flex-1 py-2.5 rounded-xl text-sm font-medium cursor-pointer transition-all duration-150",style:{color:"var(--text-muted)",border:"1px solid var(--border-subtle)"},children:"Cancel"}),(0,t.jsx)("button",{onClick:g,disabled:h,className:"flex-1 py-2.5 rounded-xl text-sm font-semibold text-white cursor-pointer transition-all duration-200 hover:brightness-110 active:scale-[0.98] disabled:opacity-50",style:{background:"var(--primary)"},children:h?"Processing...":"Save"})]})]})})})}function C(){let e=(0,o.useRouter)(),a=(0,n.createClient)(),[s,c]=(0,r.useState)(null),[l,p]=(0,r.useState)(""),[d,u]=(0,r.useState)(!0),[h,m]=(0,r.useState)(!1),[v,g]=(0,r.useState)(!1),[f,x]=(0,r.useState)(null),[y,w]=(0,r.useState)(null),[C,S]=(0,r.useState)(!1),z=(0,r.useRef)(null),[R,P]=(0,r.useState)("dark"),[D,j]=(0,r.useState)(!0),k=(0,r.useRef)(null),[_,M]=(0,r.useState)(null),[E,N]=(0,r.useState)(!1),[A,T]=(0,r.useState)(!1),[W,L]=(0,r.useState)(null);(0,r.useEffect)(()=>{!async function(){let{data:{user:t}}=await a.auth.getUser();if(!t)return e.replace("/login");let{data:r}=await a.from("profiles").select("*").eq("id",t.id).single();r&&(c(r),p(r.display_name),P(r.theme||"dark"),j(r.arguments_public_by_default),M(r.avatar_url||null)),u(!1)}()},[]);let O=(0,r.useCallback)(e=>{if(z.current&&clearTimeout(z.current),!e.trim()||e.trim()===s?.display_name){w(null),S(!1);return}S(!0),z.current=setTimeout(async()=>{let{data:t}=await a.from("profiles").select("id").eq("display_name",e.trim()).neq("id",s?.id??"").limit(1);w(!t||0===t.length),S(!1)},500)},[s,a]),F=async e=>{if(s){N(!0),x(null);try{let t=`${s.id}/avatar.png`,{error:r}=await a.storage.from("avatars").upload(t,e,{upsert:!0,contentType:"image/png"});if(r){r.message?.includes("bucket")||r.message?.includes("not found")?x("Storage bucket 'avatars' not found. Run the avatar SQL migration in your Supabase dashboard."):r.message?.includes("Payload too large")?x("Image too large. Please use an image under 5 MB."):x(`Upload failed: ${r.message}`),N(!1);return}let{data:o}=a.storage.from("avatars").getPublicUrl(t),i=o.publicUrl+"?t="+Date.now();M(i),await a.from("profiles").update({avatar_url:i}).eq("id",s.id)}catch{x("Failed to upload avatar. Check your network connection.")}N(!1)}},I=(0,r.useCallback)(async e=>{T(!1),L(null),await F(e)},[s]),U=async()=>{if(!s||h)return;let e=l.trim()||s.display_name;if(e!==s.display_name&&!1===y)return void x("That display name is already taken.");m(!0),g(!1),x(null);let{error:t}=await a.from("profiles").update({display_name:e,arguments_public_by_default:D,theme:R}).eq("id",s.id);if(t){x("Failed to save. Please try again."),m(!1);return}c({...s,display_name:e,arguments_public_by_default:D,theme:R}),"light"===R?document.documentElement.classList.add("light"):document.documentElement.classList.remove("light"),localStorage.setItem("ace_theme",R),m(!1),g(!0),w(null),setTimeout(()=>g(!1),2e3)},Z=async()=>{await a.auth.signOut(),document.documentElement.classList.remove("light"),localStorage.removeItem("ace_theme"),e.push("/"),e.refresh()};return d?(0,t.jsx)("div",{className:"flex items-center justify-center h-dvh",style:{background:"var(--bg)"},children:(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"var(--primary)",borderTopColor:"transparent"}})}):s?(0,t.jsxs)("div",{className:"flex flex-col h-dvh",style:{background:"var(--bg)"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-5 py-3.5 shrink-0",style:{borderBottom:"1px solid var(--border-subtle)"},children:[(0,t.jsxs)("button",{onClick:()=>e.push("/profile"),className:"text-sm px-3.5 py-1.5 rounded-full border cursor-pointer transition-all duration-150",style:{borderColor:"var(--chip-border)",color:"var(--text-secondary)"},children:[(0,t.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"inline mr-1 -mt-0.5",children:(0,t.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),(0,t.jsx)("h1",{className:"text-sm font-medium flex-1",style:{color:"var(--text-primary)"},children:"Settings"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsxs)(i.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"px-6 py-6 flex flex-col gap-6 max-w-lg mx-auto",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsxs)("button",{onClick:()=>k.current?.click(),className:"relative w-20 h-20 rounded-full overflow-hidden cursor-pointer group transition-all duration-200",style:{background:"var(--bg-card)",border:"2px solid var(--border-subtle)"},children:[_?(0,t.jsx)("img",{src:_,alt:"Avatar",className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-2xl font-semibold",style:{color:"var(--primary)"},children:(l??"?").charAt(0).toUpperCase()}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("circle",{cx:"12",cy:"13",r:"4"})]})}),E&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"white",borderTopColor:"transparent"}})})]}),(0,t.jsx)("input",{ref:k,type:"file",accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files?.[0];if(!t||!s)return;if(e.target.value="",!t.type.startsWith("image/"))return void x("Please select an image file (JPG, PNG, etc.).");if(t.size>5242880)return void x("Image must be under 5 MB.");let r=new FileReader;r.onload=()=>{L(r.result),T(!0)},r.readAsDataURL(t)}}),(0,t.jsx)("p",{className:"text-xs cursor-pointer hover:underline",style:{color:"var(--text-muted)"},onClick:()=>k.current?.click(),children:_?"Change photo":"Add profile photo"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium tracking-wider uppercase block mb-2",style:{color:"var(--text-muted)"},children:"Display Name"}),(0,t.jsx)("input",{type:"text",value:l,onChange:e=>{var t;p(t=e.target.value),O(t)},className:"w-full rounded-xl px-4 py-3 text-sm border outline-none placeholder:text-[var(--text-muted)] transition-colors duration-150",style:{background:"var(--bg-light)",borderColor:!1===y?"var(--primary)":!0===y?"var(--take-that)":"var(--border-subtle)",color:"var(--text-primary)"}}),C&&(0,t.jsx)("p",{className:"text-[11px] mt-1.5",style:{color:"var(--text-muted)"},children:"Checking availability..."}),!C&&!1===y&&(0,t.jsx)("p",{className:"text-[11px] mt-1.5",style:{color:"var(--primary)"},children:"This name is already taken."}),!C&&!0===y&&(0,t.jsx)("p",{className:"text-[11px] mt-1.5",style:{color:"var(--take-that)"},children:"Name is available."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium tracking-wider uppercase block mb-2",style:{color:"var(--text-muted)"},children:"Theme"}),(0,t.jsx)("div",{className:"flex gap-2",children:["dark","light"].map(e=>(0,t.jsx)("button",{onClick:()=>{P(e),"light"===e?document.documentElement.classList.add("light"):document.documentElement.classList.remove("light"),localStorage.setItem("ace_theme",e)},className:"flex-1 py-2.5 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer",style:{background:R===e?"var(--hover-overlay)":"var(--bg-light)",color:R===e?"var(--text-primary)":"var(--text-muted)",border:R===e?"1.5px solid var(--selection-border)":"1.5px solid transparent"},children:"dark"===e?"Dark":"Light"},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium tracking-wider uppercase block mb-2",style:{color:"var(--text-muted)"},children:"Default Argument Privacy"}),(0,t.jsx)("div",{className:"flex gap-2",children:[{value:!0,label:"Public"},{value:!1,label:"Private"}].map(e=>(0,t.jsx)("button",{onClick:()=>j(e.value),className:"flex-1 py-2.5 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer",style:{background:D===e.value?"var(--hover-overlay)":"var(--bg-light)",color:D===e.value?"var(--text-primary)":"var(--text-muted)",border:D===e.value?"1.5px solid var(--selection-border)":"1.5px solid transparent"},children:e.label},String(e.value)))}),(0,t.jsx)("p",{className:"text-[11px] mt-1.5",style:{color:"var(--text-muted)"},children:"Public arguments can be shared and appear on your profile."})]}),f&&(0,t.jsx)("p",{className:"text-xs text-center",style:{color:"var(--primary)"},children:f}),(0,t.jsx)("button",{onClick:U,disabled:h||!1===y,className:"w-full py-3 rounded-xl text-white text-sm font-semibold tracking-wide transition-all duration-200 hover:brightness-110 active:scale-[0.98] cursor-pointer disabled:opacity-50",style:{background:"var(--primary)"},children:h?"Saving...":v?"Saved":"Save Changes"}),(0,t.jsx)("div",{className:"h-px",style:{background:"var(--border-subtle)"}}),(0,t.jsx)("button",{onClick:Z,className:"w-full py-3 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer hover:brightness-95",style:{color:"var(--primary)",border:"1px solid rgba(255,56,92,0.2)"},children:"Sign Out"})]})}),W&&(0,t.jsx)(b,{open:A,imageSrc:W,onClose:()=>{T(!1),L(null)},onCropComplete:I})]}):null}e.s(["default",()=>C],32545)}]);