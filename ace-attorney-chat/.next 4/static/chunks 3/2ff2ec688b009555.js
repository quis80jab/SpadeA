(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88653,e=>{"use strict";e.i(47167);var t=e.i(43476),n=e.i(71645),a=e.i(31178),s=e.i(47414),r=e.i(74008),i=e.i(21476),o=e.i(72846),l=n,c=e.i(37806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,n=(0,o.isHTMLElement)(e)&&e.offsetWidth||0,a=(0,o.isHTMLElement)(e)&&e.offsetHeight||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=n-s.width-s.left,s.bottom=a-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:a,anchorX:s,anchorY:r,root:i,pop:o}){let h=(0,l.useId)(),m=(0,l.useRef)(null),p=(0,l.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:g}=(0,l.useContext)(c.MotionConfigContext),f=function(...e){return n.useCallback(function(...e){return t=>{let n=!1,a=e.map(e=>{let a=d(e,t);return n||"function"!=typeof a||(n=!0),a});if(n)return()=>{for(let t=0;t<a.length;t++){let n=a[t];"function"==typeof n?n():d(e[t],null)}}}}(...e),e)}(m,e.props?.ref??e?.ref);return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:l,right:c,bottom:d}=p.current;if(a||!1===o||!m.current||!e||!t)return;let u="left"===s?`left: ${l}`:`right: ${c}`,f="bottom"===r?`bottom: ${d}`:`top: ${n}`;m.current.dataset.motionPopId=h;let x=document.createElement("style");g&&(x.nonce=g);let y=i??document.head;return y.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            ${f}px !important;
          }
        `),()=>{y.contains(x)&&y.removeChild(x)}},[a]),(0,t.jsx)(u,{isPresent:a,childRef:m,sizeRef:p,pop:o,children:!1===o?e:l.cloneElement(e,{ref:f})})}let m=({children:e,initial:a,isPresent:r,onExitComplete:o,custom:l,presenceAffectsLayout:c,mode:d,anchorX:u,anchorY:m,root:g})=>{let f=(0,s.useConstant)(p),x=(0,n.useId)(),y=!0,v=(0,n.useMemo)(()=>(y=!1,{id:x,initial:a,isPresent:r,custom:l,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;o&&o()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[r,f,o]);return c&&y&&(v={...v}),(0,n.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[r]),n.useEffect(()=>{r||f.size||!o||o()},[r]),e=(0,t.jsx)(h,{pop:"popLayout"===d,isPresent:r,anchorX:u,anchorY:m,root:g,children:e}),(0,t.jsx)(i.PresenceContext.Provider,{value:v,children:e})};function p(){return new Map}var g=e.i(64978);let f=e=>e.key||"";function x(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}let y=({children:e,custom:i,initial:o=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:h="left",anchorY:p="top",root:y})=>{let[v,b]=(0,g.usePresence)(u),C=(0,n.useMemo)(()=>x(e),[e]),j=u&&!v?[]:C.map(f),S=(0,n.useRef)(!0),w=(0,n.useRef)(C),P=(0,s.useConstant)(()=>new Map),_=(0,n.useRef)(new Set),[N,k]=(0,n.useState)(C),[$,A]=(0,n.useState)(C);(0,r.useIsomorphicLayoutEffect)(()=>{S.current=!1,w.current=C;for(let e=0;e<$.length;e++){let t=f($[e]);j.includes(t)?(P.delete(t),_.current.delete(t)):!0!==P.get(t)&&P.set(t,!1)}},[$,j.length,j.join("-")]);let E=[];if(C!==N){let e=[...C];for(let t=0;t<$.length;t++){let n=$[t],a=f(n);j.includes(a)||(e.splice(t,0,n),E.push(n))}return"wait"===d&&E.length&&(e=E),A(x(e)),k(C),null}let{forceRender:M}=(0,n.useContext)(a.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:$.map(e=>{let n=f(e),a=(!u||!!v)&&(C===$||j.includes(n));return(0,t.jsx)(m,{isPresent:a,initial:(!S.current||!!o)&&void 0,custom:i,presenceAffectsLayout:c,mode:d,root:y,onExitComplete:a?void 0:()=>{if(_.current.has(n)||(_.current.add(n),!P.has(n)))return;P.set(n,!0);let e=!0;P.forEach(t=>{t||(e=!1)}),e&&(M?.(),A(w.current),u&&b?.(),l&&l())},anchorX:h,anchorY:p,children:e},n)})})};e.s(["AnimatePresence",()=>y],88653)},68834,e=>{"use strict";var t=e.i(71645);let n=e=>{let t,n=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,r={setState:a,getState:s,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(a,s,r);return r},a=e=>{let a=e?n(e):n,s=e=>(function(e,n=e=>e){let a=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>n(e.getState()),[e,n]),t.default.useCallback(()=>n(e.getInitialState()),[e,n]));return t.default.useDebugValue(a),a})(a,e);return Object.assign(s,a),s},s=e=>e?a(e):a;e.s(["create",()=>s],68834)},399,85459,e=>{"use strict";var t=e.i(68834);function n(e){return`# ${e.title}

## Charge
${e.charge}

## Context
${e.context}

## The Real Question
${e.philosophical_tension}
`}function a(e,t){let n=e.map(e=>`| ${e.id} | ${e.claim} | ${e.evidence} | ${e.status} |`).join("\n"),a=e.filter(e=>"refuted"===e.status).map(e=>`- ${e.id}: ${e.claim}`).join("\n");return`# ${"prosecution"===t?"Prosecution Arguments":"Defense Arguments"}

| ID | Claim | Evidence | Status |
|----|-------|----------|--------|
${n}

## Concessions
${a||"- None"}
`}function s(e){let t=e.assumptions.map(e=>`| ${e.side} | ${e.assumption} | ${e.state} |`).join("\n"),n=e.fallacies.map(e=>`| ${e.side} | ${e.type} | ${e.context} | ${e.exchangeNumber} |`).join("\n");return`# Argument Analysis

## Key Assumptions
| Side | Assumption | State |
|------|-----------|-------|
${t||"| - | - | - |"}

## Fallacies Identified
| Side | Type | Context | Exchange # |
|------|------|---------|-----------|
${n||"| - | - | - | - |"}

## Score
- Attorney: ${e.attorneyScore.validPoints} valid points, ${e.attorneyScore.fallacies} fallacies, ${e.attorneyScore.challenged} challenged
- Defendant: ${e.defendantScore.validPoints} valid points, ${e.defendantScore.fallacies} fallacies, ${e.defendantScore.challenged} challenged
`}function r(e){if(0===e.length)return"# Conversation Log\n\n(No exchanges yet)\n";let t="# Conversation Log\n\n",n=0,a="";for(let s of e){"attorney"===s.sender&&"attorney"!==a&&(n++,t+=`## Exchange ${n}
`);let e="attorney"===s.sender?"Attorney":"User";t+=`**${e}:** ${s.text}

`,a=s.sender}return t}function i(e,t,n){let a=[...e],s=[...t];for(let e of n){let t=a.findIndex(t=>t.id===e.id);if(t>=0){a[t]={...a[t],status:e.new_status};continue}let n=s.findIndex(t=>t.id===e.id);n>=0&&(s[n]={...s[n],status:e.new_status})}return{attorneyPoints:a,defendantPoints:s}}function o(e,t,n){let a=[...e.fallacies,...t.map(e=>({...e,exchangeNumber:n}))],s=a.filter(e=>"attorney"===e.side).length,r=a.filter(e=>"defendant"===e.side).length;return{...e,fallacies:a,attorneyScore:{...e.attorneyScore,fallacies:s},defendantScore:{...e.defendantScore,fallacies:r}}}function l(e,t){let n=[...e.assumptions];for(let e of t){let t=n.findIndex(t=>t.side===e.side&&t.assumption===e.assumption);t>=0?n[t]={...n[t],state:e.new_state}:n.push({side:e.side,assumption:e.assumption,state:e.new_state})}return{...e,assumptions:n}}function c(e,t,n){return{...e,attorneyScore:{...e.attorneyScore,validPoints:t.filter(e=>"unchallenged"===e.status||"proven"===e.status).length,challenged:t.filter(e=>"challenged"===e.status).length},defendantScore:{...e.defendantScore,validPoints:n.filter(e=>"unchallenged"===e.status||"proven"===e.status).length,challenged:n.filter(e=>"challenged"===e.status).length}}}function d(){return{assumptions:[],fallacies:[],attorneyScore:{validPoints:0,fallacies:0,challenged:0},defendantScore:{validPoints:0,fallacies:0,challenged:0}}}e.s(["applyAssumptions",()=>l,"applyFallacies",()=>o,"applyPointUpdates",()=>i,"createInitialAnalysis",()=>d,"generateAnalysisMd",()=>s,"generateConversationMd",()=>r,"generateIssueMd",()=>n,"generatePointsMd",()=>a,"recalcScores",()=>c],85459);let u="ace_attorney_state",h={attorneyHP:100,defendantHP:100,maxHP:100},m={phase:"splash",caseData:null,attorneyPoints:[],defendantPoints:[],analysis:d(),health:{...h},messages:[],suggestions:[],evidenceCards:[],exchangeCount:0,isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1,outcome:null},p=(0,t.create)((e,t)=>({...m,initCase:t=>e({caseData:t,attorneyPoints:t.attorney_points,defendantPoints:t.defendant_points,analysis:{...d(),attorneyScore:{validPoints:t.attorney_points.length,fallacies:0,challenged:0},defendantScore:{validPoints:t.defendant_points.length,fallacies:0,challenged:0}},health:{...h},messages:[],suggestions:[],evidenceCards:[],exchangeCount:0,outcome:null,phase:"intro"}),setPhase:t=>e({phase:t}),reset:()=>e({...m}),addMessage:(t,n,a)=>{let s={id:`msg_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,text:t,sender:n,timestamp:Date.now(),intensity:a};e(e=>({messages:[...e.messages,s]}))},setSuggestions:t=>e({suggestions:t}),incrementExchange:()=>e(e=>({exchangeCount:e.exchangeCount+1})),updatePoints:t=>e(e=>{let n=i(e.attorneyPoints,e.defendantPoints,t),a=c(e.analysis,n.attorneyPoints,n.defendantPoints);return{...n,analysis:a}}),updateAnalysis:(t,n)=>e(e=>{let a=e.analysis;return t.length>0&&(a=o(a,t,e.exchangeCount)),n.length>0&&(a=l(a,n)),{analysis:a}}),setGeneratingCase:t=>e({isGeneratingCase:t}),setAttorneyThinking:t=>e({isAttorneyThinking:t}),setSuggestionsLoading:t=>e({isSuggestionsLoading:t}),setOutcome:t=>e({outcome:t,phase:"ended"}),applyDamage:(n,a)=>{let s=t(),r=Math.max(0,s.health.attorneyHP-n),i=Math.max(0,s.health.defendantHP-a);return(e({health:{...s.health,attorneyHP:r,defendantHP:i}}),r<=0)?"attorney_ko":i<=0?"defendant_ko":"none"},applyDamageToOne:(n,a)=>{let s=t();if("attorney"===n){let t=Math.max(0,s.health.attorneyHP-a);if(e({health:{...s.health,attorneyHP:t}}),t<=0)return"attorney_ko"}else{let t=Math.max(0,s.health.defendantHP-a);if(e({health:{...s.health,defendantHP:t}}),t<=0)return"defendant_ko"}return"none"},evidenceCards:[],selectEvidenceCards:n=>{let a=t();a.caseData&&e({evidenceCards:a.caseData.defendant_points.filter(e=>n.includes(e.id)).map(e=>({id:e.id,claim:e.claim,evidence:e.evidence,used:!1}))})},useEvidenceCard:t=>{e(e=>({evidenceCards:e.evidenceCards.map(e=>e.id===t?{...e,used:!0}:e)}))},persist:()=>{try{let e=t(),n={phase:e.phase,caseData:e.caseData,attorneyPoints:e.attorneyPoints,defendantPoints:e.defendantPoints,analysis:e.analysis,health:e.health,messages:e.messages,suggestions:e.suggestions,evidenceCards:e.evidenceCards,exchangeCount:e.exchangeCount,isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1,outcome:e.outcome};localStorage.setItem(u,JSON.stringify(n))}catch{}},hydrate:()=>{try{let t=localStorage.getItem(u);if(t){let n=JSON.parse(t);e({...n,health:n.health??{...h},isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1})}}catch{}}}));e.s(["useArgumentStore",0,p],399)},73319,e=>{"use strict";var t=e.i(68834),n=e.i(11795);let a="ace_attorney_history";function s(e){return{id:e.id,user_id:e.user_id,caseData:e.case_data,messages:e.messages,outcome:e.outcome,finalHealth:e.final_health,exchangeCount:e.exchange_count,score:e.score??0,starred:e.starred,is_public:e.is_public,createdAt:new Date(e.created_at).getTime()}}let r=(0,t.create)((e,t)=>({arguments:[],userId:null,setUserId:t=>e({userId:t}),saveArgument:async a=>{let{userId:s}=t(),r=(0,n.createClient)();if(!s)return i(a,e,t);{let{data:n,error:o}=await r.from("arguments").insert({user_id:s,case_data:a.caseData,messages:a.messages,outcome:a.outcome,final_health:a.finalHealth,exchange_count:a.exchangeCount,score:a.score,is_public:a.is_public??!0}).select("id").single();if(o)return console.error("Failed to save argument to Supabase:",o.message),i(a,e,t);let l=n.id,c={...a,id:l,user_id:s,starred:!1,is_public:a.is_public??!0,createdAt:Date.now()};return e(e=>({arguments:[c,...e.arguments]})),l}},toggleStar:async a=>{let{userId:s}=t(),r=t().arguments.find(e=>e.id===a);if(r)if(e(e=>({arguments:e.arguments.map(e=>e.id===a?{...e,starred:!e.starred}:e)})),s){let e=(0,n.createClient)();await e.from("arguments").update({starred:!r.starred}).eq("id",a)}else o(t)},deleteArgument:async a=>{let{userId:s}=t();if(e(e=>({arguments:e.arguments.filter(e=>e.id!==a)})),s){let e=(0,n.createClient)();await e.from("arguments").delete().eq("id",a)}else o(t)},getArgument:e=>t().arguments.find(t=>t.id===e),hydrate:async()=>{let{userId:r}=t();if(r){let t=(0,n.createClient)(),{data:a,error:i}=await t.from("arguments").select("*").eq("user_id",r).order("created_at",{ascending:!1});if(!i&&a)return void e({arguments:a.map(s)})}try{let t=localStorage.getItem(a);if(t){let n=JSON.parse(t),a=(Array.isArray(n)?n:[]).map(e=>({...e,score:e.score??0,is_public:e.is_public??!0}));e({arguments:a})}}catch{}}}));function i(e,t,n){let a=`arg_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,s={...e,id:a,createdAt:Date.now(),starred:!1,is_public:e.is_public??!0};return t(e=>({arguments:[s,...e.arguments]})),setTimeout(()=>o(n),0),a}function o(e){try{let{arguments:t}=e();localStorage.setItem(a,JSON.stringify(t))}catch{}}e.s(["useHistoryStore",0,r])},98089,e=>{"use strict";var t=e.i(85459),n=e.i(399);function a(){let e=n.useArgumentStore.getState(),a=[];return e.caseData&&(a.push("=== issue.md ==="),a.push((0,t.generateIssueMd)(e.caseData))),e.attorneyPoints.length>0&&(a.push("=== attorney_points.md ==="),a.push((0,t.generatePointsMd)(e.attorneyPoints,"prosecution"))),e.defendantPoints.length>0&&(a.push("=== defendant_points.md ==="),a.push((0,t.generatePointsMd)(e.defendantPoints,"defense"))),e.messages.length>0&&(a.push("=== conversation.md ==="),a.push((0,t.generateConversationMd)(e.messages))),a.push("=== analysis.md ==="),a.push((0,t.generateAnalysisMd)(e.analysis)),a.join("\n\n")}async function s(e){let t=await fetch("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({error:"Request failed"}))).error||`API error (${t.status})`);return(await t.json()).result}async function r(){return s({agent:"case_creator"})}async function i(e,t=!1){return s({agent:"lawyer",context:a(),userMessage:e,surrender:t})}async function o(e){return s({agent:"defendant",context:a(),exchangeCount:e})}e.s(["callCaseCreator",()=>r,"callDefendant",()=>o,"callLawyer",()=>i])},31713,e=>{"use strict";var t=e.i(43476),n=e.i(71645),a=e.i(18566),s=e.i(46932),r=e.i(399),i=e.i(73319),o=e.i(98089);async function l(){let e=JSON.parse(await (0,o.callCaseCreator)());if(!e.title||!e.charge||!e.context)throw Error("Invalid case data: missing required fields");if(!e.attorney_points||!e.defendant_points||0===e.attorney_points.length||0===e.defendant_points.length)throw Error("Invalid case data: missing argument points");if(!e.opening_statement)throw Error("Invalid case data: missing opening statement");return e.attorney_points=e.attorney_points.map(e=>({...e,status:e.status||"unchallenged"})),e.defendant_points=e.defendant_points.map(e=>({...e,status:e.status||"unchallenged"})),e}var c=e.i(88653);let d={won:{label:"Won",color:"#34D399",bg:"rgba(52,211,153,0.12)"},lost:{label:"Lost",color:"#F87171",bg:"rgba(248,113,113,0.12)"},"in-progress":{label:"In Progress",color:"#E0B97A",bg:"rgba(224,185,122,0.12)"}};function u({argument:e,onView:n,onToggleStar:a,index:r}){let i=d[e.outcome]??d["in-progress"];return(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.04*r,duration:.25},className:"rounded-2xl p-5 cursor-pointer transition-all duration-150 hover:bg-white/[0.03] active:scale-[0.99]",style:{background:"var(--bg-light)",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"},onClick:()=>n(e.id),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white truncate",children:e.caseData.title}),(0,t.jsx)("p",{className:"text-xs mt-1 truncate",style:{color:"var(--text-muted)"},children:e.caseData.charge})]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e.id)},className:"shrink-0 cursor-pointer p-1.5 -m-1 rounded-full hover:bg-white/5 transition-colors",title:e.starred?"Unstar":"Star",children:e.starred?(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#E0B97A",children:(0,t.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#717171",strokeWidth:"1.5",children:(0,t.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-3",children:[(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wide px-2.5 py-1 rounded-full",style:{color:i.color,background:i.bg},children:i.label}),(0,t.jsxs)("span",{className:"text-[11px]",style:{color:"var(--text-muted)"},children:[e.exchangeCount," exchanges"]}),(0,t.jsx)("span",{className:"text-[11px]",style:{color:"var(--text-muted)"},children:new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})}function h({onViewArgument:e}){let[a,r]=(0,n.useState)("recent"),{arguments:o,toggleStar:l,hydrate:d}=(0,i.useHistoryStore)();(0,n.useEffect)(()=>{d()},[d]);let h="starred"===a?o.filter(e=>e.starred):o;return(0,t.jsxs)("div",{className:"flex flex-col flex-1 min-h-0",children:[(0,t.jsx)("div",{className:"flex gap-6 px-8 mb-4",style:{borderBottom:"1px solid var(--border-subtle)"},children:["recent","starred"].map(e=>(0,t.jsxs)("button",{onClick:()=>r(e),className:"relative pb-2.5 text-xs font-medium tracking-wider uppercase transition-colors duration-150 cursor-pointer",style:{color:a===e?"var(--text-primary)":"var(--text-muted)"},children:["recent"===e?"Recent":"Starred",a===e&&(0,t.jsx)(s.motion.div,{layoutId:"tab-underline",className:"absolute bottom-0 left-0 right-0 h-[2px] rounded-full",style:{background:"var(--text-primary)"},transition:{duration:.2}})]},e))}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto px-6 pb-4",children:(0,t.jsx)(c.AnimatePresence,{mode:"popLayout",children:0===h.length?(0,t.jsxs)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-16 gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",style:{color:"var(--text-muted)"},children:(0,t.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:(0,t.jsx)("path",{d:"M3 6h18M3 12h18M3 18h18",strokeLinecap:"round"})})}),(0,t.jsx)("p",{className:"text-sm text-center",style:{color:"var(--text-muted)"},children:"starred"===a?"No starred arguments yet.":"No arguments yet. Enter the courtroom to begin."})]}):(0,t.jsx)("div",{className:"flex flex-col gap-3",children:h.map((n,a)=>(0,t.jsx)(u,{argument:n,onView:e,onToggleStar:l,index:a},n.id))})})})]})}var m=e.i(11795);function p(){let e=(0,a.useRouter)(),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[p,g]=(0,n.useState)(null),[f,x]=(0,n.useState)(null),[y,v]=(0,n.useState)(null),{initCase:b,setGeneratingCase:C,reset:j}=(0,r.useArgumentStore)(),{setUserId:S,hydrate:w}=(0,i.useHistoryStore)();(0,n.useEffect)(()=>{!async function(){let e=(0,m.createClient)(),{data:{user:t}}=await e.auth.getUser();if(t){g(t.id),S(t.id);let{data:n}=await e.from("profiles").select("display_name, avatar_url").eq("id",t.id).single();n&&(x(n.display_name),v(n.avatar_url))}await w()}()},[]);let P=(0,n.useCallback)(async()=>{if(!o){c(!0),u(null),C(!0),j();try{let t=await l();b(t),C(!1),e.push("/court-intro")}catch(e){C(!1),c(!1),u(e instanceof Error?e.message:"Failed to generate case")}}},[o,b,C,j,e]),_=(0,n.useCallback)(t=>{e.push(`/argument/${t}`)},[e]);return(0,t.jsxs)("div",{className:"flex flex-col h-dvh select-none",style:{background:"var(--bg)"},children:[(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:-12},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"text-center pt-10 pb-4 px-8 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6 -mx-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("button",{onClick:()=>e.push("/leaderboard"),className:"text-xs px-3 py-1.5 rounded-full border cursor-pointer transition-all duration-150",style:{borderColor:"var(--chip-border)",color:"var(--text-secondary)",background:"transparent"},onMouseEnter:e=>e.currentTarget.style.background="var(--hover-overlay)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"Leaderboard"})}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:p?(0,t.jsxs)("button",{onClick:()=>e.push("/profile"),className:"flex items-center gap-2 text-xs px-3 py-1.5 rounded-full border cursor-pointer transition-all duration-150",style:{borderColor:"var(--chip-border)",color:"var(--text-secondary)",background:"transparent"},onMouseEnter:e=>e.currentTarget.style.background="var(--hover-overlay)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,t.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-semibold overflow-hidden",style:{background:"var(--bg-card)",color:"var(--primary)"},children:y?(0,t.jsx)("img",{src:y,alt:"",className:"w-full h-full object-cover"}):(f??"?").charAt(0).toUpperCase()}),f??"Profile"]}):(0,t.jsx)("button",{onClick:()=>e.push("/login"),className:"text-xs px-3.5 py-1.5 rounded-full cursor-pointer transition-all duration-150 font-medium",style:{background:"var(--primary)",color:"white"},children:"Sign In"})})]}),(0,t.jsx)("p",{className:"text-[10px] tracking-[0.5em] font-medium mb-1",style:{color:"var(--accent)"},children:"ACE ATTORNEY"}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-semibold tracking-tight",style:{color:"var(--text-primary)"},children:"AI Courtroom"}),(0,t.jsx)("div",{className:"w-10 h-[2px] mx-auto mt-3 mb-3 rounded-full",style:{background:"var(--primary)"}}),(0,t.jsx)("p",{className:"text-sm leading-relaxed mb-6",style:{color:"var(--text-muted)"},children:"Where absurdity meets philosophy and justice is debatable"}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 w-full max-w-sm mx-auto",children:[o?(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 py-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"var(--primary)",borderTopColor:"transparent"}}),(0,t.jsx)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Preparing the case..."})]}):(0,t.jsx)("button",{onClick:P,className:"w-full py-3.5 px-8 rounded-full text-white text-sm font-semibold tracking-widest transition-all duration-200 hover:brightness-110 active:scale-[0.98] cursor-pointer",style:{background:"var(--primary)",boxShadow:"0 4px 20px rgba(255, 56, 92, 0.3)"},children:"ENTER THE COURTROOM"}),d&&(0,t.jsx)("p",{className:"text-xs text-center mt-1",style:{color:"var(--primary)"},children:d})]})]}),(0,t.jsx)("div",{className:"px-8 py-2 shrink-0",children:(0,t.jsx)("div",{className:"h-px",style:{background:"var(--border-subtle)"}})}),(0,t.jsxs)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},className:"flex-1 min-h-0 flex flex-col",children:[(0,t.jsx)("h2",{className:"text-xs font-medium tracking-wider uppercase px-8 mb-3",style:{color:"var(--text-muted)"},children:"Past Arguments"}),(0,t.jsx)(h,{onViewArgument:_})]}),(0,t.jsx)("p",{className:"text-[10px] text-center py-3 shrink-0",style:{color:"var(--text-muted)"},children:"Powered by Claude AI"})]})}e.s(["default",()=>p],31713)}]);