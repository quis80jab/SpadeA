(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88653,e=>{"use strict";e.i(47167);var t=e.i(43476),n=e.i(71645),s=e.i(31178),a=e.i(47414),i=e.i(74008),r=e.i(21476),o=e.i(72846),l=n,d=e.i(37806);function c(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,n=(0,o.isHTMLElement)(e)&&e.offsetWidth||0,s=(0,o.isHTMLElement)(e)&&e.offsetHeight||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=n-a.width-a.left,a.bottom=s-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:s,anchorX:a,anchorY:i,root:r,pop:o}){let h=(0,l.useId)(),f=(0,l.useRef)(null),p=(0,l.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:m}=(0,l.useContext)(d.MotionConfigContext),g=function(...e){return n.useCallback(function(...e){return t=>{let n=!1,s=e.map(e=>{let s=c(e,t);return n||"function"!=typeof s||(n=!0),s});if(n)return()=>{for(let t=0;t<s.length;t++){let n=s[t];"function"==typeof n?n():c(e[t],null)}}}}(...e),e)}(f,e.props?.ref??e?.ref);return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:l,right:d,bottom:c}=p.current;if(s||!1===o||!f.current||!e||!t)return;let u="left"===a?`left: ${l}`:`right: ${d}`,g="bottom"===i?`bottom: ${c}`:`top: ${n}`;f.current.dataset.motionPopId=h;let x=document.createElement("style");m&&(x.nonce=m);let y=r??document.head;return y.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            ${g}px !important;
          }
        `),()=>{y.contains(x)&&y.removeChild(x)}},[s]),(0,t.jsx)(u,{isPresent:s,childRef:f,sizeRef:p,pop:o,children:!1===o?e:l.cloneElement(e,{ref:g})})}let f=({children:e,initial:s,isPresent:i,onExitComplete:o,custom:l,presenceAffectsLayout:d,mode:c,anchorX:u,anchorY:f,root:m})=>{let g=(0,a.useConstant)(p),x=(0,n.useId)(),y=!0,v=(0,n.useMemo)(()=>(y=!1,{id:x,initial:s,isPresent:i,custom:l,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;o&&o()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[i,g,o]);return d&&y&&(v={...v}),(0,n.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[i]),n.useEffect(()=>{i||g.size||!o||o()},[i]),e=(0,t.jsx)(h,{pop:"popLayout"===c,isPresent:i,anchorX:u,anchorY:f,root:m,children:e}),(0,t.jsx)(r.PresenceContext.Provider,{value:v,children:e})};function p(){return new Map}var m=e.i(64978);let g=e=>e.key||"";function x(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}let y=({children:e,custom:r,initial:o=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:c="sync",propagate:u=!1,anchorX:h="left",anchorY:p="top",root:y})=>{let[v,b]=(0,m.usePresence)(u),P=(0,n.useMemo)(()=>x(e),[e]),S=u&&!v?[]:P.map(g),C=(0,n.useRef)(!0),$=(0,n.useRef)(P),j=(0,a.useConstant)(()=>new Map),k=(0,n.useRef)(new Set),[w,E]=(0,n.useState)(P),[A,N]=(0,n.useState)(P);(0,i.useIsomorphicLayoutEffect)(()=>{C.current=!1,$.current=P;for(let e=0;e<A.length;e++){let t=g(A[e]);S.includes(t)?(j.delete(t),k.current.delete(t)):!0!==j.get(t)&&j.set(t,!1)}},[A,S.length,S.join("-")]);let R=[];if(P!==w){let e=[...P];for(let t=0;t<A.length;t++){let n=A[t],s=g(n);S.includes(s)||(e.splice(t,0,n),R.push(n))}return"wait"===c&&R.length&&(e=R),N(x(e)),E(P),null}let{forceRender:M}=(0,n.useContext)(s.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:A.map(e=>{let n=g(e),s=(!u||!!v)&&(P===A||S.includes(n));return(0,t.jsx)(f,{isPresent:s,initial:(!C.current||!!o)&&void 0,custom:r,presenceAffectsLayout:d,mode:c,root:y,onExitComplete:s?void 0:()=>{if(k.current.has(n)||(k.current.add(n),!j.has(n)))return;j.set(n,!0);let e=!0;j.forEach(t=>{t||(e=!1)}),e&&(M?.(),N($.current),u&&b?.(),l&&l())},anchorX:h,anchorY:p,children:e},n)})})};e.s(["AnimatePresence",()=>y],88653)},68834,e=>{"use strict";var t=e.i(71645);let n=e=>{let t,n=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,i={setState:s,getState:a,getInitialState:()=>r,subscribe:e=>(n.add(e),()=>n.delete(e))},r=t=e(s,a,i);return i},s=e=>{let s=e?n(e):n,a=e=>(function(e,n=e=>e){let s=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>n(e.getState()),[e,n]),t.default.useCallback(()=>n(e.getInitialState()),[e,n]));return t.default.useDebugValue(s),s})(s,e);return Object.assign(a,s),a},a=e=>e?s(e):s;e.s(["create",()=>a],68834)},399,85459,e=>{"use strict";var t=e.i(68834);function n(e){return`# ${e.title}

## Charge
${e.charge}

## Context
${e.context}

## The Real Question
${e.philosophical_tension}
`}function s(e,t){let n=e.map(e=>`| ${e.id} | ${e.claim} | ${e.evidence} | ${e.status} |`).join("\n"),s=e.filter(e=>"refuted"===e.status).map(e=>`- ${e.id}: ${e.claim}`).join("\n");return`# ${"prosecution"===t?"Prosecution Arguments":"Defense Arguments"}

| ID | Claim | Evidence | Status |
|----|-------|----------|--------|
${n}

## Concessions
${s||"- None"}
`}function a(e){let t=e.assumptions.map(e=>`| ${e.side} | ${e.assumption} | ${e.state} |`).join("\n"),n=e.fallacies.map(e=>`| ${e.side} | ${e.type} | ${e.context} | ${e.exchangeNumber} |`).join("\n");return`# Argument Analysis

## Key Assumptions
| Side | Assumption | State |
|------|-----------|-------|
${t||"| - | - | - |"}

## Fallacies Identified
| Side | Type | Context | Exchange # |
|------|------|---------|-----------|
${n||"| - | - | - | - |"}

## Score
- Attorney: ${e.attorneyScore.validPoints} valid points, ${e.attorneyScore.fallacies} fallacies, ${e.attorneyScore.challenged} challenged
- Defendant: ${e.defendantScore.validPoints} valid points, ${e.defendantScore.fallacies} fallacies, ${e.defendantScore.challenged} challenged
`}function i(e){if(0===e.length)return"# Conversation Log\n\n(No exchanges yet)\n";let t="# Conversation Log\n\n",n=0,s="";for(let a of e){"attorney"===a.sender&&"attorney"!==s&&(n++,t+=`## Exchange ${n}
`);let e="attorney"===a.sender?"Attorney":"User";t+=`**${e}:** ${a.text}

`,s=a.sender}return t}function r(e,t,n){let s=[...e],a=[...t];for(let e of n){let t=s.findIndex(t=>t.id===e.id);if(t>=0){s[t]={...s[t],status:e.new_status};continue}let n=a.findIndex(t=>t.id===e.id);n>=0&&(a[n]={...a[n],status:e.new_status})}return{attorneyPoints:s,defendantPoints:a}}function o(e,t,n){let s=[...e.fallacies,...t.map(e=>({...e,exchangeNumber:n}))],a=s.filter(e=>"attorney"===e.side).length,i=s.filter(e=>"defendant"===e.side).length;return{...e,fallacies:s,attorneyScore:{...e.attorneyScore,fallacies:a},defendantScore:{...e.defendantScore,fallacies:i}}}function l(e,t){let n=[...e.assumptions];for(let e of t){let t=n.findIndex(t=>t.side===e.side&&t.assumption===e.assumption);t>=0?n[t]={...n[t],state:e.new_state}:n.push({side:e.side,assumption:e.assumption,state:e.new_state})}return{...e,assumptions:n}}function d(e,t,n){return{...e,attorneyScore:{...e.attorneyScore,validPoints:t.filter(e=>"unchallenged"===e.status||"proven"===e.status).length,challenged:t.filter(e=>"challenged"===e.status).length},defendantScore:{...e.defendantScore,validPoints:n.filter(e=>"unchallenged"===e.status||"proven"===e.status).length,challenged:n.filter(e=>"challenged"===e.status).length}}}function c(){return{assumptions:[],fallacies:[],attorneyScore:{validPoints:0,fallacies:0,challenged:0},defendantScore:{validPoints:0,fallacies:0,challenged:0}}}e.s(["applyAssumptions",()=>l,"applyFallacies",()=>o,"applyPointUpdates",()=>r,"createInitialAnalysis",()=>c,"generateAnalysisMd",()=>a,"generateConversationMd",()=>i,"generateIssueMd",()=>n,"generatePointsMd",()=>s,"recalcScores",()=>d],85459);let u="ace_attorney_state",h={attorneyHP:100,defendantHP:100,maxHP:100},f={phase:"splash",caseData:null,attorneyPoints:[],defendantPoints:[],analysis:c(),health:{...h},messages:[],suggestions:[],evidenceCards:[],exchangeCount:0,isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1,outcome:null},p=(0,t.create)((e,t)=>({...f,initCase:t=>e({caseData:t,attorneyPoints:t.attorney_points,defendantPoints:t.defendant_points,analysis:{...c(),attorneyScore:{validPoints:t.attorney_points.length,fallacies:0,challenged:0},defendantScore:{validPoints:t.defendant_points.length,fallacies:0,challenged:0}},health:{...h},messages:[],suggestions:[],evidenceCards:[],exchangeCount:0,outcome:null,phase:"intro"}),setPhase:t=>e({phase:t}),reset:()=>e({...f}),addMessage:(t,n,s)=>{let a={id:`msg_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,text:t,sender:n,timestamp:Date.now(),intensity:s};e(e=>({messages:[...e.messages,a]}))},setSuggestions:t=>e({suggestions:t}),incrementExchange:()=>e(e=>({exchangeCount:e.exchangeCount+1})),updatePoints:t=>e(e=>{let n=r(e.attorneyPoints,e.defendantPoints,t),s=d(e.analysis,n.attorneyPoints,n.defendantPoints);return{...n,analysis:s}}),updateAnalysis:(t,n)=>e(e=>{let s=e.analysis;return t.length>0&&(s=o(s,t,e.exchangeCount)),n.length>0&&(s=l(s,n)),{analysis:s}}),setGeneratingCase:t=>e({isGeneratingCase:t}),setAttorneyThinking:t=>e({isAttorneyThinking:t}),setSuggestionsLoading:t=>e({isSuggestionsLoading:t}),setOutcome:t=>e({outcome:t,phase:"ended"}),applyDamage:(n,s)=>{let a=t(),i=Math.max(0,a.health.attorneyHP-n),r=Math.max(0,a.health.defendantHP-s);return(e({health:{...a.health,attorneyHP:i,defendantHP:r}}),i<=0)?"attorney_ko":r<=0?"defendant_ko":"none"},applyDamageToOne:(n,s)=>{let a=t();if("attorney"===n){let t=Math.max(0,a.health.attorneyHP-s);if(e({health:{...a.health,attorneyHP:t}}),t<=0)return"attorney_ko"}else{let t=Math.max(0,a.health.defendantHP-s);if(e({health:{...a.health,defendantHP:t}}),t<=0)return"defendant_ko"}return"none"},evidenceCards:[],selectEvidenceCards:n=>{let s=t();s.caseData&&e({evidenceCards:s.caseData.defendant_points.filter(e=>n.includes(e.id)).map(e=>({id:e.id,claim:e.claim,evidence:e.evidence,used:!1}))})},useEvidenceCard:t=>{e(e=>({evidenceCards:e.evidenceCards.map(e=>e.id===t?{...e,used:!0}:e)}))},persist:()=>{try{let e=t(),n={phase:e.phase,caseData:e.caseData,attorneyPoints:e.attorneyPoints,defendantPoints:e.defendantPoints,analysis:e.analysis,health:e.health,messages:e.messages,suggestions:e.suggestions,evidenceCards:e.evidenceCards,exchangeCount:e.exchangeCount,isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1,outcome:e.outcome};localStorage.setItem(u,JSON.stringify(n))}catch{}},hydrate:()=>{try{let t=localStorage.getItem(u);if(t){let n=JSON.parse(t);e({...n,health:n.health??{...h},isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1})}}catch{}}}));e.s(["useArgumentStore",0,p],399)},90386,e=>{"use strict";var t=e.i(43476),n=e.i(71645),s=e.i(18566),a=e.i(46932),i=e.i(88653),r=e.i(399);function o(){let e=(0,s.useRouter)(),{caseData:o,selectEvidenceCards:l,setPhase:d}=(0,r.useArgumentStore)(),[c,u]=(0,n.useState)(new Set);if(!o)return e.replace("/"),null;let h=o.defendant_points;return(0,t.jsxs)("div",{className:"flex flex-col h-dvh select-none",style:{background:"var(--bg)"},children:[(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:-12},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center pt-10 pb-2 px-8 shrink-0",children:[(0,t.jsx)("p",{className:"text-[10px] tracking-[0.5em] font-medium mb-1",style:{color:"var(--accent)"},children:"PREPARE YOUR DEFENSE"}),(0,t.jsx)("h1",{className:"text-xl font-semibold tracking-tight mb-2",style:{color:"var(--text-primary)"},children:"Select Your Evidence"}),(0,t.jsxs)("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:["Choose up to ",3," evidence cards to bring into the courtroom. Deploy them during the trial for bonus damage."]}),(0,t.jsxs)("p",{className:"text-xs mt-2 font-medium tabular-nums",style:{color:c.size>0?"var(--take-that)":"var(--text-muted)"},children:[c.size," / ",3," selected"]})]}),(0,t.jsx)("div",{className:"px-8 py-2 shrink-0",children:(0,t.jsx)("div",{className:"h-px",style:{background:"var(--border-subtle)"}})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto px-6 pb-4",children:(0,t.jsx)("div",{className:"flex flex-col gap-3 max-w-lg mx-auto",children:(0,t.jsx)(i.AnimatePresence,{children:h.map((e,n)=>{let s=c.has(e.id),i=!s&&c.size>=3;return(0,t.jsx)(a.motion.button,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.1*n,duration:.35},onClick:()=>{var t;return!i&&(t=e.id,void u(e=>{let n=new Set(e);return n.has(t)?n.delete(t):n.size<3&&n.add(t),n}))},className:"w-full text-left rounded-2xl p-5 transition-all duration-200 cursor-pointer active:scale-[0.98]",style:{background:s?"rgba(255,56,92,0.12)":"var(--bg-light)",border:s?"1.5px solid var(--primary)":"1.5px solid var(--border-subtle)",opacity:i?.4:1},children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"shrink-0 w-9 h-9 rounded-lg flex items-center justify-center text-xs font-bold",style:{background:s?"var(--primary)":"var(--border-subtle)",color:s?"white":"var(--text-muted)"},children:e.id}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-snug mb-1",style:{color:"var(--text-primary)"},children:e.claim}),(0,t.jsxs)("p",{className:"text-xs leading-relaxed",style:{color:"var(--text-muted)"},children:["Evidence: ",e.evidence]})]}),s&&(0,t.jsx)(a.motion.div,{initial:{scale:0},animate:{scale:1},className:"shrink-0 w-6 h-6 rounded-full flex items-center justify-center mt-0.5",style:{background:"var(--primary)"},children:(0,t.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,t.jsx)("path",{d:"M2 6l3 3 5-5",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})},e.id)})})})}),(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.4},className:"px-6 pb-8 pt-4 shrink-0",children:[(0,t.jsx)("button",{onClick:()=>{l(Array.from(c)),d("chat"),e.push("/chat")},className:"w-full max-w-lg mx-auto block py-3.5 rounded-full text-white text-sm font-semibold tracking-widest transition-all duration-200 hover:brightness-110 active:scale-[0.98] cursor-pointer",style:{background:"var(--primary)",boxShadow:"0 4px 20px rgba(255,56,92,0.3)"},children:0===c.size?"SKIP â€” ENTER COURTROOM":"READY TO ARGUE"}),0===c.size&&(0,t.jsx)("p",{className:"text-[11px] text-center mt-2",style:{color:"var(--text-muted)"},children:"You can proceed without selecting evidence"})]})]})}e.s(["default",()=>o])}]);