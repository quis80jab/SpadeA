module.exports=[52763,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(46271),f=a.i(62036),g=a.i(89958),h=a.i(72706),i=a.i(64262);async function j(a,b=!1){let c=JSON.parse(await (0,i.callLawyer)(a,b));if(!c.message)throw Error("Invalid lawyer response: missing message");return{message:c.message,updated_points:c.updated_points??[],fallacies_identified:c.fallacies_identified??[],assumptions_challenged:c.assumptions_challenged??[],intensity_level:Math.min(10,Math.max(1,c.intensity_level??3)),damage_to_attorney:Math.min(25,Math.max(0,c.damage_to_attorney??5)),damage_to_defendant:Math.min(25,Math.max(0,c.damage_to_defendant??5))}}async function k(a){let b=JSON.parse(await (0,i.callDefendant)(a));if(!b.suggestions||0===b.suggestions.length)throw Error("Invalid defendant response: no suggestions");let c=b.suggestions.map(a=>({text:a.text,type:a.type||"strategic",variant:a.variant||"default"})),d=c.findIndex(a=>"surrender"===a.variant);if(d>=0&&d!==c.length-1){let[a]=c.splice(d,1);c.push(a)}return a>=6&&!c.find(a=>"surrender"===a.variant)&&c.push({text:"...I surrender.",type:"surrender",variant:"surrender"}),{suggestions:c,defense_analysis:b.defense_analysis??"No analysis",recommended_strategy:b.recommended_strategy??"No recommendation"}}var l=a.i(85209);function m(){return(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"self-start px-5 my-1.5 max-w-[70%]",children:[(0,b.jsx)("span",{className:"text-[10px] font-medium tracking-wider block mb-1",style:{color:"var(--primary)"},children:"PROSECUTION"}),(0,b.jsxs)("div",{className:"rounded-2xl rounded-tl-md px-4 py-3.5",style:{background:"var(--attorney-bubble)",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"},children:[(0,b.jsx)("div",{className:"flex gap-1.5 mb-1.5",children:[0,1,2].map(a=>(0,b.jsx)(e.motion.div,{className:"w-1.5 h-1.5 rounded-full",style:{background:"var(--attorney-text)"},animate:{opacity:[.2,.8,.2]},transition:{duration:1,repeat:1/0,delay:.2*a}},a))}),(0,b.jsx)("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Preparing argument..."})]})]})}let n={objection:"#FF385C",evidence:"#34D399",dramatic:"#E0B97A",strategic:"#60A5FA",surrender:"#DC2626"};function o({suggestion:a,onPress:c,index:d,disabled:f}){let g="surrender"===a.variant;return(0,b.jsxs)(e.motion.button,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.06*d,duration:.25},onClick:()=>c(a),disabled:f,className:`flex items-center gap-2.5 px-4 py-2.5 rounded-xl border shrink-0
                  transition-all duration-150 cursor-pointer select-none
                  hover:bg-white/5 active:scale-[0.97]
                  disabled:opacity-40 disabled:cursor-not-allowed
                  max-w-[280px] min-w-[140px]`,style:{background:g?"var(--chip-surrender)":"var(--chip-default)",borderColor:g?"#991b1b":"var(--chip-border)"},children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full shrink-0",style:{background:n[a.type]??"#717171"}}),(0,b.jsx)("span",{className:"text-[13px] font-medium text-left leading-snug",style:{color:g?"#fff":"var(--chip-text)"},children:a.text})]})}function p({index:a}){return(0,b.jsxs)("div",{className:"w-[180px] h-[48px] rounded-xl border shrink-0 p-4 flex flex-col justify-center gap-1.5 skeleton-shimmer",style:{background:"var(--chip-default)",borderColor:"var(--chip-border)",animationDelay:`${.15*a}s`},children:[(0,b.jsx)("div",{className:"h-2 rounded-full bg-white/[0.04] w-4/5"}),(0,b.jsx)("div",{className:"h-2 rounded-full bg-white/[0.04] w-3/5"})]})}function q({suggestions:a,onSelect:c,isLoading:d,disabled:g}){return d?(0,b.jsxs)("div",{className:"py-2",children:[(0,b.jsx)("p",{className:"text-[11px] font-medium tracking-wider uppercase px-5 mb-1.5",style:{color:"var(--text-muted)"},children:"Preparing your options..."}),(0,b.jsx)("div",{className:"flex gap-2.5 px-5 overflow-x-auto hide-scrollbar",children:[0,1,2,3].map(a=>(0,b.jsx)(p,{index:a},a))})]}):0===a.length?null:(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"py-2",children:[(0,b.jsx)("p",{className:"text-[11px] font-medium tracking-wider uppercase px-5 mb-1.5",style:{color:"var(--text-muted)"},children:"Your response"}),(0,b.jsx)("div",{className:"flex gap-2.5 px-5 overflow-x-auto hide-scrollbar pb-1",children:(0,b.jsx)(f.AnimatePresence,{mode:"popLayout",children:a.map((a,d)=>(0,b.jsx)(o,{suggestion:a,onPress:c,index:d,disabled:g},`${a.text}-${d}`))})})]})}var r=a.i(4162),s=a.i(74290),t=a.i(1703),u=a.i(62105),v=a.i(3516),w=a.i(702);function x(a,b){[...b].reverse().forEach(c=>{let d=a.getVariant(c);d&&(0,v.setTarget)(a,d),a.variantChildren&&a.variantChildren.forEach(a=>{x(a,b)})})}function y(){let a=!1,b=new Set,c={subscribe:a=>(b.add(a),()=>void b.delete(a)),start(c,d){(0,w.invariant)(a,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");let e=[];return b.forEach(a=>{e.push((0,u.animateVisualElement)(a,c,{transitionOverride:d}))}),Promise.all(e)},set:c=>((0,w.invariant)(a,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),b.forEach(a=>{var b,d;b=a,Array.isArray(d=c)?x(b,d):"string"==typeof d?x(b,[d]):(0,v.setTarget)(b,d)})),stop(){b.forEach(a=>{a.values.forEach(a=>a.stop())})},mount:()=>(a=!0,()=>{a=!1,c.stop()})};return c}let z=function(){let a=(0,s.useConstant)(y);return(0,t.useIsomorphicLayoutEffect)(a.mount,[]),a};function A({visible:a,color:c="rgba(255,255,255,0.9)"}){return(0,b.jsx)(f.AnimatePresence,{children:a&&(0,b.jsx)(e.motion.div,{initial:{opacity:1},animate:{opacity:0},exit:{opacity:0},transition:{duration:.4},className:"fixed inset-0 z-[100] pointer-events-none",style:{background:c}})})}function B({visible:a,text:c="OBJECTION!"}){return(0,b.jsx)(f.AnimatePresence,{children:a&&(0,b.jsx)(e.motion.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",duration:.3},className:"fixed inset-0 z-[99] flex items-center justify-center pointer-events-none",children:(0,b.jsx)("div",{className:"px-12 py-4 rounded",style:{background:"var(--objection)",boxShadow:"0 0 60px rgba(255, 68, 68, 0.8)"},children:(0,b.jsx)("span",{className:"text-4xl md:text-5xl font-black text-white tracking-widest",style:{textShadow:"2px 2px 4px rgba(0,0,0,0.5)"},children:c})})})})}function C({shake:a,intensity:d,children:f}){let g=z();return(0,c.useEffect)(()=>{if(a&&d>=4){let a=Math.min((d-3)*2,10);g.start({x:[0,a,-a,.6*a,-(.6*a),.3*a,0],transition:{duration:.3,ease:"easeOut"}})}},[a,d,g]),(0,b.jsx)(e.motion.div,{animate:g,className:"flex flex-col h-full",children:f})}function D({visible:a}){return(0,b.jsx)(f.AnimatePresence,{children:a&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[100] flex flex-col items-center justify-center pointer-events-none",style:{background:"rgba(0,0,0,0.6)"},children:[(0,b.jsx)(e.motion.span,{initial:{scale:3,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.3},className:"text-8xl",children:"ðŸ”¨"}),(0,b.jsx)(e.motion.span,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},className:"text-3xl font-black tracking-[0.3em] mt-4",style:{color:"var(--accent)"},children:"ORDER!"})]})})}function E({visible:a,reason:c="surrender"}){return(0,b.jsx)(f.AnimatePresence,{children:a&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.6},className:"fixed inset-0 z-[200] flex flex-col items-center justify-center pointer-events-none",style:{background:"rgba(10,10,26,0.92)"},children:[(0,b.jsx)(e.motion.span,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",duration:.4},className:"text-6xl md:text-7xl font-black tracking-[0.4em]",style:{color:"var(--guilty)",textShadow:"0 0 60px rgba(220,38,38,0.6)"},children:"GUILTY"}),(0,b.jsx)(e.motion.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.4},className:"text-base mt-6 tracking-wider",style:{color:"var(--text-secondary)"},children:"surrender"===c?"The defendant has surrendered.":"The prosecution's case was too strong."})]})})}function F({visible:a}){return(0,b.jsx)(f.AnimatePresence,{children:a&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.6},className:"fixed inset-0 z-[200] flex flex-col items-center justify-center pointer-events-none",style:{background:"rgba(10,26,10,0.92)"},children:[(0,b.jsx)(e.motion.span,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",duration:.4},className:"text-5xl md:text-6xl font-black tracking-[0.3em] text-center",style:{color:"#22c55e",textShadow:"0 0 60px rgba(34,197,94,0.6)"},children:"NOT GUILTY"}),(0,b.jsx)(e.motion.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.4},className:"text-base mt-6 tracking-wider",style:{color:"var(--text-secondary)"},children:"The prosecution's case has been demolished."})]})})}var G=a.i(95445);function H({open:a,onClose:c}){let{caseData:d,attorneyPoints:h,defendantPoints:i,analysis:j}=(0,g.useArgumentStore)();if(!d)return null;let k=({p:a})=>(0,b.jsxs)("div",{className:"flex gap-3 mb-3",children:[(0,b.jsx)("span",{className:"text-xs font-semibold shrink-0 w-7 pt-0.5",style:{color:"var(--primary)"},children:a.id}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm leading-relaxed",style:{color:"var(--text-primary)"},children:a.claim}),(0,b.jsx)("span",{className:"text-[10px] font-medium tracking-wider",style:{color:(a=>{switch(a){case"unchallenged":return"var(--text-secondary)";case"challenged":return"var(--hold-it)";case"refuted":return"var(--objection)";case"proven":return"var(--take-that)";default:return"var(--text-muted)"}})(a.status)},children:a.status.toUpperCase()})]})]});return(0,b.jsx)(f.AnimatePresence,{children:a&&(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center",style:{background:"rgba(0,0,0,0.5)"},onClick:c,children:(0,b.jsxs)(e.motion.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:28,stiffness:300},className:"w-full max-w-lg max-h-[80dvh] rounded-t-3xl px-7 pt-6 pb-8 overflow-y-auto",style:{background:"var(--bg-light)"},onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)("div",{className:"w-10 h-1 rounded-full",style:{background:"var(--handle-bar)"}})}),(0,b.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Case Summary"}),(0,b.jsx)("button",{onClick:c,className:"text-sm p-2 cursor-pointer rounded-full hover:brightness-90 transition-colors",style:{color:"var(--text-muted)"},children:(0,b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,b.jsx)("path",{d:"M12 4L4 12M4 4l8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]}),(0,b.jsxs)(I,{title:"The Case",children:[(0,b.jsx)("p",{className:"text-sm mb-1.5 leading-relaxed",style:{color:"var(--text-secondary)"},children:d.charge}),(0,b.jsx)("p",{className:"text-sm mb-1.5 leading-relaxed",style:{color:"var(--text-secondary)"},children:d.context}),(0,b.jsxs)("p",{className:"text-sm italic",style:{color:"var(--accent)"},children:["â€œ",d.philosophical_tension,"â€"]})]}),(0,b.jsx)(I,{title:"Prosecution Points",children:h.map(a=>(0,b.jsx)(k,{p:a},a.id))}),(0,b.jsx)(I,{title:"Defense Points",children:i.map(a=>(0,b.jsx)(k,{p:a},a.id))}),(0,b.jsxs)(I,{title:"Score",children:[(0,b.jsxs)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Prosecution: ",j.attorneyScore.validPoints," valid, ",j.attorneyScore.fallacies," fallacies"]}),(0,b.jsxs)("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:["Defense: ",j.defendantScore.validPoints," valid, ",j.defendantScore.fallacies," fallacies"]})]}),j.fallacies.length>0&&(0,b.jsx)(I,{title:"Fallacies Identified",children:j.fallacies.map((a,c)=>(0,b.jsxs)("p",{className:"text-sm mb-1 leading-relaxed",style:{color:"var(--text-secondary)"},children:[(0,b.jsxs)("span",{className:"font-medium",children:[a.side,":"]})," ",a.type," â€” ",a.context]},c))})]})})})}function I({title:a,children:c}){return(0,b.jsxs)("div",{className:"mb-5",children:[(0,b.jsx)("h3",{className:"text-xs font-medium tracking-wider uppercase mt-5 mb-2.5",style:{color:"var(--accent)"},children:a}),c]})}function J({cards:a,onDeploy:c,disabled:d}){let e=a.filter(a=>!a.used);return 0===e.length?null:(0,b.jsxs)("div",{className:"px-4 py-2 shrink-0",style:{borderTop:"1px solid var(--border-subtle)"},children:[(0,b.jsxs)("p",{className:"text-[10px] font-medium tracking-wider uppercase mb-1.5",style:{color:"var(--accent)"},children:["Evidence (",e.length," remaining)"]}),(0,b.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-none",children:a.map(a=>(0,b.jsxs)("button",{onClick:()=>!a.used&&!d&&c(a),disabled:a.used||d,className:"shrink-0 px-3.5 py-2 rounded-xl text-left transition-all duration-150 active:scale-[0.97] cursor-pointer disabled:cursor-not-allowed",style:{background:a.used?"var(--hover-overlay)":"rgba(255,56,92,0.1)",border:a.used?"1px solid var(--border-subtle)":"1px solid rgba(255,56,92,0.3)",opacity:a.used?.35:d?.5:1,maxWidth:200},children:[(0,b.jsxs)("span",{className:"text-[10px] font-bold block",style:{color:a.used?"var(--text-muted)":"var(--primary)"},children:[a.id," ",a.used&&"â€” USED"]}),(0,b.jsx)("span",{className:"text-[11px] leading-tight block mt-0.5 line-clamp-2",style:{color:a.used?"var(--text-muted)":"var(--text-secondary)"},children:a.claim})]},a.id))})]})}function K(){let a=(0,d.useRouter)(),i=(0,c.useRef)(null),[n,o]=(0,c.useState)(""),[p,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(0),[z,I]=(0,c.useState)(0),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)("rgba(255,255,255,0.9)"),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)("OBJECTION!"),[W,X]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(0),[$,_]=(0,c.useState)(!1),[aa,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)("surrender"),[ae,af]=(0,c.useState)(!1),ag=(0,c.useRef)(null),ah=(0,c.useRef)(!1),ai=(0,c.useRef)(!0),{caseData:aj,messages:ak,suggestions:al,evidenceCards:am,exchangeCount:an,health:ao,isAttorneyThinking:ap,isSuggestionsLoading:aq,addMessage:ar,setSuggestions:as,incrementExchange:at,updatePoints:au,updateAnalysis:av,applyDamageToOne:aw,setAttorneyThinking:ax,setSuggestionsLoading:ay,setPhase:az,setOutcome:aA,useEvidenceCard:aB,persist:aC}=(0,g.useArgumentStore)(),{saveArgument:aD}=(0,h.useHistoryStore)(),aE=(0,c.useCallback)(a=>{let{health:b,exchangeCount:c}=g.useArgumentStore.getState();return b.maxHP-b.attorneyHP+Math.min(3*c,30)+50*("won"===a)},[]),aF=(0,c.useCallback)(async a=>{let b=g.useArgumentStore.getState();if(!b.caseData)return;let c=aE(a);await aD({caseData:b.caseData,messages:b.messages,outcome:a,finalHealth:b.health,exchangeCount:b.exchangeCount,score:c,is_public:ai.current});let d=(0,G.createClient)(),{data:{user:e}}=await d.auth.getUser();if(e){let b="won"===a?"wins":"losses",{data:f}=await d.from("profiles").select("wins, losses, total_score").eq("id",e.id).single();f&&await d.from("profiles").update({[b]:f[b]+1,total_score:f.total_score+c}).eq("id",e.id)}},[aD,aE]);(0,c.useEffect)(()=>{(async()=>{let a=(0,G.createClient)(),{data:{user:b}}=await a.auth.getUser();if(b){let{data:c}=await a.from("profiles").select("arguments_public_by_default").eq("id",b.id).single();c&&(ai.current=c.arguments_public_by_default)}})()},[]),(0,c.useEffect)(()=>{aj||a.replace("/")},[aj,a]),(0,c.useEffect)(()=>{aj&&0===ak.length&&!ah.current&&(ah.current=!0,aK())},[aj]),(0,c.useEffect)(()=>{i.current?.scrollIntoView({behavior:"smooth"})},[ak.length,ap]);let aG=(0,c.useCallback)(a=>{ag.current={x:a.clientX,y:a.clientY}},[]),aH=(0,c.useCallback)(b=>{if(!ag.current)return;let c=b.clientX-ag.current.x,d=b.clientY-ag.current.y;(ag.current=null,c>100&&80>Math.abs(d))?a.replace("/"):d>50&&50>Math.abs(c)&&s(!0)},[a]),aI=(0,c.useCallback)(a=>{if(a>=4&&(Z(a),X(!0),setTimeout(()=>X(!1),350)),a>=7&&a<10){P(!0),R("rgba(255,255,255,0.9)"),setTimeout(()=>P(!1),500);let a=g.useArgumentStore.getState(),b=a.messages[a.messages.length-1];if(b){let a=b.text.toUpperCase();a.includes("OBJECTION")?(V("OBJECTION!"),T(!0),setTimeout(()=>T(!1),1200)):a.includes("HOLD IT")?(V("HOLD IT!"),T(!0),setTimeout(()=>T(!1),1200)):a.includes("TAKE THAT")&&(V("TAKE THAT!"),T(!0),setTimeout(()=>T(!1),1200))}}a>=10&&(_(!0),P(!0),R("rgba(255,255,255,0.9)"),setTimeout(()=>{P(!1),_(!1)},1500))},[]),aJ=(0,c.useCallback)(async b=>{w(!0),as([]),await new Promise(a=>setTimeout(a,800));let c="attorney_ko"===b?"won":"lost";"attorney_ko"===b?af(!0):(ad("ko"),ab(!0)),aI(10),await aF(c),aC();let d=(0,G.createClient)(),{data:{user:e}}=await d.auth.getUser();setTimeout(()=>{af(!1),ab(!1),aA(c),e?a.replace("/"):(N(c),L(!0))},3500)},[aI,aF,aC,aA,as,a]),aK=async()=>{if(aj){ax(!0),await new Promise(a=>setTimeout(a,1500)),ar(aj.opening_statement,"attorney",5),ax(!1),aI(5),ay(!0);try{let a=await k(0);as(a.suggestions)}catch{as([{text:"OBJECTION! I demand to see the evidence!",type:"objection",variant:"default"},{text:"That opening statement is misleading!",type:"strategic",variant:"default"},{text:"The defense is ready to present its case!",type:"dramatic",variant:"default"},{text:"Let's examine the facts more carefully.",type:"strategic",variant:"default"}])}ay(!1)}},aL=async b=>{if(t||v||!b.trim())return;u(!0);let c="...I surrender."===b;ar(b.trim(),"user"),at(),as([]),o("");let d=0;for(let a of g.useArgumentStore.getState().evidenceCards.filter(a=>!a.used))if(b.toUpperCase().includes(a.id)){aB(a.id),d+=10;break}if(c){az("surrender"),await new Promise(a=>setTimeout(a,2e3)),ax(!0);try{let c=await j(b,!0);ar(c.message,"attorney",10),ax(!1),aI(10),await new Promise(a=>setTimeout(a,1500)),ad("surrender"),ab(!0),await aF("lost"),aC(),setTimeout(()=>{aA("lost"),ab(!1),a.replace("/")},3e3)}catch{ax(!1)}u(!1);return}ax(!0);try{let a=await j(b),c=a.damage_to_attorney+d;y(c),I(0);let e=aw("attorney",c);if(a.updated_points.length>0&&au(a.updated_points),(a.fallacies_identified.length>0||a.assumptions_challenged.length>0)&&av(a.fallacies_identified,a.assumptions_challenged),"none"!==e){ar(a.message,"attorney",a.intensity_level),ax(!1),aI(a.intensity_level),await aJ(e),u(!1);return}await new Promise(a=>setTimeout(a,600)),ar(a.message,"attorney",a.intensity_level),ax(!1),aI(a.intensity_level),await new Promise(a=>setTimeout(a,400)),y(0),I(a.damage_to_defendant);let f=aw("defendant",a.damage_to_defendant);if("none"!==f){await aJ(f),u(!1);return}ay(!0);let h=g.useArgumentStore.getState().exchangeCount;try{let a=await k(h);as(a.suggestions)}catch{as([{text:"OBJECTION! That argument is flawed!",type:"objection",variant:"default"},{text:"Let me present my evidence.",type:"evidence",variant:"default"},{text:"The truth will prevail!",type:"dramatic",variant:"default"}])}ay(!1),aC()}catch{ax(!1),ay(!1)}u(!1)},aM=(0,c.useCallback)(a=>{aL(a.text)},[t,v]),aN=(0,c.useCallback)(()=>{n.trim()&&aL(n.trim())},[n,t,v]),aO=(0,c.useCallback)(a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),aN())},[aN]);return aj?(0,b.jsxs)("div",{className:"h-dvh flex flex-col select-none overflow-hidden",style:{background:"var(--bg)"},onPointerDown:aG,onPointerUp:aH,children:[(0,b.jsxs)(C,{shake:W,intensity:Y,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-5 py-3.5 shrink-0",style:{borderBottom:"1px solid var(--border-subtle)"},children:[(0,b.jsx)("h1",{className:"text-sm font-medium truncate flex-1 mr-3",style:{color:"var(--text-primary)"},children:aj.title}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"text-xs font-medium tabular-nums",style:{color:"var(--text-muted)"},children:["Round ",an]}),(0,b.jsx)("button",{onClick:()=>s(!0),className:"text-xs px-3.5 py-1.5 rounded-full border cursor-pointer transition-all duration-150",style:{borderColor:"var(--chip-border)",color:"var(--text-secondary)"},children:"Case Details"})]})]}),(0,b.jsxs)("div",{className:"px-5 py-3 shrink-0",style:{background:"var(--hover-overlay)",borderBottom:"1px solid var(--border-subtle)"},children:[(0,b.jsxs)("p",{className:"text-xs font-medium",style:{color:"var(--text-secondary)"},children:[(0,b.jsx)("span",{style:{color:"var(--text-muted)"},children:"Charged with: "}),aj.charge]}),aj.philosophical_tension&&(0,b.jsxs)("p",{className:"text-[11px] italic mt-0.5",style:{color:"var(--text-muted)"},children:["â€œ",aj.philosophical_tension,"â€"]})]}),(0,b.jsx)(r.HealthBar,{health:ao,lastDamageToAttorney:x,lastDamageToDefendant:z}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto flex flex-col py-2",children:[(0,b.jsx)(f.AnimatePresence,{mode:"popLayout",children:ak.map(a=>(0,b.jsx)(l.MessageBubble,{message:a},a.id))}),ap&&(0,b.jsx)(m,{}),(0,b.jsx)("div",{ref:i})]}),!v&&am.filter(a=>!a.used).length>0&&(0,b.jsx)(J,{cards:am,onDeploy:a=>{aL(`TAKE THAT! I present ${a.id} â€” ${a.claim}! The evidence clearly shows: ${a.evidence}`)},disabled:t}),!v&&(0,b.jsx)(q,{suggestions:al,onSelect:aM,isLoading:aq,disabled:t}),!v&&(0,b.jsxs)("div",{className:"flex items-center gap-3 px-5 py-3 shrink-0",style:{borderTop:"1px solid var(--border-subtle)"},children:[(0,b.jsx)("input",{type:"text",placeholder:"Type your own argument...",value:n,onChange:a=>o(a.target.value),onKeyDown:aO,disabled:t,className:"flex-1 rounded-xl px-4 py-3 text-sm border outline-none disabled:opacity-50 placeholder:text-[var(--text-muted)] transition-colors duration-150",style:{background:"var(--bg-light)",borderColor:"var(--border-subtle)",color:"var(--text-primary)"}}),(0,b.jsx)("button",{onClick:aN,disabled:!n.trim()||t,className:"w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-150 cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed hover:brightness-110 active:scale-[0.96]",style:{background:"var(--primary)"},children:(0,b.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:(0,b.jsx)("path",{d:"M5 12h14M13 5l7 7-7 7",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),(0,b.jsx)(A,{visible:O,color:Q}),(0,b.jsx)(B,{visible:S,text:U}),(0,b.jsx)(D,{visible:$}),(0,b.jsx)(E,{visible:aa,reason:ac}),(0,b.jsx)(F,{visible:ae}),(0,b.jsx)(H,{open:p,onClose:()=>s(!1)}),(0,b.jsx)(f.AnimatePresence,{children:K&&(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-center justify-center",style:{background:"rgba(0,0,0,0.7)",backdropFilter:"blur(8px)"},children:(0,b.jsxs)(e.motion.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"mx-6 w-full max-w-sm rounded-3xl p-8 text-center",style:{background:"var(--bg-card)",boxShadow:"0 24px 64px rgba(0,0,0,0.5)"},children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"won"===M?"ðŸ†":"âš–ï¸"}),(0,b.jsx)("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--text-primary)"},children:"won"===M?"You Won!":"Case Lost"}),(0,b.jsx)("p",{className:"text-sm mb-6 leading-relaxed",style:{color:"var(--text-muted)"},children:"won"===M?"Save your victory, climb the leaderboard, and challenge friends by creating an account.":"Track your progress, improve your win rate, and compete with friends by creating an account."}),(0,b.jsx)("button",{onClick:()=>a.push("/login"),className:"w-full py-3 rounded-full text-white text-sm font-semibold tracking-widest transition-all duration-200 hover:brightness-110 active:scale-[0.98] cursor-pointer mb-3",style:{background:"var(--primary)",boxShadow:"0 4px 20px rgba(255,56,92,0.3)"},children:"CREATE ACCOUNT"}),(0,b.jsx)("button",{onClick:()=>{L(!1),a.replace("/")},className:"w-full py-2.5 text-sm font-medium cursor-pointer transition-all duration-150 hover:opacity-80",style:{color:"var(--text-muted)"},children:"Maybe Later"})]})})})]}):null}a.s(["default",()=>K],52763)}];

//# sourceMappingURL=app_chat_page_tsx_18691586._.js.map