module.exports=[39545,(a,b,c)=>{var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=!1;function t(){if(!s){s=!0;var a=navigator.userAgent,b=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(a),c=/(Mac OS X)|(Windows)|(Linux)/.exec(a);if(o=/\b(iPhone|iP[ao]d)/.exec(a),p=/\b(iP[ao]d)/.exec(a),m=/Android/i.exec(a),q=/FBAN\/\w+;/i.exec(a),r=/Mobile/i.exec(a),n=!!/Win64/.exec(a),b){(d=b[1]?parseFloat(b[1]):b[5]?parseFloat(b[5]):NaN)&&document&&document.documentMode&&(d=document.documentMode);var t=/(?:Trident\/(\d+.\d+))/.exec(a);i=t?parseFloat(t[1])+4:d,e=b[2]?parseFloat(b[2]):NaN,f=b[3]?parseFloat(b[3]):NaN,h=(g=b[4]?parseFloat(b[4]):NaN)&&(b=/(?:Chrome\/(\d+\.\d+))/.exec(a))&&b[1]?parseFloat(b[1]):NaN}else d=e=f=h=g=NaN;if(c){if(c[1]){var u=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(a);j=!u||parseFloat(u[1].replace("_","."))}else j=!1;k=!!c[2],l=!!c[3]}else j=k=l=!1}}var u={ie:function(){return t()||d},ieCompatibilityMode:function(){return t()||i>d},ie64:function(){return u.ie()&&n},firefox:function(){return t()||e},opera:function(){return t()||f},webkit:function(){return t()||g},safari:function(){return u.webkit()},chrome:function(){return t()||h},windows:function(){return t()||k},osx:function(){return t()||j},linux:function(){return t()||l},iphone:function(){return t()||o},mobile:function(){return t()||o||p||m||r},nativeApp:function(){return t()||q},android:function(){return t()||m},ipad:function(){return t()||p}};b.exports=u},17371,(a,b,c)=>{"use strict";b.exports={canUseDOM:!1,canUseWorkers:"u">typeof Worker,canUseEventListeners:!1,canUseViewport:!1,isInWorker:!0}},11868,(a,b,c)=>{"use strict";var d,e=a.r(17371);e.canUseDOM&&(d=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),b.exports=function(a,b){if(!e.canUseDOM||b&&!("addEventListener"in document))return!1;var c="on"+a,f=c in document;if(!f){var g=document.createElement("div");g.setAttribute(c,"return;"),f="function"==typeof g[c]}return!f&&d&&"wheel"===a&&(f=document.implementation.hasFeature("Events.wheel","3.0")),f}},58615,(a,b,c)=>{"use strict";var d=a.r(39545),e=a.r(11868);function f(a){var b=0,c=0,d=0,e=0;return"detail"in a&&(c=a.detail),"wheelDelta"in a&&(c=-a.wheelDelta/120),"wheelDeltaY"in a&&(c=-a.wheelDeltaY/120),"wheelDeltaX"in a&&(b=-a.wheelDeltaX/120),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(b=c,c=0),d=10*b,e=10*c,"deltaY"in a&&(e=a.deltaY),"deltaX"in a&&(d=a.deltaX),(d||e)&&a.deltaMode&&(1==a.deltaMode?(d*=40,e*=40):(d*=800,e*=800)),d&&!b&&(b=d<1?-1:1),e&&!c&&(c=e<1?-1:1),{spinX:b,spinY:c,pixelX:d,pixelY:e}}f.getEventType=function(){return d.firefox()?"DOMMouseScroll":e("wheel")?"wheel":"mousewheel"},b.exports=f},3478,(a,b,c)=>{b.exports=a.r(58615)},45343,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(46271),f=a.i(95445),g=a.i(52100),h=a.i(3478);function i(a,b,c,d,e){void 0===e&&(e=0);var f=p(b.width,b.height,e),g=f.width,h=f.height;return{x:j(a.x,g,c.width,d),y:j(a.y,h,c.height,d)}}function j(a,b,c,d){var e=b*d/2-c/2;return q(a,-e,e)}function k(a,b){return Math.sqrt(Math.pow(a.y-b.y,2)+Math.pow(a.x-b.x,2))}function l(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI}function m(a,b){return Math.min(a,Math.max(0,b))}function n(a,b){return b}function o(a,b){return{x:(b.x+a.x)/2,y:(b.y+a.y)/2}}function p(a,b,c){var d=c*Math.PI/180;return{width:Math.abs(Math.cos(d)*a)+Math.abs(Math.sin(d)*b),height:Math.abs(Math.sin(d)*a)+Math.abs(Math.cos(d)*b)}}function q(a,b,c){return Math.min(Math.max(a,b),c)}function r(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return a.filter(function(a){return"string"==typeof a&&!!(a.length>0)}).join(" ").trim()}var s=function(a){function b(){var d=null!==a&&a.apply(this,arguments)||this;return d.cropperRef=c.createRef(),d.imageRef=c.createRef(),d.videoRef=c.createRef(),d.containerPosition={x:0,y:0},d.containerRef=null,d.styleRef=null,d.containerRect=null,d.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},d.dragStartPosition={x:0,y:0},d.dragStartCrop={x:0,y:0},d.gestureZoomStart=0,d.gestureRotationStart=0,d.isTouching=!1,d.lastPinchDistance=0,d.lastPinchRotation=0,d.rafDragTimeout=null,d.rafPinchTimeout=null,d.wheelTimer=null,d.currentDoc="u">typeof document?document:null,d.currentWindow=null,d.resizeObserver=null,d.previousCropSize=null,d.isInitialized=!1,d.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},d.initResizeObserver=function(){if(void 0!==window.ResizeObserver&&d.containerRef){var a=!0;d.resizeObserver=new window.ResizeObserver(function(b){if(a){a=!1;return}d.computeSizes()}),d.resizeObserver.observe(d.containerRef)}},d.preventZoomSafari=function(a){return a.preventDefault()},d.cleanEvents=function(){d.currentDoc&&(d.currentDoc.removeEventListener("mousemove",d.onMouseMove),d.currentDoc.removeEventListener("mouseup",d.onDragStopped),d.currentDoc.removeEventListener("touchmove",d.onTouchMove),d.currentDoc.removeEventListener("touchend",d.onDragStopped),d.currentDoc.removeEventListener("gesturechange",d.onGestureChange),d.currentDoc.removeEventListener("gestureend",d.onGestureEnd),d.currentDoc.removeEventListener("scroll",d.onScroll))},d.clearScrollEvent=function(){d.containerRef&&d.containerRef.removeEventListener("wheel",d.onWheel),d.wheelTimer&&clearTimeout(d.wheelTimer)},d.onMediaLoad=function(){var a=d.computeSizes();a&&(d.previousCropSize=a,d.emitCropData(),d.setInitialCrop(a),d.isInitialized=!0),d.props.onMediaLoaded&&d.props.onMediaLoaded(d.mediaSize)},d.setInitialCrop=function(a){if(d.props.initialCroppedAreaPercentages){var b,c,e,f,g,h,i,j=(b=d.props.initialCroppedAreaPercentages,c=d.mediaSize,e=d.props.rotation,f=d.props.minZoom,g=d.props.maxZoom,h=p(c.width,c.height,e),{crop:{x:(i=q(a.width/h.width*(100/b.width),f,g))*h.width/2-a.width/2-h.width*i*(b.x/100),y:i*h.height/2-a.height/2-h.height*i*(b.y/100)},zoom:i}),k=j.crop,l=j.zoom;d.props.onCropChange(k),d.props.onZoomChange&&d.props.onZoomChange(l)}else if(d.props.initialCroppedAreaPixels){var m,n,o,r,s,t,u,v,w,x=(m=d.props.initialCroppedAreaPixels,n=d.mediaSize,o=d.props.rotation,r=d.props.minZoom,s=d.props.maxZoom,void 0===o&&(o=0),t=p(n.naturalWidth,n.naturalHeight,o),v=q((u=n.width>n.height?n.width/n.naturalWidth:n.height/n.naturalHeight,a.height>a.width?a.height/(m.height*u):a.width/(m.width*u)),r,s),w=a.height>a.width?a.height/m.height:a.width/m.width,{crop:{x:((t.width-m.width)/2-m.x)*w,y:((t.height-m.height)/2-m.y)*w},zoom:v}),k=x.crop,l=x.zoom;d.props.onCropChange(k),d.props.onZoomChange&&d.props.onZoomChange(l)}},d.computeSizes=function(){var a,b,c,e,f,h,i=d.imageRef.current||d.videoRef.current;if(i&&d.containerRef){d.containerRect=d.containerRef.getBoundingClientRect(),d.saveContainerPosition();var j,k,l,m,n,o,q,r,s,t,u,v=d.containerRect.width/d.containerRect.height,w=(null==(a=d.imageRef.current)?void 0:a.naturalWidth)||(null==(b=d.videoRef.current)?void 0:b.videoWidth)||0,x=(null==(c=d.imageRef.current)?void 0:c.naturalHeight)||(null==(e=d.videoRef.current)?void 0:e.videoHeight)||0,y=i.offsetWidth<w||i.offsetHeight<x,z=w/x,A=void 0;if(y)switch(d.state.mediaObjectFit){default:case"contain":A=v>z?{width:d.containerRect.height*z,height:d.containerRect.height}:{width:d.containerRect.width,height:d.containerRect.width/z};break;case"horizontal-cover":A={width:d.containerRect.width,height:d.containerRect.width/z};break;case"vertical-cover":A={width:d.containerRect.height*z,height:d.containerRect.height}}else A={width:i.offsetWidth,height:i.offsetHeight};d.mediaSize=(0,g.__assign)((0,g.__assign)({},A),{naturalWidth:w,naturalHeight:x}),d.props.setMediaSize&&d.props.setMediaSize(d.mediaSize);var B=d.props.cropSize?d.props.cropSize:(j=d.mediaSize.width,k=d.mediaSize.height,l=d.containerRect.width,m=d.containerRect.height,n=d.props.aspect,void 0===(o=d.props.rotation)&&(o=0),r=(q=p(j,k,o)).width,s=q.height,(t=Math.min(r,l))>(u=Math.min(s,m))*n?{width:u*n,height:u}:{width:t,height:t/n});return((null==(f=d.state.cropSize)?void 0:f.height)!==B.height||(null==(h=d.state.cropSize)?void 0:h.width)!==B.width)&&d.props.onCropSizeChange&&d.props.onCropSizeChange(B),d.setState({cropSize:B},d.recomputeCropPosition),d.props.setCropSize&&d.props.setCropSize(B),B}},d.saveContainerPosition=function(){if(d.containerRef){var a=d.containerRef.getBoundingClientRect();d.containerPosition={x:a.left,y:a.top}}},d.onMouseDown=function(a){d.currentDoc&&(a.preventDefault(),d.currentDoc.addEventListener("mousemove",d.onMouseMove),d.currentDoc.addEventListener("mouseup",d.onDragStopped),d.saveContainerPosition(),d.onDragStart(b.getMousePoint(a)))},d.onMouseMove=function(a){return d.onDrag(b.getMousePoint(a))},d.onScroll=function(a){d.currentDoc&&(a.preventDefault(),d.saveContainerPosition())},d.onTouchStart=function(a){!d.currentDoc||(d.isTouching=!0,(!d.props.onTouchRequest||d.props.onTouchRequest(a))&&(d.currentDoc.addEventListener("touchmove",d.onTouchMove,{passive:!1}),d.currentDoc.addEventListener("touchend",d.onDragStopped),d.saveContainerPosition(),2===a.touches.length?d.onPinchStart(a):1===a.touches.length&&d.onDragStart(b.getTouchPoint(a.touches[0]))))},d.onTouchMove=function(a){a.preventDefault(),2===a.touches.length?d.onPinchMove(a):1===a.touches.length&&d.onDrag(b.getTouchPoint(a.touches[0]))},d.onGestureStart=function(a){d.currentDoc&&(a.preventDefault(),d.currentDoc.addEventListener("gesturechange",d.onGestureChange),d.currentDoc.addEventListener("gestureend",d.onGestureEnd),d.gestureZoomStart=d.props.zoom,d.gestureRotationStart=d.props.rotation)},d.onGestureChange=function(a){if(a.preventDefault(),!d.isTouching){var c=b.getMousePoint(a),e=d.gestureZoomStart-1+a.scale;if(d.setNewZoom(e,c,{shouldUpdatePosition:!0}),d.props.onRotationChange){var f=d.gestureRotationStart+a.rotation;d.props.onRotationChange(f)}}},d.onGestureEnd=function(a){d.cleanEvents()},d.onDragStart=function(a){var b,c;d.dragStartPosition={x:a.x,y:a.y},d.dragStartCrop=(0,g.__assign)({},d.props.crop),null==(c=(b=d.props).onInteractionStart)||c.call(b)},d.onDrag=function(a){var b=a.x,c=a.y;d.currentWindow&&(d.rafDragTimeout&&d.currentWindow.cancelAnimationFrame(d.rafDragTimeout),d.rafDragTimeout=d.currentWindow.requestAnimationFrame(function(){if(d.state.cropSize&&void 0!==b&&void 0!==c){var a=b-d.dragStartPosition.x,e=c-d.dragStartPosition.y,f={x:d.dragStartCrop.x+a,y:d.dragStartCrop.y+e},g=d.props.restrictPosition?i(f,d.mediaSize,d.state.cropSize,d.props.zoom,d.props.rotation):f;d.props.onCropChange(g)}}))},d.onDragStopped=function(){var a,b;d.isTouching=!1,d.cleanEvents(),d.emitCropData(),null==(b=(a=d.props).onInteractionEnd)||b.call(a)},d.onWheel=function(a){if(d.currentWindow&&(!d.props.onWheelRequest||d.props.onWheelRequest(a))){a.preventDefault();var c=b.getMousePoint(a),e=(0,h.default)(a).pixelY,f=d.props.zoom-e*d.props.zoomSpeed/200;d.setNewZoom(f,c,{shouldUpdatePosition:!0}),d.state.hasWheelJustStarted||d.setState({hasWheelJustStarted:!0},function(){var a,b;return null==(b=(a=d.props).onInteractionStart)?void 0:b.call(a)}),d.wheelTimer&&clearTimeout(d.wheelTimer),d.wheelTimer=d.currentWindow.setTimeout(function(){return d.setState({hasWheelJustStarted:!1},function(){var a,b;return null==(b=(a=d.props).onInteractionEnd)?void 0:b.call(a)})},250)}},d.getPointOnContainer=function(a,b){var c=a.x,e=a.y;if(!d.containerRect)throw Error("The Cropper is not mounted");return{x:d.containerRect.width/2-(c-b.x),y:d.containerRect.height/2-(e-b.y)}},d.getPointOnMedia=function(a){var b=a.x,c=a.y,e=d.props,f=e.crop,g=e.zoom;return{x:(b+f.x)/g,y:(c+f.y)/g}},d.setNewZoom=function(a,b,c){var e=(void 0===c?{}:c).shouldUpdatePosition;if(d.state.cropSize&&d.props.onZoomChange){var f=q(a,d.props.minZoom,d.props.maxZoom);if(void 0===e||e){var g=d.getPointOnContainer(b,d.containerPosition),h=d.getPointOnMedia(g),j={x:h.x*f-g.x,y:h.y*f-g.y},k=d.props.restrictPosition?i(j,d.mediaSize,d.state.cropSize,f,d.props.rotation):j;d.props.onCropChange(k)}d.props.onZoomChange(f)}},d.getCropData=function(){var a,b,c,e,f,h,j,k,l,o,q,r,s,t,u;return d.state.cropSize?(a=d.props.restrictPosition?i(d.props.crop,d.mediaSize,d.state.cropSize,d.props.zoom,d.props.rotation):d.props.crop,b=d.mediaSize,c=d.state.cropSize,e=d.getAspect(),f=d.props.zoom,h=d.props.rotation,j=d.props.restrictPosition,void 0===h&&(h=0),void 0===j&&(j=!0),k=j?m:n,l=p(b.width,b.height,h),o=p(b.naturalWidth,b.naturalHeight,h),q={x:k(100,((l.width-c.width/f)/2-a.x/f)/l.width*100),y:k(100,((l.height-c.height/f)/2-a.y/f)/l.height*100),width:k(100,c.width/l.width*100/f),height:k(100,c.height/l.height*100/f)},r=Math.round(k(o.width,q.width*o.width/100)),s=Math.round(k(o.height,q.height*o.height/100)),t=o.width>=o.height*e?{width:Math.round(s*e),height:s}:{width:r,height:Math.round(r/e)},u=(0,g.__assign)((0,g.__assign)({},t),{x:Math.round(k(o.width-t.width,q.x*o.width/100)),y:Math.round(k(o.height-t.height,q.y*o.height/100))}),{croppedAreaPercentages:q,croppedAreaPixels:u}):null},d.emitCropData=function(){var a=d.getCropData();if(a){var b=a.croppedAreaPercentages,c=a.croppedAreaPixels;d.props.onCropComplete&&d.props.onCropComplete(b,c),d.props.onCropAreaChange&&d.props.onCropAreaChange(b,c)}},d.emitCropAreaChange=function(){var a=d.getCropData();if(a){var b=a.croppedAreaPercentages,c=a.croppedAreaPixels;d.props.onCropAreaChange&&d.props.onCropAreaChange(b,c)}},d.recomputeCropPosition=function(){if(d.state.cropSize){var a,b,c=d.props.crop;if(d.isInitialized&&(null==(a=d.previousCropSize)?void 0:a.width)&&(null==(b=d.previousCropSize)?void 0:b.height)&&(Math.abs(d.previousCropSize.width-d.state.cropSize.width)>1e-6||Math.abs(d.previousCropSize.height-d.state.cropSize.height)>1e-6)){var e=d.state.cropSize.width/d.previousCropSize.width,f=d.state.cropSize.height/d.previousCropSize.height;c={x:d.props.crop.x*e,y:d.props.crop.y*f}}var g=d.props.restrictPosition?i(c,d.mediaSize,d.state.cropSize,d.props.zoom,d.props.rotation):c;d.previousCropSize=d.state.cropSize,d.props.onCropChange(g),d.emitCropData()}},d.onKeyDown=function(a){var b,c,e=d.props,f=e.crop,h=e.onCropChange,j=e.keyboardStep,k=e.zoom,l=e.rotation,m=j;if(d.state.cropSize){a.shiftKey&&(m*=.2);var n=(0,g.__assign)({},f);switch(a.key){case"ArrowUp":n.y-=m,a.preventDefault();break;case"ArrowDown":n.y+=m,a.preventDefault();break;case"ArrowLeft":n.x-=m,a.preventDefault();break;case"ArrowRight":n.x+=m,a.preventDefault();break;default:return}d.props.restrictPosition&&(n=i(n,d.mediaSize,d.state.cropSize,k,l)),a.repeat||null==(c=(b=d.props).onInteractionStart)||c.call(b),h(n)}},d.onKeyUp=function(a){var b,c;switch(a.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":a.preventDefault();break;default:return}d.emitCropData(),null==(c=(b=d.props).onInteractionEnd)||c.call(b)},d}return(0,g.__extends)(b,a),b.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),void 0===window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},b.prototype.componentWillUnmount=function(){var a,b;this.currentDoc&&this.currentWindow&&(void 0===window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null==(a=this.resizeObserver)||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null==(b=this.styleRef.parentNode)||b.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},b.prototype.componentDidUpdate=function(a){a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect||a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():(null==(b=a.cropSize)?void 0:b.height)!==(null==(c=this.props.cropSize)?void 0:c.height)||(null==(d=a.cropSize)?void 0:d.width)!==(null==(e=this.props.cropSize)?void 0:e.width)?this.computeSizes():((null==(f=a.crop)?void 0:f.x)!==(null==(g=this.props.crop)?void 0:g.x)||(null==(h=a.crop)?void 0:h.y)!==(null==(i=this.props.crop)?void 0:i.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&(null==(j=this.videoRef.current)||j.load());var b,c,d,e,f,g,h,i,j,k=this.getObjectFit();k!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:k},this.computeSizes)},b.prototype.getAspect=function(){var a=this.props,b=a.cropSize,c=a.aspect;return b?b.width/b.height:c},b.prototype.getObjectFit=function(){var a,b,c,d;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var e=this.containerRect.width/this.containerRect.height;return((null==(a=this.imageRef.current)?void 0:a.naturalWidth)||(null==(b=this.videoRef.current)?void 0:b.videoWidth)||0)/((null==(c=this.imageRef.current)?void 0:c.naturalHeight)||(null==(d=this.videoRef.current)?void 0:d.videoHeight)||0)<e?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},b.prototype.onPinchStart=function(a){var c=b.getTouchPoint(a.touches[0]),d=b.getTouchPoint(a.touches[1]);this.lastPinchDistance=k(c,d),this.lastPinchRotation=l(c,d),this.onDragStart(o(c,d))},b.prototype.onPinchMove=function(a){var c=this;if(this.currentDoc&&this.currentWindow){var d=b.getTouchPoint(a.touches[0]),e=b.getTouchPoint(a.touches[1]),f=o(d,e);this.onDrag(f),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var a=k(d,e),b=c.props.zoom*(a/c.lastPinchDistance);c.setNewZoom(b,f,{shouldUpdatePosition:!1}),c.lastPinchDistance=a;var g=l(d,e),h=c.props.rotation+(g-c.lastPinchRotation);c.props.onRotationChange&&c.props.onRotationChange(h),c.lastPinchRotation=g})}},b.prototype.render=function(){var a,b=this,d=this.props,e=d.image,f=d.video,h=d.mediaProps,i=d.cropperProps,j=d.transform,k=d.crop,l=k.x,m=k.y,n=d.rotation,o=d.zoom,p=d.cropShape,q=d.showGrid,s=d.roundCropAreaPixels,t=d.style,u=t.containerStyle,v=t.cropAreaStyle,w=t.mediaStyle,x=d.classes,y=x.containerClassName,z=x.cropAreaClassName,A=x.mediaClassName,B=null!=(a=this.state.mediaObjectFit)?a:this.getObjectFit();return c.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(a){return b.containerRef=a},"data-testid":"container",style:u,className:r("reactEasyCrop_Container",y)},e?c.createElement("img",(0,g.__assign)({alt:"",className:r("reactEasyCrop_Image","contain"===B&&"reactEasyCrop_Contain","horizontal-cover"===B&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===B&&"reactEasyCrop_Cover_Vertical",A)},h,{src:e,ref:this.imageRef,style:(0,g.__assign)((0,g.__assign)({},w),{transform:j||"translate(".concat(l,"px, ").concat(m,"px) rotate(").concat(n,"deg) scale(").concat(o,")")}),onLoad:this.onMediaLoad})):f&&c.createElement("video",(0,g.__assign)({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:r("reactEasyCrop_Video","contain"===B&&"reactEasyCrop_Contain","horizontal-cover"===B&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===B&&"reactEasyCrop_Cover_Vertical",A)},h,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:(0,g.__assign)((0,g.__assign)({},w),{transform:j||"translate(".concat(l,"px, ").concat(m,"px) rotate(").concat(n,"deg) scale(").concat(o,")")}),controls:!1}),(Array.isArray(f)?f:[{src:f}]).map(function(a){return c.createElement("source",(0,g.__assign)({key:a.src},a))})),this.state.cropSize&&c.createElement("div",(0,g.__assign)({ref:this.cropperRef,style:(0,g.__assign)((0,g.__assign)({},v),{width:s?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:s?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:r("reactEasyCrop_CropArea","round"===p&&"reactEasyCrop_CropAreaRound",q&&"reactEasyCrop_CropAreaGrid",z)},i)))},b.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},b.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},b.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},b}(c.Component),t=a.i(62036);async function u(a,b,c=256){let d=new Image;d.crossOrigin="anonymous",await new Promise((b,c)=>{d.onload=()=>b(),d.onerror=c,d.src=a});let e=document.createElement("canvas");return e.width=c,e.height=c,e.getContext("2d").drawImage(d,b.x,b.y,b.width,b.height,0,0,c,c),new Promise((a,b)=>{e.toBlob(c=>c?a(c):b(Error("Canvas toBlob failed")),"image/png",1)})}function v({open:a,imageSrc:d,onClose:f,onCropComplete:g}){let[h,i]=(0,c.useState)({x:0,y:0}),[j,k]=(0,c.useState)(1),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),p=(0,c.useCallback)((a,b)=>{m(b)},[]),q=(0,c.useCallback)(async()=>{if(l){o(!0);try{let a=await u(d,l,256);g(a)}catch{}o(!1)}},[l,d,g]);return(0,b.jsx)(t.AnimatePresence,{children:a&&(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[500] flex items-center justify-center",style:{background:"rgba(0,0,0,0.7)",backdropFilter:"blur(6px)"},onClick:()=>!n&&f(),children:(0,b.jsxs)(e.motion.div,{initial:{opacity:0,scale:.9,y:16},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:16},transition:{type:"spring",damping:25,stiffness:300},className:"mx-4 w-full max-w-sm rounded-2xl overflow-hidden",style:{background:"var(--bg-card)",boxShadow:"0 16px 48px rgba(0,0,0,0.5)"},onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"px-5 py-4 flex items-center justify-between",style:{borderBottom:"1px solid var(--border-subtle)"},children:[(0,b.jsx)("h3",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Crop Photo"}),(0,b.jsx)("button",{onClick:f,disabled:n,className:"p-1.5 -m-1 rounded-full cursor-pointer transition-colors",style:{color:"var(--text-muted)"},children:(0,b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,b.jsx)("path",{d:"M12 4L4 12M4 4l8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]}),(0,b.jsx)("div",{className:"relative w-full",style:{height:320},children:(0,b.jsx)(s,{image:d,crop:h,zoom:j,aspect:1,cropShape:"round",showGrid:!1,onCropChange:i,onZoomChange:k,onCropComplete:p})}),(0,b.jsxs)("div",{className:"px-5 py-3 flex items-center gap-3",style:{borderTop:"1px solid var(--border-subtle)"},children:[(0,b.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--text-muted)",flexShrink:0},children:[(0,b.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,b.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),(0,b.jsx)("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]}),(0,b.jsx)("input",{type:"range",min:1,max:3,step:.05,value:j,onChange:a=>k(Number(a.target.value)),className:"flex-1 accent-[var(--primary)]",style:{height:4}}),(0,b.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--text-muted)",flexShrink:0},children:[(0,b.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,b.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),(0,b.jsx)("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),(0,b.jsx)("line",{x1:"11",y1:"8",x2:"11",y2:"14"})]})]}),(0,b.jsxs)("div",{className:"px-5 py-4 flex gap-3",style:{borderTop:"1px solid var(--border-subtle)"},children:[(0,b.jsx)("button",{onClick:f,disabled:n,className:"flex-1 py-2.5 rounded-xl text-sm font-medium cursor-pointer transition-all duration-150",style:{color:"var(--text-muted)",border:"1px solid var(--border-subtle)"},children:"Cancel"}),(0,b.jsx)("button",{onClick:q,disabled:n,className:"flex-1 py-2.5 rounded-xl text-sm font-semibold text-white cursor-pointer transition-all duration-200 hover:brightness-110 active:scale-[0.98] disabled:opacity-50",style:{background:"var(--primary)"},children:n?"Processing...":"Save"})]})]})})})}function w(){let a=(0,d.useRouter)(),g=(0,f.createClient)(),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),y=(0,c.useRef)(null),[z,A]=(0,c.useState)("dark"),[B,C]=(0,c.useState)(!0),D=(0,c.useRef)(null),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null);(0,c.useEffect)(()=>{!async function(){let{data:{user:b}}=await g.auth.getUser();if(!b)return a.replace("/login");let{data:c}=await g.from("profiles").select("*").eq("id",b.id).single();c&&(i(c),k(c.display_name),A(c.theme||"dark"),C(c.arguments_public_by_default),F(c.avatar_url||null)),m(!1)}()},[]);let M=(0,c.useCallback)(a=>{if(y.current&&clearTimeout(y.current),!a.trim()||a.trim()===h?.display_name){u(null),x(!1);return}x(!0),y.current=setTimeout(async()=>{let{data:b}=await g.from("profiles").select("id").eq("display_name",a.trim()).neq("id",h?.id??"").limit(1);u(!b||0===b.length),x(!1)},500)},[h,g]),N=async a=>{if(h){H(!0),s(null);try{let b=`${h.id}/avatar.png`,{error:c}=await g.storage.from("avatars").upload(b,a,{upsert:!0,contentType:"image/png"});if(c){c.message?.includes("bucket")||c.message?.includes("not found")?s("Storage bucket 'avatars' not found. Run the avatar SQL migration in your Supabase dashboard."):c.message?.includes("Payload too large")?s("Image too large. Please use an image under 5 MB."):s(`Upload failed: ${c.message}`),H(!1);return}let{data:d}=g.storage.from("avatars").getPublicUrl(b),e=d.publicUrl+"?t="+Date.now();F(e),await g.from("profiles").update({avatar_url:e}).eq("id",h.id)}catch{s("Failed to upload avatar. Check your network connection.")}H(!1)}},O=(0,c.useCallback)(async a=>{J(!1),L(null),await N(a)},[h]),P=async()=>{if(!h||n)return;let a=j.trim()||h.display_name;if(a!==h.display_name&&!1===t)return void s("That display name is already taken.");o(!0),q(!1),s(null);let{error:b}=await g.from("profiles").update({display_name:a,arguments_public_by_default:B,theme:z}).eq("id",h.id);if(b){s("Failed to save. Please try again."),o(!1);return}i({...h,display_name:a,arguments_public_by_default:B,theme:z}),"light"===z?document.documentElement.classList.add("light"):document.documentElement.classList.remove("light"),localStorage.setItem("ace_theme",z),o(!1),q(!0),u(null),setTimeout(()=>q(!1),2e3)},Q=async()=>{await g.auth.signOut(),document.documentElement.classList.remove("light"),localStorage.removeItem("ace_theme"),a.push("/"),a.refresh()};return l?(0,b.jsx)("div",{className:"flex items-center justify-center h-dvh",style:{background:"var(--bg)"},children:(0,b.jsx)("div",{className:"w-6 h-6 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"var(--primary)",borderTopColor:"transparent"}})}):h?(0,b.jsxs)("div",{className:"flex flex-col h-dvh",style:{background:"var(--bg)"},children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 px-5 py-3.5 shrink-0",style:{borderBottom:"1px solid var(--border-subtle)"},children:[(0,b.jsxs)("button",{onClick:()=>a.push("/profile"),className:"text-sm px-3.5 py-1.5 rounded-full border cursor-pointer transition-all duration-150",style:{borderColor:"var(--chip-border)",color:"var(--text-secondary)"},children:[(0,b.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"inline mr-1 -mt-0.5",children:(0,b.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),(0,b.jsx)("h1",{className:"text-sm font-medium flex-1",style:{color:"var(--text-primary)"},children:"Settings"})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"px-6 py-6 flex flex-col gap-6 max-w-lg mx-auto",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,b.jsxs)("button",{onClick:()=>D.current?.click(),className:"relative w-20 h-20 rounded-full overflow-hidden cursor-pointer group transition-all duration-200",style:{background:"var(--bg-card)",border:"2px solid var(--border-subtle)"},children:[E?(0,b.jsx)("img",{src:E,alt:"Avatar",className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-2xl font-semibold",style:{color:"var(--primary)"},children:(j??"?").charAt(0).toUpperCase()}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,b.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[(0,b.jsx)("path",{d:"M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z",strokeLinecap:"round",strokeLinejoin:"round"}),(0,b.jsx)("circle",{cx:"12",cy:"13",r:"4"})]})}),G&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"white",borderTopColor:"transparent"}})})]}),(0,b.jsx)("input",{ref:D,type:"file",accept:"image/*",className:"hidden",onChange:a=>{let b=a.target.files?.[0];if(!b||!h)return;if(a.target.value="",!b.type.startsWith("image/"))return void s("Please select an image file (JPG, PNG, etc.).");if(b.size>5242880)return void s("Image must be under 5 MB.");let c=new FileReader;c.onload=()=>{L(c.result),J(!0)},c.readAsDataURL(b)}}),(0,b.jsx)("p",{className:"text-xs cursor-pointer hover:underline",style:{color:"var(--text-muted)"},onClick:()=>D.current?.click(),children:E?"Change photo":"Add profile photo"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium tracking-wider uppercase block mb-2",style:{color:"var(--text-muted)"},children:"Display Name"}),(0,b.jsx)("input",{type:"text",value:j,onChange:a=>{var b;k(b=a.target.value),M(b)},className:"w-full rounded-xl px-4 py-3 text-sm border outline-none placeholder:text-[var(--text-muted)] transition-colors duration-150",style:{background:"var(--bg-light)",borderColor:!1===t?"var(--primary)":!0===t?"var(--take-that)":"var(--border-subtle)",color:"var(--text-primary)"}}),w&&(0,b.jsx)("p",{className:"text-[11px] mt-1.5",style:{color:"var(--text-muted)"},children:"Checking availability..."}),!w&&!1===t&&(0,b.jsx)("p",{className:"text-[11px] mt-1.5",style:{color:"var(--primary)"},children:"This name is already taken."}),!w&&!0===t&&(0,b.jsx)("p",{className:"text-[11px] mt-1.5",style:{color:"var(--take-that)"},children:"Name is available."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium tracking-wider uppercase block mb-2",style:{color:"var(--text-muted)"},children:"Theme"}),(0,b.jsx)("div",{className:"flex gap-2",children:["dark","light"].map(a=>(0,b.jsx)("button",{onClick:()=>{A(a),"light"===a?document.documentElement.classList.add("light"):document.documentElement.classList.remove("light"),localStorage.setItem("ace_theme",a)},className:"flex-1 py-2.5 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer",style:{background:z===a?"var(--hover-overlay)":"var(--bg-light)",color:z===a?"var(--text-primary)":"var(--text-muted)",border:z===a?"1.5px solid var(--selection-border)":"1.5px solid transparent"},children:"dark"===a?"Dark":"Light"},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium tracking-wider uppercase block mb-2",style:{color:"var(--text-muted)"},children:"Default Argument Privacy"}),(0,b.jsx)("div",{className:"flex gap-2",children:[{value:!0,label:"Public"},{value:!1,label:"Private"}].map(a=>(0,b.jsx)("button",{onClick:()=>C(a.value),className:"flex-1 py-2.5 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer",style:{background:B===a.value?"var(--hover-overlay)":"var(--bg-light)",color:B===a.value?"var(--text-primary)":"var(--text-muted)",border:B===a.value?"1.5px solid var(--selection-border)":"1.5px solid transparent"},children:a.label},String(a.value)))}),(0,b.jsx)("p",{className:"text-[11px] mt-1.5",style:{color:"var(--text-muted)"},children:"Public arguments can be shared and appear on your profile."})]}),r&&(0,b.jsx)("p",{className:"text-xs text-center",style:{color:"var(--primary)"},children:r}),(0,b.jsx)("button",{onClick:P,disabled:n||!1===t,className:"w-full py-3 rounded-xl text-white text-sm font-semibold tracking-wide transition-all duration-200 hover:brightness-110 active:scale-[0.98] cursor-pointer disabled:opacity-50",style:{background:"var(--primary)"},children:n?"Saving...":p?"Saved":"Save Changes"}),(0,b.jsx)("div",{className:"h-px",style:{background:"var(--border-subtle)"}}),(0,b.jsx)("button",{onClick:Q,className:"w-full py-3 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer hover:brightness-95",style:{color:"var(--primary)",border:"1px solid rgba(255,56,92,0.2)"},children:"Sign Out"})]})}),K&&(0,b.jsx)(v,{open:I,imageSrc:K,onClose:()=>{J(!1),L(null)},onCropComplete:O})]}):null}a.s(["default",()=>w],45343)}];

//# sourceMappingURL=_be467775._.js.map