{"version":3,"sources":["../../../../src/components/TypingIndicator.tsx","../../../../src/components/SuggestionChip.tsx","../../../../src/components/SuggestionCarousel.tsx","../../../../src/components/IntensityEffects.tsx","../../../../app/chat/page.tsx","../../../../src/agents/lawyer.ts","../../../../src/agents/defendant.ts","../../../../node_modules/framer-motion/src/animation/hooks/animation-controls.ts","../../../../node_modules/framer-motion/src/animation/hooks/use-animation.ts"],"sourcesContent":["\"use client\";\n\nimport { motion } from \"framer-motion\";\n\nexport function TypingIndicator() {\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"self-start px-5 my-1.5 max-w-[70%]\"\n    >\n      <span\n        className=\"text-[10px] font-medium tracking-wider block mb-1\"\n        style={{ color: \"var(--primary)\" }}\n      >\n        PROSECUTION\n      </span>\n      <div\n        className=\"rounded-2xl rounded-tl-md px-4 py-3.5\"\n        style={{ background: \"var(--attorney-bubble)\", boxShadow: \"0 1px 3px rgba(0,0,0,0.2)\" }}\n      >\n        <div className=\"flex gap-1.5 mb-1.5\">\n          {[0, 1, 2].map((i) => (\n            <motion.div\n              key={i}\n              className=\"w-1.5 h-1.5 rounded-full\"\n              style={{ background: \"var(--attorney-text)\" }}\n              animate={{ opacity: [0.2, 0.8, 0.2] }}\n              transition={{\n                duration: 1,\n                repeat: Infinity,\n                delay: i * 0.2,\n              }}\n            />\n          ))}\n        </div>\n        <p className=\"text-xs\" style={{ color: \"var(--text-muted)\" }}>\n          Preparing argument...\n        </p>\n      </div>\n    </motion.div>\n  );\n}\n","\"use client\";\n\nimport { motion } from \"framer-motion\";\nimport { SuggestedReply } from \"@/src/state/types\";\n\ninterface SuggestionChipProps {\n  suggestion: SuggestedReply;\n  onPress: (suggestion: SuggestedReply) => void;\n  index: number;\n  disabled?: boolean;\n}\n\nconst typeDot: Record<string, string> = {\n  objection: \"#FF385C\",\n  evidence: \"#34D399\",\n  dramatic: \"#E0B97A\",\n  strategic: \"#60A5FA\",\n  surrender: \"#DC2626\",\n};\n\nexport function SuggestionChip({ suggestion, onPress, index, disabled }: SuggestionChipProps) {\n  const isSurrender = suggestion.variant === \"surrender\";\n\n  return (\n    <motion.button\n      initial={{ opacity: 0, y: 8 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ delay: index * 0.06, duration: 0.25 }}\n      onClick={() => onPress(suggestion)}\n      disabled={disabled}\n      className={`flex items-center gap-2.5 px-4 py-2.5 rounded-xl border shrink-0\n                  transition-all duration-150 cursor-pointer select-none\n                  hover:bg-white/5 active:scale-[0.97]\n                  disabled:opacity-40 disabled:cursor-not-allowed\n                  max-w-[280px] min-w-[140px]`}\n      style={{\n        background: isSurrender ? \"var(--chip-surrender)\" : \"var(--chip-default)\",\n        borderColor: isSurrender ? \"#991b1b\" : \"var(--chip-border)\",\n      }}\n    >\n      <span\n        className=\"w-2 h-2 rounded-full shrink-0\"\n        style={{ background: typeDot[suggestion.type] ?? \"#717171\" }}\n      />\n      <span\n        className=\"text-[13px] font-medium text-left leading-snug\"\n        style={{ color: isSurrender ? \"#fff\" : \"var(--chip-text)\" }}\n      >\n        {suggestion.text}\n      </span>\n    </motion.button>\n  );\n}\n","\"use client\";\n\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { SuggestionChip } from \"./SuggestionChip\";\nimport { SuggestedReply } from \"@/src/state/types\";\n\ninterface SuggestionCarouselProps {\n  suggestions: SuggestedReply[];\n  onSelect: (suggestion: SuggestedReply) => void;\n  isLoading: boolean;\n  disabled?: boolean;\n}\n\nfunction SkeletonChip({ index }: { index: number }) {\n  return (\n    <div\n      className=\"w-[180px] h-[48px] rounded-xl border shrink-0 p-4 flex flex-col justify-center gap-1.5 skeleton-shimmer\"\n      style={{\n        background: \"var(--chip-default)\",\n        borderColor: \"var(--chip-border)\",\n        animationDelay: `${index * 0.15}s`,\n      }}\n    >\n      <div className=\"h-2 rounded-full bg-white/[0.04] w-4/5\" />\n      <div className=\"h-2 rounded-full bg-white/[0.04] w-3/5\" />\n    </div>\n  );\n}\n\nexport function SuggestionCarousel({\n  suggestions,\n  onSelect,\n  isLoading,\n  disabled,\n}: SuggestionCarouselProps) {\n  if (isLoading) {\n    return (\n      <div className=\"py-2\">\n        <p\n          className=\"text-[11px] font-medium tracking-wider uppercase px-5 mb-1.5\"\n          style={{ color: \"var(--text-muted)\" }}\n        >\n          Preparing your options...\n        </p>\n        <div className=\"flex gap-2.5 px-5 overflow-x-auto hide-scrollbar\">\n          {[0, 1, 2, 3].map((i) => (\n            <SkeletonChip key={i} index={i} />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (suggestions.length === 0) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ duration: 0.3 }}\n      className=\"py-2\"\n    >\n      <p\n        className=\"text-[11px] font-medium tracking-wider uppercase px-5 mb-1.5\"\n        style={{ color: \"var(--text-muted)\" }}\n      >\n        Your response\n      </p>\n      <div className=\"flex gap-2.5 px-5 overflow-x-auto hide-scrollbar pb-1\">\n        <AnimatePresence mode=\"popLayout\">\n          {suggestions.map((suggestion, idx) => (\n            <SuggestionChip\n              key={`${suggestion.text}-${idx}`}\n              suggestion={suggestion}\n              onPress={onSelect}\n              index={idx}\n              disabled={disabled}\n            />\n          ))}\n        </AnimatePresence>\n      </div>\n    </motion.div>\n  );\n}\n","\"use client\";\n\nimport { useEffect } from \"react\";\nimport { motion, AnimatePresence, useAnimation } from \"framer-motion\";\n\n// ‚îÄ‚îÄ‚îÄ Flash Overlay ‚îÄ‚îÄ‚îÄ\n\ninterface FlashOverlayProps {\n  visible: boolean;\n  color?: string;\n}\n\nexport function FlashOverlay({\n  visible,\n  color = \"rgba(255,255,255,0.9)\",\n}: FlashOverlayProps) {\n  return (\n    <AnimatePresence>\n      {visible && (\n        <motion.div\n          initial={{ opacity: 1 }}\n          animate={{ opacity: 0 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.4 }}\n          className=\"fixed inset-0 z-[100] pointer-events-none\"\n          style={{ background: color }}\n        />\n      )}\n    </AnimatePresence>\n  );\n}\n\n// ‚îÄ‚îÄ‚îÄ OBJECTION! Banner ‚îÄ‚îÄ‚îÄ\n\ninterface ObjectionBannerProps {\n  visible: boolean;\n  text?: string;\n}\n\nexport function ObjectionBanner({\n  visible,\n  text = \"OBJECTION!\",\n}: ObjectionBannerProps) {\n  return (\n    <AnimatePresence>\n      {visible && (\n        <motion.div\n          initial={{ opacity: 0, scale: 0.5 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.8 }}\n          transition={{ type: \"spring\", duration: 0.3 }}\n          className=\"fixed inset-0 z-[99] flex items-center justify-center pointer-events-none\"\n        >\n          <div\n            className=\"px-12 py-4 rounded\"\n            style={{\n              background: \"var(--objection)\",\n              boxShadow: \"0 0 60px rgba(255, 68, 68, 0.8)\",\n            }}\n          >\n            <span\n              className=\"text-4xl md:text-5xl font-black text-white tracking-widest\"\n              style={{\n                textShadow: \"2px 2px 4px rgba(0,0,0,0.5)\",\n              }}\n            >\n              {text}\n            </span>\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// ‚îÄ‚îÄ‚îÄ Screen Shake Container ‚îÄ‚îÄ‚îÄ\n\ninterface ShakeContainerProps {\n  shake: boolean;\n  intensity: number;\n  children: React.ReactNode;\n}\n\nexport function ShakeContainer({ shake, intensity, children }: ShakeContainerProps) {\n  const controls = useAnimation();\n\n  useEffect(() => {\n    if (shake && intensity >= 4) {\n      const mag = Math.min((intensity - 3) * 2, 10);\n      controls.start({\n        x: [0, mag, -mag, mag * 0.6, -mag * 0.6, mag * 0.3, 0],\n        transition: { duration: 0.3, ease: \"easeOut\" },\n      });\n    }\n  }, [shake, intensity, controls]);\n\n  return (\n    <motion.div animate={controls} className=\"flex flex-col h-full\">\n      {children}\n    </motion.div>\n  );\n}\n\n// ‚îÄ‚îÄ‚îÄ Gavel Slam ‚îÄ‚îÄ‚îÄ\n\ninterface GavelSlamProps {\n  visible: boolean;\n}\n\nexport function GavelSlam({ visible }: GavelSlamProps) {\n  return (\n    <AnimatePresence>\n      {visible && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.2 }}\n          className=\"fixed inset-0 z-[100] flex flex-col items-center justify-center pointer-events-none\"\n          style={{ background: \"rgba(0,0,0,0.6)\" }}\n        >\n          <motion.span\n            initial={{ scale: 3, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ type: \"spring\", duration: 0.3 }}\n            className=\"text-8xl\"\n          >\n            üî®\n          </motion.span>\n          <motion.span\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.2, duration: 0.3 }}\n            className=\"text-3xl font-black tracking-[0.3em] mt-4\"\n            style={{ color: \"var(--accent)\" }}\n          >\n            ORDER!\n          </motion.span>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// ‚îÄ‚îÄ‚îÄ GUILTY Overlay (surrender / defendant KO) ‚îÄ‚îÄ‚îÄ\n\ninterface GuiltyOverlayProps {\n  visible: boolean;\n  reason?: \"surrender\" | \"ko\";\n}\n\nexport function GuiltyOverlay({ visible, reason = \"surrender\" }: GuiltyOverlayProps) {\n  return (\n    <AnimatePresence>\n      {visible && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.6 }}\n          className=\"fixed inset-0 z-[200] flex flex-col items-center justify-center pointer-events-none\"\n          style={{ background: \"rgba(10,10,26,0.92)\" }}\n        >\n          <motion.span\n            initial={{ scale: 0.3, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ delay: 0.3, type: \"spring\", duration: 0.4 }}\n            className=\"text-6xl md:text-7xl font-black tracking-[0.4em]\"\n            style={{\n              color: \"var(--guilty)\",\n              textShadow: \"0 0 60px rgba(220,38,38,0.6)\",\n            }}\n          >\n            GUILTY\n          </motion.span>\n          <motion.span\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 1, duration: 0.4 }}\n            className=\"text-base mt-6 tracking-wider\"\n            style={{ color: \"var(--text-secondary)\" }}\n          >\n            {reason === \"surrender\"\n              ? \"The defendant has surrendered.\"\n              : \"The prosecution's case was too strong.\"}\n          </motion.span>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// ‚îÄ‚îÄ‚îÄ NOT GUILTY / Victory Overlay (attorney KO) ‚îÄ‚îÄ‚îÄ\n\ninterface VictoryOverlayProps {\n  visible: boolean;\n}\n\nexport function VictoryOverlay({ visible }: VictoryOverlayProps) {\n  return (\n    <AnimatePresence>\n      {visible && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.6 }}\n          className=\"fixed inset-0 z-[200] flex flex-col items-center justify-center pointer-events-none\"\n          style={{ background: \"rgba(10,26,10,0.92)\" }}\n        >\n          <motion.span\n            initial={{ scale: 0.3, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ delay: 0.3, type: \"spring\", duration: 0.4 }}\n            className=\"text-5xl md:text-6xl font-black tracking-[0.3em] text-center\"\n            style={{\n              color: \"#22c55e\",\n              textShadow: \"0 0 60px rgba(34,197,94,0.6)\",\n            }}\n          >\n            NOT GUILTY\n          </motion.span>\n          <motion.span\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 1, duration: 0.4 }}\n            className=\"text-base mt-6 tracking-wider\"\n            style={{ color: \"var(--text-secondary)\" }}\n          >\n            The prosecution&apos;s case has been demolished.\n          </motion.span>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","\"use client\";\n\nimport { useEffect, useRef, useCallback, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useArgumentStore } from \"@/src/state/argumentStore\";\nimport { useHistoryStore } from \"@/src/state/historyStore\";\nimport { getLawyerResponse } from \"@/src/agents/lawyer\";\nimport { getDefendantSuggestions } from \"@/src/agents/defendant\";\nimport { MessageBubble } from \"@/src/components/MessageBubble\";\nimport { TypingIndicator } from \"@/src/components/TypingIndicator\";\nimport { SuggestionCarousel } from \"@/src/components/SuggestionCarousel\";\nimport { HealthBar } from \"@/src/components/HealthBar\";\nimport {\n  FlashOverlay,\n  ObjectionBanner,\n  ShakeContainer,\n  GavelSlam,\n  GuiltyOverlay,\n  VictoryOverlay,\n} from \"@/src/components/IntensityEffects\";\nimport { createClient } from \"@/src/lib/supabase/client\";\nimport type { SuggestedReply, CasePoint, EvidenceCard } from \"@/src/state/types\";\n\n// ‚îÄ‚îÄ‚îÄ Case Summary Modal ‚îÄ‚îÄ‚îÄ\n\nfunction CaseModal({ open, onClose }: { open: boolean; onClose: () => void }) {\n  const { caseData, attorneyPoints, defendantPoints, analysis } = useArgumentStore();\n  if (!caseData) return null;\n\n  const statusColor = (status: string) => {\n    switch (status) {\n      case \"unchallenged\": return \"var(--text-secondary)\";\n      case \"challenged\": return \"var(--hold-it)\";\n      case \"refuted\": return \"var(--objection)\";\n      case \"proven\": return \"var(--take-that)\";\n      default: return \"var(--text-muted)\";\n    }\n  };\n\n  const PointRow = ({ p }: { p: CasePoint }) => (\n    <div className=\"flex gap-3 mb-3\">\n      <span className=\"text-xs font-semibold shrink-0 w-7 pt-0.5\" style={{ color: \"var(--primary)\" }}>{p.id}</span>\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"text-sm leading-relaxed\" style={{ color: \"var(--text-primary)\" }}>{p.claim}</p>\n        <span className=\"text-[10px] font-medium tracking-wider\" style={{ color: statusColor(p.status) }}>{p.status.toUpperCase()}</span>\n      </div>\n    </div>\n  );\n\n  return (\n    <AnimatePresence>\n      {open && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-50 flex items-end justify-center\"\n          style={{ background: \"rgba(0,0,0,0.5)\" }}\n          onClick={onClose}\n        >\n          <motion.div\n            initial={{ y: \"100%\" }}\n            animate={{ y: 0 }}\n            exit={{ y: \"100%\" }}\n            transition={{ type: \"spring\", damping: 28, stiffness: 300 }}\n            className=\"w-full max-w-lg max-h-[80dvh] rounded-t-3xl px-7 pt-6 pb-8 overflow-y-auto\"\n            style={{ background: \"var(--bg-light)\" }}\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/* Handle bar */}\n            <div className=\"flex justify-center mb-4\">\n              <div className=\"w-10 h-1 rounded-full\" style={{ background: \"var(--handle-bar)\" }} />\n            </div>\n            <div className=\"flex justify-between items-center mb-5\">\n              <h2 className=\"text-lg font-semibold\" style={{ color: \"var(--text-primary)\" }}>Case Summary</h2>\n              <button onClick={onClose} className=\"text-sm p-2 cursor-pointer rounded-full hover:brightness-90 transition-colors\" style={{ color: \"var(--text-muted)\" }}>\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\"><path d=\"M12 4L4 12M4 4l8 8\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\"/></svg>\n              </button>\n            </div>\n            <Section title=\"The Case\">\n              <p className=\"text-sm mb-1.5 leading-relaxed\" style={{ color: \"var(--text-secondary)\" }}>{caseData.charge}</p>\n              <p className=\"text-sm mb-1.5 leading-relaxed\" style={{ color: \"var(--text-secondary)\" }}>{caseData.context}</p>\n              <p className=\"text-sm italic\" style={{ color: \"var(--accent)\" }}>&ldquo;{caseData.philosophical_tension}&rdquo;</p>\n            </Section>\n            <Section title=\"Prosecution Points\">\n              {attorneyPoints.map((p) => <PointRow key={p.id} p={p} />)}\n            </Section>\n            <Section title=\"Defense Points\">\n              {defendantPoints.map((p) => <PointRow key={p.id} p={p} />)}\n            </Section>\n            <Section title=\"Score\">\n              <p className=\"text-sm\" style={{ color: \"var(--text-secondary)\" }}>Prosecution: {analysis.attorneyScore.validPoints} valid, {analysis.attorneyScore.fallacies} fallacies</p>\n              <p className=\"text-sm mt-1\" style={{ color: \"var(--text-secondary)\" }}>Defense: {analysis.defendantScore.validPoints} valid, {analysis.defendantScore.fallacies} fallacies</p>\n            </Section>\n            {analysis.fallacies.length > 0 && (\n              <Section title=\"Fallacies Identified\">\n                {analysis.fallacies.map((f, idx) => (\n                  <p key={idx} className=\"text-sm mb-1 leading-relaxed\" style={{ color: \"var(--text-secondary)\" }}>\n                    <span className=\"font-medium\">{f.side}:</span> {f.type} &mdash; {f.context}\n                  </p>\n                ))}\n              </Section>\n            )}\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\nfunction Section({ title, children }: { title: string; children: React.ReactNode }) {\n  return (\n    <div className=\"mb-5\">\n      <h3 className=\"text-xs font-medium tracking-wider uppercase mt-5 mb-2.5\" style={{ color: \"var(--accent)\" }}>{title}</h3>\n      {children}\n    </div>\n  );\n}\n\n// ‚îÄ‚îÄ‚îÄ Evidence Card Tray ‚îÄ‚îÄ‚îÄ\n\nfunction EvidenceTray({\n  cards,\n  onDeploy,\n  disabled,\n}: {\n  cards: EvidenceCard[];\n  onDeploy: (card: EvidenceCard) => void;\n  disabled: boolean;\n}) {\n  const available = cards.filter((c) => !c.used);\n  if (available.length === 0) return null;\n\n  return (\n    <div className=\"px-4 py-2 shrink-0\" style={{ borderTop: \"1px solid var(--border-subtle)\" }}>\n      <p className=\"text-[10px] font-medium tracking-wider uppercase mb-1.5\" style={{ color: \"var(--accent)\" }}>\n        Evidence ({available.length} remaining)\n      </p>\n      <div className=\"flex gap-2 overflow-x-auto pb-1 scrollbar-none\">\n        {cards.map((card) => (\n          <button\n            key={card.id}\n            onClick={() => !card.used && !disabled && onDeploy(card)}\n            disabled={card.used || disabled}\n            className=\"shrink-0 px-3.5 py-2 rounded-xl text-left transition-all duration-150\n                       active:scale-[0.97] cursor-pointer disabled:cursor-not-allowed\"\n            style={{\n              background: card.used ? \"var(--hover-overlay)\" : \"rgba(255,56,92,0.1)\",\n              border: card.used\n                ? \"1px solid var(--border-subtle)\"\n                : \"1px solid rgba(255,56,92,0.3)\",\n              opacity: card.used ? 0.35 : disabled ? 0.5 : 1,\n              maxWidth: 200,\n            }}\n          >\n            <span\n              className=\"text-[10px] font-bold block\"\n              style={{ color: card.used ? \"var(--text-muted)\" : \"var(--primary)\" }}\n            >\n              {card.id} {card.used && \"‚Äî USED\"}\n            </span>\n            <span\n              className=\"text-[11px] leading-tight block mt-0.5 line-clamp-2\"\n              style={{ color: card.used ? \"var(--text-muted)\" : \"var(--text-secondary)\" }}\n            >\n              {card.claim}\n            </span>\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// ‚îÄ‚îÄ‚îÄ Main Chat Page ‚îÄ‚îÄ‚îÄ\n\nexport default function ChatPage() {\n  const router = useRouter();\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const [customText, setCustomText] = useState(\"\");\n  const [showCaseModal, setShowCaseModal] = useState(false);\n  const [busy, setBusy] = useState(false);\n  const [gameOver, setGameOver] = useState(false);\n\n  // Health damage display\n  const [lastDmgAtt, setLastDmgAtt] = useState(0);\n  const [lastDmgDef, setLastDmgDef] = useState(0);\n\n  // Post-game signup prompt (non-logged-in users)\n  const [showSignupPrompt, setShowSignupPrompt] = useState(false);\n  const [gameResult, setGameResult] = useState<\"won\" | \"lost\" | null>(null);\n\n  // Intensity effects\n  const [showFlash, setShowFlash] = useState(false);\n  const [flashColor, setFlashColor] = useState(\"rgba(255,255,255,0.9)\");\n  const [showObjection, setShowObjection] = useState(false);\n  const [objectionText, setObjectionText] = useState(\"OBJECTION!\");\n  const [shakeActive, setShakeActive] = useState(false);\n  const [shakeIntensity, setShakeIntensity] = useState(0);\n  const [showGavel, setShowGavel] = useState(false);\n  const [showGuilty, setShowGuilty] = useState(false);\n  const [guiltyReason, setGuiltyReason] = useState<\"surrender\" | \"ko\">(\"surrender\");\n  const [showVictory, setShowVictory] = useState(false);\n\n  const swipeStartRef = useRef<{ x: number; y: number } | null>(null);\n  const hasOpenedRef = useRef(false);\n  const publicByDefaultRef = useRef<boolean>(true);\n\n  const {\n    caseData,\n    messages,\n    suggestions,\n    evidenceCards,\n    exchangeCount,\n    health,\n    isAttorneyThinking,\n    isSuggestionsLoading,\n    addMessage,\n    setSuggestions,\n    incrementExchange,\n    updatePoints,\n    updateAnalysis,\n    applyDamageToOne,\n    setAttorneyThinking,\n    setSuggestionsLoading,\n    setPhase,\n    setOutcome,\n    useEvidenceCard,\n    persist,\n  } = useArgumentStore();\n\n  const { saveArgument } = useHistoryStore();\n\n  // ‚îÄ‚îÄ‚îÄ Score calculation ‚îÄ‚îÄ‚îÄ\n  const calculateScore = useCallback((outcome: \"won\" | \"lost\") => {\n    const state = useArgumentStore.getState();\n    const { health, exchangeCount } = state;\n    // Damage dealt to the attorney (opponent)\n    const damageDealt = health.maxHP - health.attorneyHP;\n    // Bonus for longer games (more exchanges = more engagement)\n    const exchangeBonus = Math.min(exchangeCount * 3, 30);\n    // Win bonus\n    const winBonus = outcome === \"won\" ? 50 : 0;\n    return damageDealt + exchangeBonus + winBonus;\n  }, []);\n\n  // ‚îÄ‚îÄ‚îÄ Save to history helper ‚îÄ‚îÄ‚îÄ\n  const saveToHistory = useCallback(\n    async (outcome: \"won\" | \"lost\") => {\n      const state = useArgumentStore.getState();\n      if (!state.caseData) return;\n      const score = calculateScore(outcome);\n\n      await saveArgument({\n        caseData: state.caseData,\n        messages: state.messages,\n        outcome,\n        finalHealth: state.health,\n        exchangeCount: state.exchangeCount,\n        score,\n        is_public: publicByDefaultRef.current,\n      });\n\n      // Update profile stats in Supabase\n      const supabase = createClient();\n      const { data: { user } } = await supabase.auth.getUser();\n      if (user) {\n        const field = outcome === \"won\" ? \"wins\" : \"losses\";\n        // Use RPC-style increment via raw update\n        const { data: profile } = await supabase\n          .from(\"profiles\")\n          .select(\"wins, losses, total_score\")\n          .eq(\"id\", user.id)\n          .single();\n\n        if (profile) {\n          const p = profile as { wins: number; losses: number; total_score: number };\n          await supabase\n            .from(\"profiles\")\n            .update({\n              [field]: p[field] + 1,\n              total_score: p.total_score + score,\n            })\n            .eq(\"id\", user.id);\n        }\n      }\n    },\n    [saveArgument, calculateScore]\n  );\n\n  // ‚îÄ‚îÄ‚îÄ Fetch user's privacy preference ‚îÄ‚îÄ‚îÄ\n  useEffect(() => {\n    (async () => {\n      const supabase = createClient();\n      const { data: { user } } = await supabase.auth.getUser();\n      if (user) {\n        const { data } = await supabase\n          .from(\"profiles\")\n          .select(\"arguments_public_by_default\")\n          .eq(\"id\", user.id)\n          .single();\n        if (data) {\n          publicByDefaultRef.current = (data as { arguments_public_by_default: boolean }).arguments_public_by_default;\n        }\n      }\n    })();\n  }, []);\n\n  // ‚îÄ‚îÄ‚îÄ Redirect if no case ‚îÄ‚îÄ‚îÄ\n  useEffect(() => {\n    if (!caseData) router.replace(\"/\");\n  }, [caseData, router]);\n\n  // ‚îÄ‚îÄ‚îÄ Initial attorney opening ‚îÄ‚îÄ‚îÄ\n  useEffect(() => {\n    if (caseData && messages.length === 0 && !hasOpenedRef.current) {\n      hasOpenedRef.current = true;\n      handleAttorneyOpening();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [caseData]);\n\n  // ‚îÄ‚îÄ‚îÄ Auto-scroll ‚îÄ‚îÄ‚îÄ\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages.length, isAttorneyThinking]);\n\n  // ‚îÄ‚îÄ‚îÄ Swipe gestures ‚îÄ‚îÄ‚îÄ\n  const handlePointerDown = useCallback((e: React.PointerEvent) => {\n    swipeStartRef.current = { x: e.clientX, y: e.clientY };\n  }, []);\n\n  const handlePointerUp = useCallback(\n    (e: React.PointerEvent) => {\n      if (!swipeStartRef.current) return;\n      const dx = e.clientX - swipeStartRef.current.x;\n      const dy = e.clientY - swipeStartRef.current.y;\n      swipeStartRef.current = null;\n      if (dx > 100 && Math.abs(dy) < 80) { router.replace(\"/\"); return; }\n      if (dy > 50 && Math.abs(dx) < 50) setShowCaseModal(true);\n    },\n    [router]\n  );\n\n  // ‚îÄ‚îÄ‚îÄ Trigger intensity effects ‚îÄ‚îÄ‚îÄ\n  const triggerIntensityEffects = useCallback((intensity: number) => {\n    if (intensity >= 4) {\n      setShakeIntensity(intensity);\n      setShakeActive(true);\n      setTimeout(() => setShakeActive(false), 350);\n    }\n    if (intensity >= 7 && intensity < 10) {\n      setShowFlash(true);\n      setFlashColor(\"rgba(255,255,255,0.9)\");\n      setTimeout(() => setShowFlash(false), 500);\n      const state = useArgumentStore.getState();\n      const latest = state.messages[state.messages.length - 1];\n      if (latest) {\n        const upper = latest.text.toUpperCase();\n        if (upper.includes(\"OBJECTION\")) { setObjectionText(\"OBJECTION!\"); setShowObjection(true); setTimeout(() => setShowObjection(false), 1200); }\n        else if (upper.includes(\"HOLD IT\")) { setObjectionText(\"HOLD IT!\"); setShowObjection(true); setTimeout(() => setShowObjection(false), 1200); }\n        else if (upper.includes(\"TAKE THAT\")) { setObjectionText(\"TAKE THAT!\"); setShowObjection(true); setTimeout(() => setShowObjection(false), 1200); }\n      }\n    }\n    if (intensity >= 10) {\n      setShowGavel(true);\n      setShowFlash(true);\n      setFlashColor(\"rgba(255,255,255,0.9)\");\n      setTimeout(() => { setShowFlash(false); setShowGavel(false); }, 1500);\n    }\n  }, []);\n\n  // ‚îÄ‚îÄ‚îÄ Handle KO (win or loss by health) ‚îÄ‚îÄ‚îÄ\n  const handleKO = useCallback(\n    async (result: \"attorney_ko\" | \"defendant_ko\") => {\n      setGameOver(true);\n      setSuggestions([]);\n      await new Promise((r) => setTimeout(r, 800));\n\n      const outcome = result === \"attorney_ko\" ? \"won\" : \"lost\";\n\n      if (result === \"attorney_ko\") {\n        setShowVictory(true);\n        triggerIntensityEffects(10);\n      } else {\n        setGuiltyReason(\"ko\");\n        setShowGuilty(true);\n        triggerIntensityEffects(10);\n      }\n\n      await saveToHistory(outcome);\n      persist();\n\n      // Check if user is logged in\n      const supabaseClient = createClient();\n      const { data: { user } } = await supabaseClient.auth.getUser();\n\n      setTimeout(() => {\n        setShowVictory(false);\n        setShowGuilty(false);\n        setOutcome(outcome);\n\n        if (!user) {\n          // Show signup prompt for non-logged-in users\n          setGameResult(outcome);\n          setShowSignupPrompt(true);\n        } else {\n          router.replace(\"/\");\n        }\n      }, 3500);\n    },\n    [triggerIntensityEffects, saveToHistory, persist, setOutcome, setSuggestions, router]\n  );\n\n  // ‚îÄ‚îÄ‚îÄ Attorney opening ‚îÄ‚îÄ‚îÄ\n  const handleAttorneyOpening = async () => {\n    if (!caseData) return;\n    setAttorneyThinking(true);\n    await new Promise((r) => setTimeout(r, 1500));\n    addMessage(caseData.opening_statement, \"attorney\", 5);\n    setAttorneyThinking(false);\n    triggerIntensityEffects(5);\n\n    setSuggestionsLoading(true);\n    try {\n      const defResponse = await getDefendantSuggestions(0);\n      setSuggestions(defResponse.suggestions);\n    } catch {\n      setSuggestions([\n        { text: \"OBJECTION! I demand to see the evidence!\", type: \"objection\", variant: \"default\" },\n        { text: \"That opening statement is misleading!\", type: \"strategic\", variant: \"default\" },\n        { text: \"The defense is ready to present its case!\", type: \"dramatic\", variant: \"default\" },\n        { text: \"Let's examine the facts more carefully.\", type: \"strategic\", variant: \"default\" },\n      ]);\n    }\n    setSuggestionsLoading(false);\n  };\n\n  // ‚îÄ‚îÄ‚îÄ Handle user message (core game loop) ‚îÄ‚îÄ‚îÄ\n  const handleUserMessage = async (text: string) => {\n    if (busy || gameOver || !text.trim()) return;\n    setBusy(true);\n\n    const isSurrender = text === \"...I surrender.\";\n\n    addMessage(text.trim(), \"user\");\n    incrementExchange();\n    setSuggestions([]);\n    setCustomText(\"\");\n\n    // Check if user deployed evidence ‚Äî look for evidence card IDs in the message\n    let evidenceBonus = 0;\n    const availableCards = useArgumentStore.getState().evidenceCards.filter((c) => !c.used);\n    for (const card of availableCards) {\n      if (text.toUpperCase().includes(card.id)) {\n        useEvidenceCard(card.id);\n        evidenceBonus += 10;\n        break; // one card per message\n      }\n    }\n\n    if (isSurrender) {\n      setPhase(\"surrender\");\n      await new Promise((r) => setTimeout(r, 2000));\n\n      setAttorneyThinking(true);\n      try {\n        const lawyerResp = await getLawyerResponse(text, true);\n        addMessage(lawyerResp.message, \"attorney\", 10);\n        setAttorneyThinking(false);\n        triggerIntensityEffects(10);\n        await new Promise((r) => setTimeout(r, 1500));\n\n        setGuiltyReason(\"surrender\");\n        setShowGuilty(true);\n        await saveToHistory(\"lost\");\n        persist();\n\n        setTimeout(() => {\n          setOutcome(\"lost\");\n          setShowGuilty(false);\n          router.replace(\"/\");\n        }, 3000);\n      } catch {\n        setAttorneyThinking(false);\n      }\n      setBusy(false);\n      return;\n    }\n\n    // Normal flow ‚Äî two-phase damage: user's attack lands first, then attorney counters\n    setAttorneyThinking(true);\n    try {\n      const lawyerResp = await getLawyerResponse(text);\n\n      // Phase 1: User's argument damages the attorney\n      const userDmg = lawyerResp.damage_to_attorney + evidenceBonus;\n      setLastDmgAtt(userDmg);\n      setLastDmgDef(0);\n      const koPhase1 = applyDamageToOne(\"attorney\", userDmg);\n\n      // Update case points & analysis (shared by KO and normal paths)\n      if (lawyerResp.updated_points.length > 0) updatePoints(lawyerResp.updated_points);\n      if (lawyerResp.fallacies_identified.length > 0 || lawyerResp.assumptions_challenged.length > 0) {\n        updateAnalysis(lawyerResp.fallacies_identified, lawyerResp.assumptions_challenged);\n      }\n\n      if (koPhase1 !== \"none\") {\n        // Show the attorney's final message before KO\n        addMessage(lawyerResp.message, \"attorney\", lawyerResp.intensity_level);\n        setAttorneyThinking(false);\n        triggerIntensityEffects(lawyerResp.intensity_level);\n        await handleKO(koPhase1);\n        setBusy(false);\n        return;\n      }\n\n      // Brief pause to let user see their damage land\n      await new Promise((r) => setTimeout(r, 600));\n\n      addMessage(lawyerResp.message, \"attorney\", lawyerResp.intensity_level);\n      setAttorneyThinking(false);\n      triggerIntensityEffects(lawyerResp.intensity_level);\n\n      // Phase 2: Attorney's counter-argument damages the defendant\n      await new Promise((r) => setTimeout(r, 400));\n      setLastDmgAtt(0);\n      setLastDmgDef(lawyerResp.damage_to_defendant);\n      const koPhase2 = applyDamageToOne(\"defendant\", lawyerResp.damage_to_defendant);\n\n      if (koPhase2 !== \"none\") {\n        await handleKO(koPhase2);\n        setBusy(false);\n        return;\n      }\n\n      // Get new suggestions\n      setSuggestionsLoading(true);\n      const currentExchange = useArgumentStore.getState().exchangeCount;\n      try {\n        const defResponse = await getDefendantSuggestions(currentExchange);\n        setSuggestions(defResponse.suggestions);\n      } catch {\n        setSuggestions([\n          { text: \"OBJECTION! That argument is flawed!\", type: \"objection\", variant: \"default\" },\n          { text: \"Let me present my evidence.\", type: \"evidence\", variant: \"default\" },\n          { text: \"The truth will prevail!\", type: \"dramatic\", variant: \"default\" },\n        ]);\n      }\n      setSuggestionsLoading(false);\n      persist();\n    } catch {\n      setAttorneyThinking(false);\n      setSuggestionsLoading(false);\n    }\n\n    setBusy(false);\n  };\n\n  const handleChipSelect = useCallback(\n    (suggestion: SuggestedReply) => { handleUserMessage(suggestion.text); },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [busy, gameOver]\n  );\n\n  const handleSendCustom = useCallback(() => {\n    if (customText.trim()) handleUserMessage(customText.trim());\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customText, busy, gameOver]);\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => { if (e.key === \"Enter\" && !e.shiftKey) { e.preventDefault(); handleSendCustom(); } },\n    [handleSendCustom]\n  );\n\n  if (!caseData) return null;\n\n  return (\n    <div\n      className=\"h-dvh flex flex-col select-none overflow-hidden\"\n      style={{ background: \"var(--bg)\" }}\n      onPointerDown={handlePointerDown}\n      onPointerUp={handlePointerUp}\n    >\n      <ShakeContainer shake={shakeActive} intensity={shakeIntensity}>\n        {/* Header */}\n        <div className=\"flex items-center justify-between px-5 py-3.5 shrink-0\" style={{ borderBottom: \"1px solid var(--border-subtle)\" }}>\n          <h1 className=\"text-sm font-medium truncate flex-1 mr-3\" style={{ color: \"var(--text-primary)\" }}>{caseData.title}</h1>\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-xs font-medium tabular-nums\" style={{ color: \"var(--text-muted)\" }}>\n              Round {exchangeCount}\n            </span>\n            <button\n              onClick={() => setShowCaseModal(true)}\n              className=\"text-xs px-3.5 py-1.5 rounded-full border cursor-pointer transition-all duration-150\"\n              style={{ borderColor: \"var(--chip-border)\", color: \"var(--text-secondary)\" }}\n            >\n              Case Details\n            </button>\n          </div>\n        </div>\n\n        {/* Issue Banner */}\n        <div\n          className=\"px-5 py-3 shrink-0\"\n          style={{ background: \"var(--hover-overlay)\", borderBottom: \"1px solid var(--border-subtle)\" }}\n        >\n          <p className=\"text-xs font-medium\" style={{ color: \"var(--text-secondary)\" }}>\n            <span style={{ color: \"var(--text-muted)\" }}>Charged with: </span>\n            {caseData.charge}\n          </p>\n          {caseData.philosophical_tension && (\n            <p className=\"text-[11px] italic mt-0.5\" style={{ color: \"var(--text-muted)\" }}>\n              &ldquo;{caseData.philosophical_tension}&rdquo;\n            </p>\n          )}\n        </div>\n\n        {/* Health Bar */}\n        <HealthBar health={health} lastDamageToAttorney={lastDmgAtt} lastDamageToDefendant={lastDmgDef} />\n\n        {/* Messages */}\n        <div className=\"flex-1 overflow-y-auto flex flex-col py-2\">\n          <AnimatePresence mode=\"popLayout\">\n            {messages.map((msg) => (\n              <MessageBubble key={msg.id} message={msg} />\n            ))}\n          </AnimatePresence>\n          {isAttorneyThinking && <TypingIndicator />}\n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Evidence Card Tray */}\n        {!gameOver && evidenceCards.filter((c) => !c.used).length > 0 && (\n          <EvidenceTray\n            cards={evidenceCards}\n            onDeploy={(card) => {\n              handleUserMessage(`TAKE THAT! I present ${card.id} ‚Äî ${card.claim}! The evidence clearly shows: ${card.evidence}`);\n            }}\n            disabled={busy}\n          />\n        )}\n\n        {/* Suggestion Carousel */}\n        {!gameOver && (\n          <SuggestionCarousel\n            suggestions={suggestions}\n            onSelect={handleChipSelect}\n            isLoading={isSuggestionsLoading}\n            disabled={busy}\n          />\n        )}\n\n        {/* Custom input */}\n        {!gameOver && (\n          <div className=\"flex items-center gap-3 px-5 py-3 shrink-0\" style={{ borderTop: \"1px solid var(--border-subtle)\" }}>\n            <input\n              type=\"text\"\n              placeholder=\"Type your own argument...\"\n              value={customText}\n              onChange={(e) => setCustomText(e.target.value)}\n              onKeyDown={handleKeyDown}\n              disabled={busy}\n              className=\"flex-1 rounded-xl px-4 py-3 text-sm border outline-none disabled:opacity-50\n                         placeholder:text-[var(--text-muted)] transition-colors duration-150\"\n              style={{ background: \"var(--bg-light)\", borderColor: \"var(--border-subtle)\", color: \"var(--text-primary)\" }}\n            />\n            <button\n              onClick={handleSendCustom}\n              disabled={!customText.trim() || busy}\n              className=\"w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-150\n                         cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed hover:brightness-110 active:scale-[0.96]\"\n              style={{ background: \"var(--primary)\" }}\n            >\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <path d=\"M5 12h14M13 5l7 7-7 7\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n              </svg>\n            </button>\n          </div>\n        )}\n      </ShakeContainer>\n\n      {/* Overlays */}\n      <FlashOverlay visible={showFlash} color={flashColor} />\n      <ObjectionBanner visible={showObjection} text={objectionText} />\n      <GavelSlam visible={showGavel} />\n      <GuiltyOverlay visible={showGuilty} reason={guiltyReason} />\n      <VictoryOverlay visible={showVictory} />\n\n      {/* Case Modal */}\n      <CaseModal open={showCaseModal} onClose={() => setShowCaseModal(false)} />\n\n      {/* Signup Prompt for non-logged-in users after game ends */}\n      <AnimatePresence>\n        {showSignupPrompt && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 z-[200] flex items-center justify-center\"\n            style={{ background: \"rgba(0,0,0,0.7)\", backdropFilter: \"blur(8px)\" }}\n          >\n            <motion.div\n              initial={{ opacity: 0, scale: 0.9, y: 20 }}\n              animate={{ opacity: 1, scale: 1, y: 0 }}\n              exit={{ opacity: 0, scale: 0.9, y: 20 }}\n              transition={{ type: \"spring\", damping: 25, stiffness: 300 }}\n              className=\"mx-6 w-full max-w-sm rounded-3xl p-8 text-center\"\n              style={{ background: \"var(--bg-card)\", boxShadow: \"0 24px 64px rgba(0,0,0,0.5)\" }}\n            >\n              <div className=\"text-4xl mb-4\">\n                {gameResult === \"won\" ? \"üèÜ\" : \"‚öñÔ∏è\"}\n              </div>\n              <h2 className=\"text-xl font-semibold mb-2\" style={{ color: \"var(--text-primary)\" }}>\n                {gameResult === \"won\" ? \"You Won!\" : \"Case Lost\"}\n              </h2>\n              <p className=\"text-sm mb-6 leading-relaxed\" style={{ color: \"var(--text-muted)\" }}>\n                {gameResult === \"won\"\n                  ? \"Save your victory, climb the leaderboard, and challenge friends by creating an account.\"\n                  : \"Track your progress, improve your win rate, and compete with friends by creating an account.\"}\n              </p>\n              <button\n                onClick={() => router.push(\"/login\")}\n                className=\"w-full py-3 rounded-full text-white text-sm font-semibold tracking-widest\n                           transition-all duration-200 hover:brightness-110 active:scale-[0.98] cursor-pointer mb-3\"\n                style={{ background: \"var(--primary)\", boxShadow: \"0 4px 20px rgba(255,56,92,0.3)\" }}\n              >\n                CREATE ACCOUNT\n              </button>\n              <button\n                onClick={() => { setShowSignupPrompt(false); router.replace(\"/\"); }}\n                className=\"w-full py-2.5 text-sm font-medium cursor-pointer transition-all duration-150 hover:opacity-80\"\n                style={{ color: \"var(--text-muted)\" }}\n              >\n                Maybe Later\n              </button>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","import { LawyerResponse } from '@/src/state/types';\nimport { callLawyer } from './agentRouter';\n\nexport async function getLawyerResponse(\n  userMessage: string,\n  surrender: boolean = false\n): Promise<LawyerResponse> {\n  const json = await callLawyer(userMessage, surrender);\n  const data = JSON.parse(json) as LawyerResponse;\n\n  if (!data.message) {\n    throw new Error('Invalid lawyer response: missing message');\n  }\n\n  return {\n    message: data.message,\n    updated_points: data.updated_points ?? [],\n    fallacies_identified: data.fallacies_identified ?? [],\n    assumptions_challenged: data.assumptions_challenged ?? [],\n    intensity_level: Math.min(10, Math.max(1, data.intensity_level ?? 3)),\n    damage_to_attorney: Math.min(25, Math.max(0, data.damage_to_attorney ?? 5)),\n    damage_to_defendant: Math.min(25, Math.max(0, data.damage_to_defendant ?? 5)),\n  };\n}\n","import { DefendantResponse, SuggestedReply } from '@/src/state/types';\nimport { callDefendant } from './agentRouter';\n\nexport async function getDefendantSuggestions(\n  exchangeCount: number\n): Promise<DefendantResponse> {\n  const json = await callDefendant(exchangeCount);\n  const data = JSON.parse(json) as DefendantResponse;\n\n  if (!data.suggestions || data.suggestions.length === 0) {\n    throw new Error('Invalid defendant response: no suggestions');\n  }\n\n  const suggestions: SuggestedReply[] = data.suggestions.map((s) => ({\n    text: s.text,\n    type: s.type || 'strategic',\n    variant: s.variant || 'default',\n  }));\n\n  // Ensure surrender chip is last if present\n  const surrenderIdx = suggestions.findIndex((s) => s.variant === 'surrender');\n  if (surrenderIdx >= 0 && surrenderIdx !== suggestions.length - 1) {\n    const [surrenderChip] = suggestions.splice(surrenderIdx, 1);\n    suggestions.push(surrenderChip);\n  }\n\n  // If past 6 exchanges and no surrender chip, add one\n  if (exchangeCount >= 6 && !suggestions.find((s) => s.variant === 'surrender')) {\n    suggestions.push({\n      text: '...I surrender.',\n      type: 'surrender',\n      variant: 'surrender',\n    });\n  }\n\n  return {\n    suggestions,\n    defense_analysis: data.defense_analysis ?? 'No analysis',\n    recommended_strategy: data.recommended_strategy ?? 'No recommendation',\n  };\n}\n","import {\n    animateVisualElement,\n    setTarget,\n    type AnimationDefinition,\n    type LegacyAnimationControls,\n    type VisualElement,\n} from \"motion-dom\"\nimport { invariant } from \"motion-utils\"\n\nfunction stopAnimation(visualElement: VisualElement) {\n    visualElement.values.forEach((value) => value.stop())\n}\n\nfunction setVariants(visualElement: VisualElement, variantLabels: string[]) {\n    const reversedLabels = [...variantLabels].reverse()\n\n    reversedLabels.forEach((key) => {\n        const variant = visualElement.getVariant(key)\n        variant && setTarget(visualElement, variant)\n\n        if (visualElement.variantChildren) {\n            visualElement.variantChildren.forEach((child) => {\n                setVariants(child, variantLabels)\n            })\n        }\n    })\n}\n\nexport function setValues(\n    visualElement: VisualElement,\n    definition: AnimationDefinition\n) {\n    if (Array.isArray(definition)) {\n        return setVariants(visualElement, definition)\n    } else if (typeof definition === \"string\") {\n        return setVariants(visualElement, [definition])\n    } else {\n        setTarget(visualElement, definition as any)\n    }\n}\n\n/**\n * @public\n */\nexport function animationControls(): LegacyAnimationControls {\n    /**\n     * Track whether the host component has mounted.\n     */\n    let hasMounted = false\n\n    /**\n     * A collection of linked component animation controls.\n     */\n    const subscribers = new Set<VisualElement>()\n\n    const controls: LegacyAnimationControls = {\n        subscribe(visualElement) {\n            subscribers.add(visualElement)\n            return () => void subscribers.delete(visualElement)\n        },\n\n        start(definition, transitionOverride) {\n            invariant(\n                hasMounted,\n                \"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.\"\n            )\n\n            const animations: Array<Promise<any>> = []\n            subscribers.forEach((visualElement) => {\n                animations.push(\n                    animateVisualElement(visualElement, definition, {\n                        transitionOverride,\n                    })\n                )\n            })\n\n            return Promise.all(animations)\n        },\n\n        set(definition) {\n            invariant(\n                hasMounted,\n                \"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook.\"\n            )\n\n            return subscribers.forEach((visualElement) => {\n                setValues(visualElement, definition)\n            })\n        },\n\n        stop() {\n            subscribers.forEach((visualElement) => {\n                stopAnimation(visualElement)\n            })\n        },\n\n        mount() {\n            hasMounted = true\n\n            return () => {\n                hasMounted = false\n                controls.stop()\n            }\n        },\n    }\n\n    return controls\n}\n","\"use client\"\n\nimport { LegacyAnimationControls } from \"motion-dom\"\nimport { useConstant } from \"../../utils/use-constant\"\nimport { useIsomorphicLayoutEffect } from \"../../utils/use-isomorphic-effect\"\nimport { animationControls } from \"./animation-controls\"\n\n/**\n * Creates `LegacyAnimationControls`, which can be used to manually start, stop\n * and sequence animations on one or more components.\n *\n * The returned `LegacyAnimationControls` should be passed to the `animate` property\n * of the components you want to animate.\n *\n * These components can then be animated with the `start` method.\n *\n * ```jsx\n * import * as React from 'react'\n * import { motion, useAnimation } from 'framer-motion'\n *\n * export function MyComponent(props) {\n *    const controls = useAnimation()\n *\n *    controls.start({\n *        x: 100,\n *        transition: { duration: 0.5 },\n *    })\n *\n *    return <motion.div animate={controls} />\n * }\n * ```\n *\n * @returns Animation controller with `start` and `stop` methods\n *\n * @public\n */\nexport function useAnimationControls(): LegacyAnimationControls {\n    const controls = useConstant(animationControls)\n\n    useIsomorphicLayoutEffect(controls.mount, [])\n\n    return controls\n}\n\nexport const useAnimation = useAnimationControls\n"],"names":[],"mappings":"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","ignoreList":[7,8]}