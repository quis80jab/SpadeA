{"version":3,"sources":["../../../../node_modules/normalize-wheel/src/UserAgent_DEPRECATED.js","../../../../node_modules/normalize-wheel/src/ExecutionEnvironment.js","../../../../node_modules/normalize-wheel/src/isEventSupported.js","../../../../node_modules/normalize-wheel/src/normalizeWheel.js","../../../../node_modules/normalize-wheel/index.js","../../../../src/components/AvatarCropModal.tsx","../../../../app/settings/page.tsx","../../../../node_modules/src/helpers.ts","../../../../node_modules/src/Cropper.tsx"],"sourcesContent":["/**\n * Copyright 2004-present Facebook. All Rights Reserved.\n *\n * @providesModule UserAgent_DEPRECATED\n */\n\n/**\n *  Provides entirely client-side User Agent and OS detection. You should prefer\n *  the non-deprecated UserAgent module when possible, which exposes our\n *  authoritative server-side PHP-based detection to the client.\n *\n *  Usage is straightforward:\n *\n *    if (UserAgent_DEPRECATED.ie()) {\n *      //  IE\n *    }\n *\n *  You can also do version checks:\n *\n *    if (UserAgent_DEPRECATED.ie() >= 7) {\n *      //  IE7 or better\n *    }\n *\n *  The browser functions will return NaN if the browser does not match, so\n *  you can also do version compares the other way:\n *\n *    if (UserAgent_DEPRECATED.ie() < 7) {\n *      //  IE6 or worse\n *    }\n *\n *  Note that the version is a float and may include a minor version number,\n *  so you should always use range operators to perform comparisons, not\n *  strict equality.\n *\n *  **Note:** You should **strongly** prefer capability detection to browser\n *  version detection where it's reasonable:\n *\n *    http://www.quirksmode.org/js/support.html\n *\n *  Further, we have a large number of mature wrapper functions and classes\n *  which abstract away many browser irregularities. Check the documentation,\n *  grep for things, or ask on javascript@lists.facebook.com before writing yet\n *  another copy of \"event || window.event\".\n *\n */\n\nvar _populated = false;\n\n// Browsers\nvar _ie, _firefox, _opera, _webkit, _chrome;\n\n// Actual IE browser for compatibility mode\nvar _ie_real_version;\n\n// Platforms\nvar _osx, _windows, _linux, _android;\n\n// Architectures\nvar _win64;\n\n// Devices\nvar _iphone, _ipad, _native;\n\nvar _mobile;\n\nfunction _populate() {\n  if (_populated) {\n    return;\n  }\n\n  _populated = true;\n\n  // To work around buggy JS libraries that can't handle multi-digit\n  // version numbers, Opera 10's user agent string claims it's Opera\n  // 9, then later includes a Version/X.Y field:\n  //\n  // Opera/9.80 (foo) Presto/2.2.15 Version/10.10\n  var uas = navigator.userAgent;\n  var agent = /(?:MSIE.(\\d+\\.\\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\\d+\\.\\d+))|(?:Opera(?:.+Version.|.)(\\d+\\.\\d+))|(?:AppleWebKit.(\\d+(?:\\.\\d+)?))|(?:Trident\\/\\d+\\.\\d+.*rv:(\\d+\\.\\d+))/.exec(uas);\n  var os    = /(Mac OS X)|(Windows)|(Linux)/.exec(uas);\n\n  _iphone = /\\b(iPhone|iP[ao]d)/.exec(uas);\n  _ipad = /\\b(iP[ao]d)/.exec(uas);\n  _android = /Android/i.exec(uas);\n  _native = /FBAN\\/\\w+;/i.exec(uas);\n  _mobile = /Mobile/i.exec(uas);\n\n  // Note that the IE team blog would have you believe you should be checking\n  // for 'Win64; x64'.  But MSDN then reveals that you can actually be coming\n  // from either x64 or ia64;  so ultimately, you should just check for Win64\n  // as in indicator of whether you're in 64-bit IE.  32-bit IE on 64-bit\n  // Windows will send 'WOW64' instead.\n  _win64 = !!(/Win64/.exec(uas));\n\n  if (agent) {\n    _ie = agent[1] ? parseFloat(agent[1]) : (\n          agent[5] ? parseFloat(agent[5]) : NaN);\n    // IE compatibility mode\n    if (_ie && document && document.documentMode) {\n      _ie = document.documentMode;\n    }\n    // grab the \"true\" ie version from the trident token if available\n    var trident = /(?:Trident\\/(\\d+.\\d+))/.exec(uas);\n    _ie_real_version = trident ? parseFloat(trident[1]) + 4 : _ie;\n\n    _firefox = agent[2] ? parseFloat(agent[2]) : NaN;\n    _opera   = agent[3] ? parseFloat(agent[3]) : NaN;\n    _webkit  = agent[4] ? parseFloat(agent[4]) : NaN;\n    if (_webkit) {\n      // We do not add the regexp to the above test, because it will always\n      // match 'safari' only since 'AppleWebKit' appears before 'Chrome' in\n      // the userAgent string.\n      agent = /(?:Chrome\\/(\\d+\\.\\d+))/.exec(uas);\n      _chrome = agent && agent[1] ? parseFloat(agent[1]) : NaN;\n    } else {\n      _chrome = NaN;\n    }\n  } else {\n    _ie = _firefox = _opera = _chrome = _webkit = NaN;\n  }\n\n  if (os) {\n    if (os[1]) {\n      // Detect OS X version.  If no version number matches, set _osx to true.\n      // Version examples:  10, 10_6_1, 10.7\n      // Parses version number as a float, taking only first two sets of\n      // digits.  If only one set of digits is found, returns just the major\n      // version number.\n      var ver = /(?:Mac OS X (\\d+(?:[._]\\d+)?))/.exec(uas);\n\n      _osx = ver ? parseFloat(ver[1].replace('_', '.')) : true;\n    } else {\n      _osx = false;\n    }\n    _windows = !!os[2];\n    _linux   = !!os[3];\n  } else {\n    _osx = _windows = _linux = false;\n  }\n}\n\nvar UserAgent_DEPRECATED = {\n\n  /**\n   *  Check if the UA is Internet Explorer.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  ie: function() {\n    return _populate() || _ie;\n  },\n\n  /**\n   * Check if we're in Internet Explorer compatibility mode.\n   *\n   * @return bool true if in compatibility mode, false if\n   * not compatibility mode or not ie\n   */\n  ieCompatibilityMode: function() {\n    return _populate() || (_ie_real_version > _ie);\n  },\n\n\n  /**\n   * Whether the browser is 64-bit IE.  Really, this is kind of weak sauce;  we\n   * only need this because Skype can't handle 64-bit IE yet.  We need to remove\n   * this when we don't need it -- tracked by #601957.\n   */\n  ie64: function() {\n    return UserAgent_DEPRECATED.ie() && _win64;\n  },\n\n  /**\n   *  Check if the UA is Firefox.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  firefox: function() {\n    return _populate() || _firefox;\n  },\n\n\n  /**\n   *  Check if the UA is Opera.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  opera: function() {\n    return _populate() || _opera;\n  },\n\n\n  /**\n   *  Check if the UA is WebKit.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  webkit: function() {\n    return _populate() || _webkit;\n  },\n\n  /**\n   *  For Push\n   *  WILL BE REMOVED VERY SOON. Use UserAgent_DEPRECATED.webkit\n   */\n  safari: function() {\n    return UserAgent_DEPRECATED.webkit();\n  },\n\n  /**\n   *  Check if the UA is a Chrome browser.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  chrome : function() {\n    return _populate() || _chrome;\n  },\n\n\n  /**\n   *  Check if the user is running Windows.\n   *\n   *  @return bool `true' if the user's OS is Windows.\n   */\n  windows: function() {\n    return _populate() || _windows;\n  },\n\n\n  /**\n   *  Check if the user is running Mac OS X.\n   *\n   *  @return float|bool   Returns a float if a version number is detected,\n   *                       otherwise true/false.\n   */\n  osx: function() {\n    return _populate() || _osx;\n  },\n\n  /**\n   * Check if the user is running Linux.\n   *\n   * @return bool `true' if the user's OS is some flavor of Linux.\n   */\n  linux: function() {\n    return _populate() || _linux;\n  },\n\n  /**\n   * Check if the user is running on an iPhone or iPod platform.\n   *\n   * @return bool `true' if the user is running some flavor of the\n   *    iPhone OS.\n   */\n  iphone: function() {\n    return _populate() || _iphone;\n  },\n\n  mobile: function() {\n    return _populate() || (_iphone || _ipad || _android || _mobile);\n  },\n\n  nativeApp: function() {\n    // webviews inside of the native apps\n    return _populate() || _native;\n  },\n\n  android: function() {\n    return _populate() || _android;\n  },\n\n  ipad: function() {\n    return _populate() || _ipad;\n  }\n};\n\nmodule.exports = UserAgent_DEPRECATED;\n","/**\n * Copyright (c) 2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ExecutionEnvironment\n */\n\n/*jslint evil: true */\n\n'use strict';\n\nvar canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\n/**\n * Simple, lightweight module assisting with the detection and context of\n * Worker. Helps avoid circular dependencies and allows code to reason about\n * whether or not they are in a Worker, even if they never include the main\n * `ReactWorker` dependency.\n */\nvar ExecutionEnvironment = {\n\n  canUseDOM: canUseDOM,\n\n  canUseWorkers: typeof Worker !== 'undefined',\n\n  canUseEventListeners:\n    canUseDOM && !!(window.addEventListener || window.attachEvent),\n\n  canUseViewport: canUseDOM && !!window.screen,\n\n  isInWorker: !canUseDOM // For now, this is true - might change in the future.\n\n};\n\nmodule.exports = ExecutionEnvironment;\n","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule isEventSupported\n */\n\n'use strict';\n\nvar ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar useHasFeature;\nif (ExecutionEnvironment.canUseDOM) {\n  useHasFeature =\n    document.implementation &&\n    document.implementation.hasFeature &&\n    // always returns true in newer browsers as per the standard.\n    // @see http://dom.spec.whatwg.org/#dom-domimplementation-hasfeature\n    document.implementation.hasFeature('', '') !== true;\n}\n\n/**\n * Checks if an event is supported in the current execution environment.\n *\n * NOTE: This will not work correctly for non-generic events such as `change`,\n * `reset`, `load`, `error`, and `select`.\n *\n * Borrows from Modernizr.\n *\n * @param {string} eventNameSuffix Event name, e.g. \"click\".\n * @param {?boolean} capture Check if the capture phase is supported.\n * @return {boolean} True if the event is supported.\n * @internal\n * @license Modernizr 3.0.0pre (Custom Build) | MIT\n */\nfunction isEventSupported(eventNameSuffix, capture) {\n  if (!ExecutionEnvironment.canUseDOM ||\n      capture && !('addEventListener' in document)) {\n    return false;\n  }\n\n  var eventName = 'on' + eventNameSuffix;\n  var isSupported = eventName in document;\n\n  if (!isSupported) {\n    var element = document.createElement('div');\n    element.setAttribute(eventName, 'return;');\n    isSupported = typeof element[eventName] === 'function';\n  }\n\n  if (!isSupported && useHasFeature && eventNameSuffix === 'wheel') {\n    // This is the only way to test support for the `wheel` event in IE9+.\n    isSupported = document.implementation.hasFeature('Events.wheel', '3.0');\n  }\n\n  return isSupported;\n}\n\nmodule.exports = isEventSupported;\n","/**\n * Copyright (c) 2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule normalizeWheel\n * @typechecks\n */\n\n'use strict';\n\nvar UserAgent_DEPRECATED = require('./UserAgent_DEPRECATED');\n\nvar isEventSupported = require('./isEventSupported');\n\n\n// Reasonable defaults\nvar PIXEL_STEP  = 10;\nvar LINE_HEIGHT = 40;\nvar PAGE_HEIGHT = 800;\n\n/**\n * Mouse wheel (and 2-finger trackpad) support on the web sucks.  It is\n * complicated, thus this doc is long and (hopefully) detailed enough to answer\n * your questions.\n *\n * If you need to react to the mouse wheel in a predictable way, this code is\n * like your bestest friend. * hugs *\n *\n * As of today, there are 4 DOM event types you can listen to:\n *\n *   'wheel'                -- Chrome(31+), FF(17+), IE(9+)\n *   'mousewheel'           -- Chrome, IE(6+), Opera, Safari\n *   'MozMousePixelScroll'  -- FF(3.5 only!) (2010-2013) -- don't bother!\n *   'DOMMouseScroll'       -- FF(0.9.7+) since 2003\n *\n * So what to do?  The is the best:\n *\n *   normalizeWheel.getEventType();\n *\n * In your event callback, use this code to get sane interpretation of the\n * deltas.  This code will return an object with properties:\n *\n *   spinX   -- normalized spin speed (use for zoom) - x plane\n *   spinY   -- \" - y plane\n *   pixelX  -- normalized distance (to pixels) - x plane\n *   pixelY  -- \" - y plane\n *\n * Wheel values are provided by the browser assuming you are using the wheel to\n * scroll a web page by a number of lines or pixels (or pages).  Values can vary\n * significantly on different platforms and browsers, forgetting that you can\n * scroll at different speeds.  Some devices (like trackpads) emit more events\n * at smaller increments with fine granularity, and some emit massive jumps with\n * linear speed or acceleration.\n *\n * This code does its best to normalize the deltas for you:\n *\n *   - spin is trying to normalize how far the wheel was spun (or trackpad\n *     dragged).  This is super useful for zoom support where you want to\n *     throw away the chunky scroll steps on the PC and make those equal to\n *     the slow and smooth tiny steps on the Mac. Key data: This code tries to\n *     resolve a single slow step on a wheel to 1.\n *\n *   - pixel is normalizing the desired scroll delta in pixel units.  You'll\n *     get the crazy differences between browsers, but at least it'll be in\n *     pixels!\n *\n *   - positive value indicates scrolling DOWN/RIGHT, negative UP/LEFT.  This\n *     should translate to positive value zooming IN, negative zooming OUT.\n *     This matches the newer 'wheel' event.\n *\n * Why are there spinX, spinY (or pixels)?\n *\n *   - spinX is a 2-finger side drag on the trackpad, and a shift + wheel turn\n *     with a mouse.  It results in side-scrolling in the browser by default.\n *\n *   - spinY is what you expect -- it's the classic axis of a mouse wheel.\n *\n *   - I dropped spinZ/pixelZ.  It is supported by the DOM 3 'wheel' event and\n *     probably is by browsers in conjunction with fancy 3D controllers .. but\n *     you know.\n *\n * Implementation info:\n *\n * Examples of 'wheel' event if you scroll slowly (down) by one step with an\n * average mouse:\n *\n *   OS X + Chrome  (mouse)     -    4   pixel delta  (wheelDelta -120)\n *   OS X + Safari  (mouse)     -  N/A   pixel delta  (wheelDelta  -12)\n *   OS X + Firefox (mouse)     -    0.1 line  delta  (wheelDelta  N/A)\n *   Win8 + Chrome  (mouse)     -  100   pixel delta  (wheelDelta -120)\n *   Win8 + Firefox (mouse)     -    3   line  delta  (wheelDelta -120)\n *\n * On the trackpad:\n *\n *   OS X + Chrome  (trackpad)  -    2   pixel delta  (wheelDelta   -6)\n *   OS X + Firefox (trackpad)  -    1   pixel delta  (wheelDelta  N/A)\n *\n * On other/older browsers.. it's more complicated as there can be multiple and\n * also missing delta values.\n *\n * The 'wheel' event is more standard:\n *\n * http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents\n *\n * The basics is that it includes a unit, deltaMode (pixels, lines, pages), and\n * deltaX, deltaY and deltaZ.  Some browsers provide other values to maintain\n * backward compatibility with older events.  Those other values help us\n * better normalize spin speed.  Example of what the browsers provide:\n *\n *                          | event.wheelDelta | event.detail\n *        ------------------+------------------+--------------\n *          Safari v5/OS X  |       -120       |       0\n *          Safari v5/Win7  |       -120       |       0\n *         Chrome v17/OS X  |       -120       |       0\n *         Chrome v17/Win7  |       -120       |       0\n *                IE9/Win7  |       -120       |   undefined\n *         Firefox v4/OS X  |     undefined    |       1\n *         Firefox v4/Win7  |     undefined    |       3\n *\n */\nfunction normalizeWheel(/*object*/ event) /*object*/ {\n  var sX = 0, sY = 0,       // spinX, spinY\n      pX = 0, pY = 0;       // pixelX, pixelY\n\n  // Legacy\n  if ('detail'      in event) { sY = event.detail; }\n  if ('wheelDelta'  in event) { sY = -event.wheelDelta / 120; }\n  if ('wheelDeltaY' in event) { sY = -event.wheelDeltaY / 120; }\n  if ('wheelDeltaX' in event) { sX = -event.wheelDeltaX / 120; }\n\n  // side scrolling on FF with DOMMouseScroll\n  if ( 'axis' in event && event.axis === event.HORIZONTAL_AXIS ) {\n    sX = sY;\n    sY = 0;\n  }\n\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n\n  if ('deltaY' in event) { pY = event.deltaY; }\n  if ('deltaX' in event) { pX = event.deltaX; }\n\n  if ((pX || pY) && event.deltaMode) {\n    if (event.deltaMode == 1) {          // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else {                             // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pX && !sX) { sX = (pX < 1) ? -1 : 1; }\n  if (pY && !sY) { sY = (pY < 1) ? -1 : 1; }\n\n  return { spinX  : sX,\n           spinY  : sY,\n           pixelX : pX,\n           pixelY : pY };\n}\n\n\n/**\n * The best combination if you prefer spinX + spinY normalization.  It favors\n * the older DOMMouseScroll for Firefox, as FF does not include wheelDelta with\n * 'wheel' event, making spin speed determination impossible.\n */\nnormalizeWheel.getEventType = function() /*string*/ {\n  return (UserAgent_DEPRECATED.firefox())\n           ? 'DOMMouseScroll'\n           : (isEventSupported('wheel'))\n               ? 'wheel'\n               : 'mousewheel';\n};\n\nmodule.exports = normalizeWheel;\n","module.exports = require('./src/normalizeWheel.js');\n","\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport Cropper from \"react-easy-crop\";\nimport type { Area } from \"react-easy-crop\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\ninterface AvatarCropModalProps {\n  open: boolean;\n  imageSrc: string;\n  onClose: () => void;\n  onCropComplete: (blob: Blob) => void;\n}\n\n/**\n * Crops an image to the given pixel area and resizes to outputSize x outputSize.\n * Returns a PNG Blob.\n */\nasync function getCroppedBlob(\n  imageSrc: string,\n  cropArea: Area,\n  outputSize = 256\n): Promise<Blob> {\n  const image = new Image();\n  image.crossOrigin = \"anonymous\";\n  await new Promise<void>((resolve, reject) => {\n    image.onload = () => resolve();\n    image.onerror = reject;\n    image.src = imageSrc;\n  });\n\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = outputSize;\n  canvas.height = outputSize;\n  const ctx = canvas.getContext(\"2d\")!;\n\n  // Draw the cropped portion scaled to outputSize\n  ctx.drawImage(\n    image,\n    cropArea.x,\n    cropArea.y,\n    cropArea.width,\n    cropArea.height,\n    0,\n    0,\n    outputSize,\n    outputSize\n  );\n\n  return new Promise<Blob>((resolve, reject) => {\n    canvas.toBlob(\n      (blob) => (blob ? resolve(blob) : reject(new Error(\"Canvas toBlob failed\"))),\n      \"image/png\",\n      1\n    );\n  });\n}\n\nexport function AvatarCropModal({ open, imageSrc, onClose, onCropComplete }: AvatarCropModalProps) {\n  const [crop, setCrop] = useState({ x: 0, y: 0 });\n  const [zoom, setZoom] = useState(1);\n  const [croppedArea, setCroppedArea] = useState<Area | null>(null);\n  const [processing, setProcessing] = useState(false);\n\n  const onCropDone = useCallback((_: Area, croppedAreaPixels: Area) => {\n    setCroppedArea(croppedAreaPixels);\n  }, []);\n\n  const handleSave = useCallback(async () => {\n    if (!croppedArea) return;\n    setProcessing(true);\n    try {\n      const blob = await getCroppedBlob(imageSrc, croppedArea, 256);\n      onCropComplete(blob);\n    } catch {\n      // Silent fail\n    }\n    setProcessing(false);\n  }, [croppedArea, imageSrc, onCropComplete]);\n\n  return (\n    <AnimatePresence>\n      {open && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-[500] flex items-center justify-center\"\n          style={{ background: \"rgba(0,0,0,0.7)\", backdropFilter: \"blur(6px)\" }}\n          onClick={() => !processing && onClose()}\n        >\n          <motion.div\n            initial={{ opacity: 0, scale: 0.9, y: 16 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.9, y: 16 }}\n            transition={{ type: \"spring\", damping: 25, stiffness: 300 }}\n            className=\"mx-4 w-full max-w-sm rounded-2xl overflow-hidden\"\n            style={{ background: \"var(--bg-card)\", boxShadow: \"0 16px 48px rgba(0,0,0,0.5)\" }}\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/* Header */}\n            <div className=\"px-5 py-4 flex items-center justify-between\" style={{ borderBottom: \"1px solid var(--border-subtle)\" }}>\n              <h3 className=\"text-sm font-semibold\" style={{ color: \"var(--text-primary)\" }}>\n                Crop Photo\n              </h3>\n              <button\n                onClick={onClose}\n                disabled={processing}\n                className=\"p-1.5 -m-1 rounded-full cursor-pointer transition-colors\"\n                style={{ color: \"var(--text-muted)\" }}\n              >\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n                  <path d=\"M12 4L4 12M4 4l8 8\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n                </svg>\n              </button>\n            </div>\n\n            {/* Crop area */}\n            <div className=\"relative w-full\" style={{ height: 320 }}>\n              <Cropper\n                image={imageSrc}\n                crop={crop}\n                zoom={zoom}\n                aspect={1}\n                cropShape=\"round\"\n                showGrid={false}\n                onCropChange={setCrop}\n                onZoomChange={setZoom}\n                onCropComplete={onCropDone}\n              />\n            </div>\n\n            {/* Zoom slider */}\n            <div className=\"px-5 py-3 flex items-center gap-3\" style={{ borderTop: \"1px solid var(--border-subtle)\" }}>\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ color: \"var(--text-muted)\", flexShrink: 0 }}>\n                <circle cx=\"11\" cy=\"11\" r=\"8\" /><line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n                <line x1=\"8\" y1=\"11\" x2=\"14\" y2=\"11\" />\n              </svg>\n              <input\n                type=\"range\"\n                min={1}\n                max={3}\n                step={0.05}\n                value={zoom}\n                onChange={(e) => setZoom(Number(e.target.value))}\n                className=\"flex-1 accent-[var(--primary)]\"\n                style={{ height: 4 }}\n              />\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ color: \"var(--text-muted)\", flexShrink: 0 }}>\n                <circle cx=\"11\" cy=\"11\" r=\"8\" /><line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n                <line x1=\"8\" y1=\"11\" x2=\"14\" y2=\"11\" /><line x1=\"11\" y1=\"8\" x2=\"11\" y2=\"14\" />\n              </svg>\n            </div>\n\n            {/* Actions */}\n            <div className=\"px-5 py-4 flex gap-3\" style={{ borderTop: \"1px solid var(--border-subtle)\" }}>\n              <button\n                onClick={onClose}\n                disabled={processing}\n                className=\"flex-1 py-2.5 rounded-xl text-sm font-medium cursor-pointer transition-all duration-150\"\n                style={{ color: \"var(--text-muted)\", border: \"1px solid var(--border-subtle)\" }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSave}\n                disabled={processing}\n                className=\"flex-1 py-2.5 rounded-xl text-sm font-semibold text-white cursor-pointer transition-all duration-200\n                           hover:brightness-110 active:scale-[0.98] disabled:opacity-50\"\n                style={{ background: \"var(--primary)\" }}\n              >\n                {processing ? \"Processing...\" : \"Save\"}\n              </button>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","\"use client\";\n\nimport { useEffect, useState, useRef, useCallback } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { motion } from \"framer-motion\";\nimport { createClient } from \"@/src/lib/supabase/client\";\nimport { AvatarCropModal } from \"@/src/components/AvatarCropModal\";\nimport type { UserProfile } from \"@/src/state/types\";\n\nexport default function SettingsPage() {\n  const router = useRouter();\n  const supabase = createClient();\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [displayName, setDisplayName] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [saved, setSaved] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Username uniqueness\n  const [nameAvailable, setNameAvailable] = useState<boolean | null>(null);\n  const [checkingName, setCheckingName] = useState(false);\n  const debounceRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  // Theme & privacy local state for instant UI feedback\n  const [theme, setThemeLocal] = useState<\"dark\" | \"light\">(\"dark\");\n  const [publicByDefault, setPublicByDefault] = useState(true);\n\n  // Avatar upload & crop\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [avatarUrl, setAvatarUrl] = useState<string | null>(null);\n  const [uploadingAvatar, setUploadingAvatar] = useState(false);\n  const [showCropModal, setShowCropModal] = useState(false);\n  const [cropImageSrc, setCropImageSrc] = useState<string | null>(null);\n\n  useEffect(() => {\n    async function load() {\n      const {\n        data: { user },\n      } = await supabase.auth.getUser();\n      if (!user) {\n        router.replace(\"/login\");\n        return;\n      }\n\n      const { data } = await supabase\n        .from(\"profiles\")\n        .select(\"*\")\n        .eq(\"id\", user.id)\n        .single();\n\n      if (data) {\n        const p = data as unknown as UserProfile;\n        setProfile(p);\n        setDisplayName(p.display_name);\n        setThemeLocal(p.theme || \"dark\");\n        setPublicByDefault(p.arguments_public_by_default);\n        setAvatarUrl(p.avatar_url || null);\n      }\n      setLoading(false);\n    }\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Check username availability with debounce\n  const checkNameAvailability = useCallback(\n    (name: string) => {\n      if (debounceRef.current) clearTimeout(debounceRef.current);\n      if (!name.trim() || name.trim() === profile?.display_name) {\n        setNameAvailable(null);\n        setCheckingName(false);\n        return;\n      }\n      setCheckingName(true);\n      debounceRef.current = setTimeout(async () => {\n        const { data } = await supabase\n          .from(\"profiles\")\n          .select(\"id\")\n          .eq(\"display_name\", name.trim())\n          .neq(\"id\", profile?.id ?? \"\")\n          .limit(1);\n        setNameAvailable(!data || data.length === 0);\n        setCheckingName(false);\n      }, 500);\n    },\n    [profile, supabase]\n  );\n\n  const handleNameChange = (val: string) => {\n    setDisplayName(val);\n    checkNameAvailability(val);\n  };\n\n  // Apply theme immediately and persist\n  const handleThemeToggle = (t: \"dark\" | \"light\") => {\n    setThemeLocal(t);\n    // Apply to DOM immediately\n    if (t === \"light\") {\n      document.documentElement.classList.add(\"light\");\n    } else {\n      document.documentElement.classList.remove(\"light\");\n    }\n    localStorage.setItem(\"ace_theme\", t);\n  };\n\n  // Handle avatar upload (validates, then hands off to crop modal or uploads directly)\n  const handleAvatarUpload = async (blob: Blob) => {\n    if (!profile) return;\n    setUploadingAvatar(true);\n    setError(null);\n\n    try {\n      const filePath = `${profile.id}/avatar.png`;\n\n      const { error: uploadError } = await supabase.storage\n        .from(\"avatars\")\n        .upload(filePath, blob, { upsert: true, contentType: \"image/png\" });\n\n      if (uploadError) {\n        if (uploadError.message?.includes(\"bucket\") || uploadError.message?.includes(\"not found\")) {\n          setError(\"Storage bucket 'avatars' not found. Run the avatar SQL migration in your Supabase dashboard.\");\n        } else if (uploadError.message?.includes(\"Payload too large\")) {\n          setError(\"Image too large. Please use an image under 5 MB.\");\n        } else {\n          setError(`Upload failed: ${uploadError.message}`);\n        }\n        setUploadingAvatar(false);\n        return;\n      }\n\n      const { data: urlData } = supabase.storage\n        .from(\"avatars\")\n        .getPublicUrl(filePath);\n\n      const publicUrl = urlData.publicUrl + \"?t=\" + Date.now();\n      setAvatarUrl(publicUrl);\n\n      // Save to profile immediately\n      await supabase\n        .from(\"profiles\")\n        .update({ avatar_url: publicUrl })\n        .eq(\"id\", profile.id);\n    } catch {\n      setError(\"Failed to upload avatar. Check your network connection.\");\n    }\n    setUploadingAvatar(false);\n  };\n\n  // File picker handler — validates then opens crop modal\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file || !profile) return;\n    // Reset input so same file can be re-selected\n    e.target.value = \"\";\n\n    // Validate type\n    if (!file.type.startsWith(\"image/\")) {\n      setError(\"Please select an image file (JPG, PNG, etc.).\");\n      return;\n    }\n    // Validate size (5 MB)\n    if (file.size > 5 * 1024 * 1024) {\n      setError(\"Image must be under 5 MB.\");\n      return;\n    }\n\n    // Read file as data URL for crop modal\n    const reader = new FileReader();\n    reader.onload = () => {\n      setCropImageSrc(reader.result as string);\n      setShowCropModal(true);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  // Callback from crop modal — receives the cropped & normalized blob\n  const handleCropComplete = useCallback(\n    async (blob: Blob) => {\n      setShowCropModal(false);\n      setCropImageSrc(null);\n      await handleAvatarUpload(blob);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [profile]\n  );\n\n  const handleSave = async () => {\n    if (!profile || saving) return;\n\n    // Check name uniqueness if changed\n    const trimmedName = displayName.trim() || profile.display_name;\n    if (trimmedName !== profile.display_name && nameAvailable === false) {\n      setError(\"That display name is already taken.\");\n      return;\n    }\n\n    setSaving(true);\n    setSaved(false);\n    setError(null);\n\n    const { error: updateError } = await supabase\n      .from(\"profiles\")\n      .update({\n        display_name: trimmedName,\n        arguments_public_by_default: publicByDefault,\n        theme: theme,\n      })\n      .eq(\"id\", profile.id);\n\n    if (updateError) {\n      setError(\"Failed to save. Please try again.\");\n      setSaving(false);\n      return;\n    }\n\n    // Update local profile state\n    setProfile({\n      ...profile,\n      display_name: trimmedName,\n      arguments_public_by_default: publicByDefault,\n      theme: theme,\n    });\n\n    // Apply theme to DOM\n    if (theme === \"light\") {\n      document.documentElement.classList.add(\"light\");\n    } else {\n      document.documentElement.classList.remove(\"light\");\n    }\n    localStorage.setItem(\"ace_theme\", theme);\n\n    setSaving(false);\n    setSaved(true);\n    setNameAvailable(null);\n    setTimeout(() => setSaved(false), 2000);\n  };\n\n  const handleSignOut = async () => {\n    await supabase.auth.signOut();\n    document.documentElement.classList.remove(\"light\");\n    localStorage.removeItem(\"ace_theme\");\n    router.push(\"/\");\n    router.refresh();\n  };\n\n  if (loading) {\n    return (\n      <div\n        className=\"flex items-center justify-center h-dvh\"\n        style={{ background: \"var(--bg)\" }}\n      >\n        <div\n          className=\"w-6 h-6 border-2 border-t-transparent rounded-full animate-spin\"\n          style={{\n            borderColor: \"var(--primary)\",\n            borderTopColor: \"transparent\",\n          }}\n        />\n      </div>\n    );\n  }\n\n  if (!profile) return null;\n\n  return (\n    <div className=\"flex flex-col h-dvh\" style={{ background: \"var(--bg)\" }}>\n      {/* Header */}\n      <div\n        className=\"flex items-center gap-3 px-5 py-3.5 shrink-0\"\n        style={{ borderBottom: \"1px solid var(--border-subtle)\" }}\n      >\n        <button\n          onClick={() => router.push(\"/profile\")}\n          className=\"text-sm px-3.5 py-1.5 rounded-full border cursor-pointer transition-all duration-150\"\n          style={{\n            borderColor: \"var(--chip-border)\",\n            color: \"var(--text-secondary)\",\n          }}\n        >\n          <svg\n            width=\"14\"\n            height=\"14\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            className=\"inline mr-1 -mt-0.5\"\n          >\n            <path\n              d=\"M19 12H5M12 19l-7-7 7-7\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </svg>\n          Back\n        </button>\n        <h1 className=\"text-sm font-medium flex-1\" style={{ color: \"var(--text-primary)\" }}>\n          Settings\n        </h1>\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto\">\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"px-6 py-6 flex flex-col gap-6 max-w-lg mx-auto\"\n        >\n          {/* Profile Picture */}\n          <div className=\"flex flex-col items-center gap-3\">\n            <button\n              onClick={() => fileInputRef.current?.click()}\n              className=\"relative w-20 h-20 rounded-full overflow-hidden cursor-pointer group transition-all duration-200\"\n              style={{\n                background: \"var(--bg-card)\",\n                border: \"2px solid var(--border-subtle)\",\n              }}\n            >\n              {avatarUrl ? (\n                // eslint-disable-next-line @next/next/no-img-element\n                <img\n                  src={avatarUrl}\n                  alt=\"Avatar\"\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-2xl font-semibold\" style={{ color: \"var(--primary)\" }}>\n                  {(displayName ?? \"?\").charAt(0).toUpperCase()}\n                </div>\n              )}\n              <div className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                <svg\n                  width=\"20\"\n                  height=\"20\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"white\"\n                  strokeWidth=\"2\"\n                >\n                  <path\n                    d=\"M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                  <circle cx=\"12\" cy=\"13\" r=\"4\" />\n                </svg>\n              </div>\n              {uploadingAvatar && (\n                <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center\">\n                  <div\n                    className=\"w-5 h-5 border-2 border-t-transparent rounded-full animate-spin\"\n                    style={{\n                      borderColor: \"white\",\n                      borderTopColor: \"transparent\",\n                    }}\n                  />\n                </div>\n              )}\n            </button>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/*\"\n              className=\"hidden\"\n              onChange={handleFileSelect}\n            />\n            <p\n              className=\"text-xs cursor-pointer hover:underline\"\n              style={{ color: \"var(--text-muted)\" }}\n              onClick={() => fileInputRef.current?.click()}\n            >\n              {avatarUrl ? \"Change photo\" : \"Add profile photo\"}\n            </p>\n          </div>\n\n          {/* Display Name */}\n          <div>\n            <label\n              className=\"text-xs font-medium tracking-wider uppercase block mb-2\"\n              style={{ color: \"var(--text-muted)\" }}\n            >\n              Display Name\n            </label>\n            <input\n              type=\"text\"\n              value={displayName}\n              onChange={(e) => handleNameChange(e.target.value)}\n              className=\"w-full rounded-xl px-4 py-3 text-sm border outline-none\n                         placeholder:text-[var(--text-muted)] transition-colors duration-150\"\n              style={{\n                background: \"var(--bg-light)\",\n                borderColor:\n                  nameAvailable === false\n                    ? \"var(--primary)\"\n                    : nameAvailable === true\n                    ? \"var(--take-that)\"\n                    : \"var(--border-subtle)\",\n                color: \"var(--text-primary)\",\n              }}\n            />\n            {checkingName && (\n              <p\n                className=\"text-[11px] mt-1.5\"\n                style={{ color: \"var(--text-muted)\" }}\n              >\n                Checking availability...\n              </p>\n            )}\n            {!checkingName && nameAvailable === false && (\n              <p\n                className=\"text-[11px] mt-1.5\"\n                style={{ color: \"var(--primary)\" }}\n              >\n                This name is already taken.\n              </p>\n            )}\n            {!checkingName && nameAvailable === true && (\n              <p\n                className=\"text-[11px] mt-1.5\"\n                style={{ color: \"var(--take-that)\" }}\n              >\n                Name is available.\n              </p>\n            )}\n          </div>\n\n          {/* Theme */}\n          <div>\n            <label\n              className=\"text-xs font-medium tracking-wider uppercase block mb-2\"\n              style={{ color: \"var(--text-muted)\" }}\n            >\n              Theme\n            </label>\n            <div className=\"flex gap-2\">\n              {([\"dark\", \"light\"] as const).map((t) => (\n                <button\n                  key={t}\n                  onClick={() => handleThemeToggle(t)}\n                  className=\"flex-1 py-2.5 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer\"\n                  style={{\n                    background:\n                      theme === t\n                        ? \"var(--hover-overlay)\"\n                        : \"var(--bg-light)\",\n                    color:\n                      theme === t\n                        ? \"var(--text-primary)\"\n                        : \"var(--text-muted)\",\n                    border:\n                      theme === t\n                        ? \"1.5px solid var(--selection-border)\"\n                        : \"1.5px solid transparent\",\n                  }}\n                >\n                  {t === \"dark\" ? \"Dark\" : \"Light\"}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Privacy Default */}\n          <div>\n            <label\n              className=\"text-xs font-medium tracking-wider uppercase block mb-2\"\n              style={{ color: \"var(--text-muted)\" }}\n            >\n              Default Argument Privacy\n            </label>\n            <div className=\"flex gap-2\">\n              {[\n                { value: true, label: \"Public\" },\n                { value: false, label: \"Private\" },\n              ].map((opt) => (\n                <button\n                  key={String(opt.value)}\n                  onClick={() => setPublicByDefault(opt.value)}\n                  className=\"flex-1 py-2.5 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer\"\n                  style={{\n                    background:\n                      publicByDefault === opt.value\n                        ? \"var(--hover-overlay)\"\n                        : \"var(--bg-light)\",\n                    color:\n                      publicByDefault === opt.value\n                        ? \"var(--text-primary)\"\n                        : \"var(--text-muted)\",\n                    border:\n                      publicByDefault === opt.value\n                        ? \"1.5px solid var(--selection-border)\"\n                        : \"1.5px solid transparent\",\n                  }}\n                >\n                  {opt.label}\n                </button>\n              ))}\n            </div>\n            <p\n              className=\"text-[11px] mt-1.5\"\n              style={{ color: \"var(--text-muted)\" }}\n            >\n              Public arguments can be shared and appear on your profile.\n            </p>\n          </div>\n\n          {/* Error */}\n          {error && (\n            <p className=\"text-xs text-center\" style={{ color: \"var(--primary)\" }}>\n              {error}\n            </p>\n          )}\n\n          {/* Save */}\n          <button\n            onClick={handleSave}\n            disabled={saving || (nameAvailable === false)}\n            className=\"w-full py-3 rounded-xl text-white text-sm font-semibold tracking-wide\n                       transition-all duration-200 hover:brightness-110 active:scale-[0.98]\n                       cursor-pointer disabled:opacity-50\"\n            style={{ background: \"var(--primary)\" }}\n          >\n            {saving ? \"Saving...\" : saved ? \"Saved\" : \"Save Changes\"}\n          </button>\n\n          {/* Divider */}\n          <div\n            className=\"h-px\"\n            style={{ background: \"var(--border-subtle)\" }}\n          />\n\n          {/* Sign Out */}\n          <button\n            onClick={handleSignOut}\n            className=\"w-full py-3 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer hover:brightness-95\"\n            style={{\n              color: \"var(--primary)\",\n              border: \"1px solid rgba(255,56,92,0.2)\",\n            }}\n          >\n            Sign Out\n          </button>\n        </motion.div>\n      </div>\n\n      {/* Avatar Crop Modal */}\n      {cropImageSrc && (\n        <AvatarCropModal\n          open={showCropModal}\n          imageSrc={cropImageSrc}\n          onClose={() => {\n            setShowCropModal(false);\n            setCropImageSrc(null);\n          }}\n          onCropComplete={handleCropComplete}\n        />\n      )}\n    </div>\n  );\n}\n","import { Area, MediaSize, Point, Size } from './types'\n\n/**\n * Compute the dimension of the crop area based on media size,\n * aspect ratio and optionally rotation\n */\nexport function getCropSize(\n  mediaWidth: number,\n  mediaHeight: number,\n  containerWidth: number,\n  containerHeight: number,\n  aspect: number,\n  rotation = 0\n): Size {\n  const { width, height } = rotateSize(mediaWidth, mediaHeight, rotation)\n  const fittingWidth = Math.min(width, containerWidth)\n  const fittingHeight = Math.min(height, containerHeight)\n\n  if (fittingWidth > fittingHeight * aspect) {\n    return {\n      width: fittingHeight * aspect,\n      height: fittingHeight,\n    }\n  }\n\n  return {\n    width: fittingWidth,\n    height: fittingWidth / aspect,\n  }\n}\n\n/**\n * Compute media zoom.\n * We fit the media into the container with \"max-width: 100%; max-height: 100%;\"\n */\nexport function getMediaZoom(mediaSize: MediaSize) {\n  // Take the axis with more pixels to improve accuracy\n  return mediaSize.width > mediaSize.height\n    ? mediaSize.width / mediaSize.naturalWidth\n    : mediaSize.height / mediaSize.naturalHeight\n}\n\n/**\n * Ensure a new media position stays in the crop area.\n */\nexport function restrictPosition(\n  position: Point,\n  mediaSize: Size,\n  cropSize: Size,\n  zoom: number,\n  rotation = 0\n): Point {\n  const { width, height } = rotateSize(mediaSize.width, mediaSize.height, rotation)\n\n  return {\n    x: restrictPositionCoord(position.x, width, cropSize.width, zoom),\n    y: restrictPositionCoord(position.y, height, cropSize.height, zoom),\n  }\n}\n\nfunction restrictPositionCoord(\n  position: number,\n  mediaSize: number,\n  cropSize: number,\n  zoom: number\n): number {\n  const maxPosition = (mediaSize * zoom) / 2 - cropSize / 2\n\n  return clamp(position, -maxPosition, maxPosition)\n}\n\nexport function getDistanceBetweenPoints(pointA: Point, pointB: Point) {\n  return Math.sqrt(Math.pow(pointA.y - pointB.y, 2) + Math.pow(pointA.x - pointB.x, 2))\n}\n\nexport function getRotationBetweenPoints(pointA: Point, pointB: Point) {\n  return (Math.atan2(pointB.y - pointA.y, pointB.x - pointA.x) * 180) / Math.PI\n}\n\n/**\n * Compute the output cropped area of the media in percentages and pixels.\n * x/y are the top-left coordinates on the src media\n */\nexport function computeCroppedArea(\n  crop: Point,\n  mediaSize: MediaSize,\n  cropSize: Size,\n  aspect: number,\n  zoom: number,\n  rotation = 0,\n  restrictPosition = true\n): { croppedAreaPercentages: Area; croppedAreaPixels: Area } {\n  // if the media is rotated by the user, we cannot limit the position anymore\n  // as it might need to be negative.\n  const limitAreaFn = restrictPosition ? limitArea : noOp\n\n  const mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation)\n  const mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation)\n\n  // calculate the crop area in percentages\n  // in the rotated space\n  const croppedAreaPercentages = {\n    x: limitAreaFn(\n      100,\n      (((mediaBBoxSize.width - cropSize.width / zoom) / 2 - crop.x / zoom) / mediaBBoxSize.width) *\n        100\n    ),\n    y: limitAreaFn(\n      100,\n      (((mediaBBoxSize.height - cropSize.height / zoom) / 2 - crop.y / zoom) /\n        mediaBBoxSize.height) *\n        100\n    ),\n    width: limitAreaFn(100, ((cropSize.width / mediaBBoxSize.width) * 100) / zoom),\n    height: limitAreaFn(100, ((cropSize.height / mediaBBoxSize.height) * 100) / zoom),\n  }\n\n  // we compute the pixels size naively\n  const widthInPixels = Math.round(\n    limitAreaFn(\n      mediaNaturalBBoxSize.width,\n      (croppedAreaPercentages.width * mediaNaturalBBoxSize.width) / 100\n    )\n  )\n  const heightInPixels = Math.round(\n    limitAreaFn(\n      mediaNaturalBBoxSize.height,\n      (croppedAreaPercentages.height * mediaNaturalBBoxSize.height) / 100\n    )\n  )\n  const isImgWiderThanHigh = mediaNaturalBBoxSize.width >= mediaNaturalBBoxSize.height * aspect\n\n  // then we ensure the width and height exactly match the aspect (to avoid rounding approximations)\n  // if the media is wider than high, when zoom is 0, the crop height will be equals to image height\n  // thus we want to compute the width from the height and aspect for accuracy.\n  // Otherwise, we compute the height from width and aspect.\n  const sizePixels = isImgWiderThanHigh\n    ? {\n        width: Math.round(heightInPixels * aspect),\n        height: heightInPixels,\n      }\n    : {\n        width: widthInPixels,\n        height: Math.round(widthInPixels / aspect),\n      }\n\n  const croppedAreaPixels = {\n    ...sizePixels,\n    x: Math.round(\n      limitAreaFn(\n        mediaNaturalBBoxSize.width - sizePixels.width,\n        (croppedAreaPercentages.x * mediaNaturalBBoxSize.width) / 100\n      )\n    ),\n    y: Math.round(\n      limitAreaFn(\n        mediaNaturalBBoxSize.height - sizePixels.height,\n        (croppedAreaPercentages.y * mediaNaturalBBoxSize.height) / 100\n      )\n    ),\n  }\n\n  return { croppedAreaPercentages, croppedAreaPixels }\n}\n\n/**\n * Ensure the returned value is between 0 and max\n */\nfunction limitArea(max: number, value: number): number {\n  return Math.min(max, Math.max(0, value))\n}\n\nfunction noOp(_max: number, value: number) {\n  return value\n}\n\n/**\n * Compute crop and zoom from the croppedAreaPercentages.\n */\nexport function getInitialCropFromCroppedAreaPercentages(\n  croppedAreaPercentages: Area,\n  mediaSize: MediaSize,\n  rotation: number,\n  cropSize: Size,\n  minZoom: number,\n  maxZoom: number\n) {\n  const mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation)\n\n  // This is the inverse process of computeCroppedArea\n  const zoom = clamp(\n    (cropSize.width / mediaBBoxSize.width) * (100 / croppedAreaPercentages.width),\n    minZoom,\n    maxZoom\n  )\n\n  const crop = {\n    x:\n      (zoom * mediaBBoxSize.width) / 2 -\n      cropSize.width / 2 -\n      mediaBBoxSize.width * zoom * (croppedAreaPercentages.x / 100),\n    y:\n      (zoom * mediaBBoxSize.height) / 2 -\n      cropSize.height / 2 -\n      mediaBBoxSize.height * zoom * (croppedAreaPercentages.y / 100),\n  }\n\n  return { crop, zoom }\n}\n\n/**\n * Compute zoom from the croppedAreaPixels\n */\nfunction getZoomFromCroppedAreaPixels(\n  croppedAreaPixels: Area,\n  mediaSize: MediaSize,\n  cropSize: Size\n): number {\n  const mediaZoom = getMediaZoom(mediaSize)\n\n  return cropSize.height > cropSize.width\n    ? cropSize.height / (croppedAreaPixels.height * mediaZoom)\n    : cropSize.width / (croppedAreaPixels.width * mediaZoom)\n}\n\n/**\n * Compute crop and zoom from the croppedAreaPixels\n */\nexport function getInitialCropFromCroppedAreaPixels(\n  croppedAreaPixels: Area,\n  mediaSize: MediaSize,\n  rotation = 0,\n  cropSize: Size,\n  minZoom: number,\n  maxZoom: number\n): { crop: Point; zoom: number } {\n  const mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation)\n\n  const zoom = clamp(\n    getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize),\n    minZoom,\n    maxZoom\n  )\n\n  const cropZoom =\n    cropSize.height > cropSize.width\n      ? cropSize.height / croppedAreaPixels.height\n      : cropSize.width / croppedAreaPixels.width\n\n  const crop = {\n    x:\n      ((mediaNaturalBBoxSize.width - croppedAreaPixels.width) / 2 - croppedAreaPixels.x) * cropZoom,\n    y:\n      ((mediaNaturalBBoxSize.height - croppedAreaPixels.height) / 2 - croppedAreaPixels.y) *\n      cropZoom,\n  }\n  return { crop, zoom }\n}\n\n/**\n * Return the point that is the center of point a and b\n */\nexport function getCenter(a: Point, b: Point): Point {\n  return {\n    x: (b.x + a.x) / 2,\n    y: (b.y + a.y) / 2,\n  }\n}\n\nexport function getRadianAngle(degreeValue: number) {\n  return (degreeValue * Math.PI) / 180\n}\n\n/**\n * Returns the new bounding area of a rotated rectangle.\n */\nexport function rotateSize(width: number, height: number, rotation: number): Size {\n  const rotRad = getRadianAngle(rotation)\n\n  return {\n    width: Math.abs(Math.cos(rotRad) * width) + Math.abs(Math.sin(rotRad) * height),\n    height: Math.abs(Math.sin(rotRad) * width) + Math.abs(Math.cos(rotRad) * height),\n  }\n}\n\n/**\n * Clamp value between min and max\n */\nexport function clamp(value: number, min: number, max: number) {\n  return Math.min(Math.max(value, min), max)\n}\n\n/**\n * Combine multiple class names into a single string.\n */\nexport function classNames(...args: (boolean | string | number | undefined | void | null)[]) {\n  return args\n    .filter((value) => {\n      if (typeof value === 'string' && value.length > 0) {\n        return true\n      }\n\n      return false\n    })\n    .join(' ')\n    .trim()\n}\n","import * as React from 'react'\nimport normalizeWheel from 'normalize-wheel'\nimport { Area, MediaSize, Point, Size, VideoSrc } from './types'\nimport {\n  getCropSize,\n  restrictPosition,\n  getDistanceBetweenPoints,\n  getRotationBetweenPoints,\n  computeCroppedArea,\n  getCenter,\n  getInitialCropFromCroppedAreaPixels,\n  getInitialCropFromCroppedAreaPercentages,\n  classNames,\n  clamp,\n} from './helpers'\nimport cssStyles from './styles.css'\n\nexport type CropperProps = {\n  image?: string\n  video?: string | VideoSrc[]\n  transform?: string\n  crop: Point\n  zoom: number\n  rotation: number\n  aspect: number\n  minZoom: number\n  maxZoom: number\n  cropShape: 'rect' | 'round'\n  cropSize?: Size\n  objectFit?: 'contain' | 'cover' | 'horizontal-cover' | 'vertical-cover'\n  showGrid?: boolean\n  zoomSpeed: number\n  zoomWithScroll?: boolean\n  roundCropAreaPixels?: boolean\n  onCropChange: (location: Point) => void\n  onZoomChange?: (zoom: number) => void\n  onRotationChange?: (rotation: number) => void\n  onCropComplete?: (croppedArea: Area, croppedAreaPixels: Area) => void\n  onCropAreaChange?: (croppedArea: Area, croppedAreaPixels: Area) => void\n  onCropSizeChange?: (cropSize: Size) => void\n  onInteractionStart?: () => void\n  onInteractionEnd?: () => void\n  onMediaLoaded?: (mediaSize: MediaSize) => void\n  style: {\n    containerStyle?: React.CSSProperties\n    mediaStyle?: React.CSSProperties\n    cropAreaStyle?: React.CSSProperties\n  }\n  classes: {\n    containerClassName?: string\n    mediaClassName?: string\n    cropAreaClassName?: string\n  }\n  restrictPosition: boolean\n  mediaProps: React.ImgHTMLAttributes<HTMLElement> | React.VideoHTMLAttributes<HTMLElement>\n  cropperProps: React.HTMLAttributes<HTMLDivElement>\n  disableAutomaticStylesInjection?: boolean\n  initialCroppedAreaPixels?: Area\n  initialCroppedAreaPercentages?: Area\n  onTouchRequest?: (e: React.TouchEvent<HTMLDivElement>) => boolean\n  onWheelRequest?: (e: WheelEvent) => boolean\n  setCropperRef?: (ref: React.RefObject<HTMLDivElement>) => void\n  setImageRef?: (ref: React.RefObject<HTMLImageElement>) => void\n  setVideoRef?: (ref: React.RefObject<HTMLVideoElement>) => void\n  setMediaSize?: (size: MediaSize) => void\n  setCropSize?: (size: Size) => void\n  nonce?: string\n  keyboardStep: number\n}\n\ntype State = {\n  cropSize: Size | null\n  hasWheelJustStarted: boolean\n  mediaObjectFit: String | undefined\n}\n\nconst MIN_ZOOM = 1\nconst MAX_ZOOM = 3\nconst KEYBOARD_STEP = 1\n\ntype GestureEvent = UIEvent & {\n  rotation: number\n  scale: number\n  clientX: number\n  clientY: number\n}\n\nclass Cropper extends React.Component<CropperProps, State> {\n  static defaultProps = {\n    zoom: 1,\n    rotation: 0,\n    aspect: 4 / 3,\n    maxZoom: MAX_ZOOM,\n    minZoom: MIN_ZOOM,\n    cropShape: 'rect' as const,\n    objectFit: 'contain' as const,\n    showGrid: true,\n    style: {},\n    classes: {},\n    mediaProps: {},\n    cropperProps: {},\n    zoomSpeed: 1,\n    restrictPosition: true,\n    zoomWithScroll: true,\n    keyboardStep: KEYBOARD_STEP,\n  }\n\n  cropperRef: React.RefObject<HTMLDivElement> = React.createRef()\n  imageRef: React.RefObject<HTMLImageElement> = React.createRef()\n  videoRef: React.RefObject<HTMLVideoElement> = React.createRef()\n  containerPosition: Point = { x: 0, y: 0 }\n  containerRef: HTMLDivElement | null = null\n  styleRef: HTMLStyleElement | null = null\n  containerRect: DOMRect | null = null\n  mediaSize: MediaSize = { width: 0, height: 0, naturalWidth: 0, naturalHeight: 0 }\n  dragStartPosition: Point = { x: 0, y: 0 }\n  dragStartCrop: Point = { x: 0, y: 0 }\n  gestureZoomStart = 0\n  gestureRotationStart = 0\n  isTouching = false\n  lastPinchDistance = 0\n  lastPinchRotation = 0\n  rafDragTimeout: number | null = null\n  rafPinchTimeout: number | null = null\n  wheelTimer: number | null = null\n  currentDoc: Document | null = typeof document !== 'undefined' ? document : null\n  currentWindow: Window | null = typeof window !== 'undefined' ? window : null\n  resizeObserver: ResizeObserver | null = null\n  previousCropSize: Size | null = null\n  isInitialized = false\n\n  state: State = {\n    cropSize: null,\n    hasWheelJustStarted: false,\n    mediaObjectFit: undefined,\n  }\n\n  componentDidMount() {\n    if (!this.currentDoc || !this.currentWindow) return\n    if (this.containerRef) {\n      if (this.containerRef.ownerDocument) {\n        this.currentDoc = this.containerRef.ownerDocument\n      }\n      if (this.currentDoc.defaultView) {\n        this.currentWindow = this.currentDoc.defaultView\n      }\n\n      this.initResizeObserver()\n      // only add window resize listener if ResizeObserver is not supported. Otherwise, it would be redundant\n      if (typeof window.ResizeObserver === 'undefined') {\n        this.currentWindow.addEventListener('resize', this.computeSizes)\n      }\n      this.props.zoomWithScroll &&\n        this.containerRef.addEventListener('wheel', this.onWheel, { passive: false })\n      this.containerRef.addEventListener('gesturestart', this.onGestureStart as EventListener)\n    }\n\n    this.currentDoc.addEventListener('scroll', this.onScroll)\n\n    if (!this.props.disableAutomaticStylesInjection) {\n      this.styleRef = this.currentDoc.createElement('style')\n      this.styleRef.setAttribute('type', 'text/css')\n      if (this.props.nonce) {\n        this.styleRef.setAttribute('nonce', this.props.nonce)\n      }\n      this.styleRef.innerHTML = cssStyles\n      this.currentDoc.head.appendChild(this.styleRef)\n    }\n\n    // when rendered via SSR, the image can already be loaded and its onLoad callback will never be called\n    if (this.imageRef.current && this.imageRef.current.complete) {\n      this.onMediaLoad()\n    }\n\n    // set image and video refs in the parent if the callbacks exist\n    if (this.props.setImageRef) {\n      this.props.setImageRef(this.imageRef)\n    }\n\n    if (this.props.setVideoRef) {\n      this.props.setVideoRef(this.videoRef)\n    }\n\n    if (this.props.setCropperRef) {\n      this.props.setCropperRef(this.cropperRef)\n    }\n  }\n\n  componentWillUnmount() {\n    if (!this.currentDoc || !this.currentWindow) return\n    if (typeof window.ResizeObserver === 'undefined') {\n      this.currentWindow.removeEventListener('resize', this.computeSizes)\n    }\n    this.resizeObserver?.disconnect()\n    if (this.containerRef) {\n      this.containerRef.removeEventListener('gesturestart', this.preventZoomSafari)\n    }\n\n    if (this.styleRef) {\n      this.styleRef.parentNode?.removeChild(this.styleRef)\n    }\n\n    this.cleanEvents()\n    this.props.zoomWithScroll && this.clearScrollEvent()\n  }\n\n  componentDidUpdate(prevProps: CropperProps) {\n    if (prevProps.rotation !== this.props.rotation) {\n      this.computeSizes()\n      this.recomputeCropPosition()\n    } else if (prevProps.aspect !== this.props.aspect) {\n      this.computeSizes()\n    } else if (prevProps.objectFit !== this.props.objectFit) {\n      this.computeSizes()\n    } else if (prevProps.zoom !== this.props.zoom) {\n      this.recomputeCropPosition()\n    } else if (\n      prevProps.cropSize?.height !== this.props.cropSize?.height ||\n      prevProps.cropSize?.width !== this.props.cropSize?.width\n    ) {\n      this.computeSizes()\n    } else if (\n      prevProps.crop?.x !== this.props.crop?.x ||\n      prevProps.crop?.y !== this.props.crop?.y\n    ) {\n      this.emitCropAreaChange()\n    }\n    if (prevProps.zoomWithScroll !== this.props.zoomWithScroll && this.containerRef) {\n      this.props.zoomWithScroll\n        ? this.containerRef.addEventListener('wheel', this.onWheel, { passive: false })\n        : this.clearScrollEvent()\n    }\n    if (prevProps.video !== this.props.video) {\n      this.videoRef.current?.load()\n    }\n\n    const objectFit = this.getObjectFit()\n    if (objectFit !== this.state.mediaObjectFit) {\n      this.setState({ mediaObjectFit: objectFit }, this.computeSizes)\n    }\n  }\n\n  initResizeObserver = () => {\n    if (typeof window.ResizeObserver === 'undefined' || !this.containerRef) {\n      return\n    }\n    let isFirstResize = true\n    this.resizeObserver = new window.ResizeObserver((entries) => {\n      if (isFirstResize) {\n        isFirstResize = false // observe() is called on mount, we don't want to trigger a recompute on mount\n        return\n      }\n      this.computeSizes()\n    })\n    this.resizeObserver.observe(this.containerRef)\n  }\n\n  // this is to prevent Safari on iOS >= 10 to zoom the page\n  preventZoomSafari = (e: Event) => e.preventDefault()\n\n  cleanEvents = () => {\n    if (!this.currentDoc) return\n    this.currentDoc.removeEventListener('mousemove', this.onMouseMove)\n    this.currentDoc.removeEventListener('mouseup', this.onDragStopped)\n    this.currentDoc.removeEventListener('touchmove', this.onTouchMove)\n    this.currentDoc.removeEventListener('touchend', this.onDragStopped)\n    this.currentDoc.removeEventListener('gesturechange', this.onGestureChange as EventListener)\n    this.currentDoc.removeEventListener('gestureend', this.onGestureEnd as EventListener)\n    this.currentDoc.removeEventListener('scroll', this.onScroll)\n  }\n\n  clearScrollEvent = () => {\n    if (this.containerRef) this.containerRef.removeEventListener('wheel', this.onWheel)\n    if (this.wheelTimer) {\n      clearTimeout(this.wheelTimer)\n    }\n  }\n\n  onMediaLoad = () => {\n    const cropSize = this.computeSizes()\n\n    if (cropSize) {\n      this.previousCropSize = cropSize\n      this.emitCropData()\n      this.setInitialCrop(cropSize)\n      this.isInitialized = true\n    }\n\n    if (this.props.onMediaLoaded) {\n      this.props.onMediaLoaded(this.mediaSize)\n    }\n  }\n\n  setInitialCrop = (cropSize: Size) => {\n    if (this.props.initialCroppedAreaPercentages) {\n      const { crop, zoom } = getInitialCropFromCroppedAreaPercentages(\n        this.props.initialCroppedAreaPercentages,\n        this.mediaSize,\n        this.props.rotation,\n        cropSize,\n        this.props.minZoom,\n        this.props.maxZoom\n      )\n\n      this.props.onCropChange(crop)\n      this.props.onZoomChange && this.props.onZoomChange(zoom)\n    } else if (this.props.initialCroppedAreaPixels) {\n      const { crop, zoom } = getInitialCropFromCroppedAreaPixels(\n        this.props.initialCroppedAreaPixels,\n        this.mediaSize,\n        this.props.rotation,\n        cropSize,\n        this.props.minZoom,\n        this.props.maxZoom\n      )\n\n      this.props.onCropChange(crop)\n      this.props.onZoomChange && this.props.onZoomChange(zoom)\n    }\n  }\n\n  getAspect() {\n    const { cropSize, aspect } = this.props\n    if (cropSize) {\n      return cropSize.width / cropSize.height\n    }\n    return aspect\n  }\n\n  getObjectFit() {\n    if (this.props.objectFit === 'cover') {\n      const mediaRef = this.imageRef.current || this.videoRef.current\n\n      if (mediaRef && this.containerRef) {\n        this.containerRect = this.containerRef.getBoundingClientRect()\n        const containerAspect = this.containerRect.width / this.containerRect.height\n        const naturalWidth =\n          this.imageRef.current?.naturalWidth || this.videoRef.current?.videoWidth || 0\n        const naturalHeight =\n          this.imageRef.current?.naturalHeight || this.videoRef.current?.videoHeight || 0\n        const mediaAspect = naturalWidth / naturalHeight\n\n        return mediaAspect < containerAspect ? 'horizontal-cover' : 'vertical-cover'\n      }\n      return 'horizontal-cover'\n    }\n\n    return this.props.objectFit\n  }\n\n  computeSizes = () => {\n    const mediaRef = this.imageRef.current || this.videoRef.current\n\n    if (mediaRef && this.containerRef) {\n      this.containerRect = this.containerRef.getBoundingClientRect()\n      this.saveContainerPosition()\n      const containerAspect = this.containerRect.width / this.containerRect.height\n      const naturalWidth =\n        this.imageRef.current?.naturalWidth || this.videoRef.current?.videoWidth || 0\n      const naturalHeight =\n        this.imageRef.current?.naturalHeight || this.videoRef.current?.videoHeight || 0\n      const isMediaScaledDown =\n        mediaRef.offsetWidth < naturalWidth || mediaRef.offsetHeight < naturalHeight\n      const mediaAspect = naturalWidth / naturalHeight\n\n      // We do not rely on the offsetWidth/offsetHeight if the media is scaled down\n      // as the values they report are rounded. That will result in precision losses\n      // when calculating zoom. We use the fact that the media is positionned relative\n      // to the container. That allows us to use the container's dimensions\n      // and natural aspect ratio of the media to calculate accurate media size.\n      // However, for this to work, the container should not be rotated\n      let renderedMediaSize: Size\n\n      if (isMediaScaledDown) {\n        switch (this.state.mediaObjectFit) {\n          default:\n          case 'contain':\n            renderedMediaSize =\n              containerAspect > mediaAspect\n                ? {\n                    width: this.containerRect.height * mediaAspect,\n                    height: this.containerRect.height,\n                  }\n                : {\n                    width: this.containerRect.width,\n                    height: this.containerRect.width / mediaAspect,\n                  }\n            break\n          case 'horizontal-cover':\n            renderedMediaSize = {\n              width: this.containerRect.width,\n              height: this.containerRect.width / mediaAspect,\n            }\n            break\n          case 'vertical-cover':\n            renderedMediaSize = {\n              width: this.containerRect.height * mediaAspect,\n              height: this.containerRect.height,\n            }\n            break\n        }\n      } else {\n        renderedMediaSize = {\n          width: mediaRef.offsetWidth,\n          height: mediaRef.offsetHeight,\n        }\n      }\n\n      this.mediaSize = {\n        ...renderedMediaSize,\n        naturalWidth,\n        naturalHeight,\n      }\n\n      // set media size in the parent\n      if (this.props.setMediaSize) {\n        this.props.setMediaSize(this.mediaSize)\n      }\n\n      const cropSize = this.props.cropSize\n        ? this.props.cropSize\n        : getCropSize(\n            this.mediaSize.width,\n            this.mediaSize.height,\n            this.containerRect.width,\n            this.containerRect.height,\n            this.props.aspect,\n            this.props.rotation\n          )\n\n      if (\n        this.state.cropSize?.height !== cropSize.height ||\n        this.state.cropSize?.width !== cropSize.width\n      ) {\n        this.props.onCropSizeChange && this.props.onCropSizeChange(cropSize)\n      }\n\n      this.setState({ cropSize }, this.recomputeCropPosition)\n\n      // pass crop size to parent\n      if (this.props.setCropSize) {\n        this.props.setCropSize(cropSize)\n      }\n\n      return cropSize\n    }\n  }\n\n  saveContainerPosition = () => {\n    if (this.containerRef) {\n      const bounds = this.containerRef.getBoundingClientRect()\n      this.containerPosition = { x: bounds.left, y: bounds.top }\n    }\n  }\n\n  static getMousePoint = (e: MouseEvent | React.MouseEvent | GestureEvent) => ({\n    x: Number(e.clientX),\n    y: Number(e.clientY),\n  })\n\n  static getTouchPoint = (touch: Touch | React.Touch) => ({\n    x: Number(touch.clientX),\n    y: Number(touch.clientY),\n  })\n\n  onMouseDown = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (!this.currentDoc) return\n    e.preventDefault()\n    this.currentDoc.addEventListener('mousemove', this.onMouseMove)\n    this.currentDoc.addEventListener('mouseup', this.onDragStopped)\n    this.saveContainerPosition()\n    this.onDragStart(Cropper.getMousePoint(e))\n  }\n\n  onMouseMove = (e: MouseEvent) => this.onDrag(Cropper.getMousePoint(e))\n\n  onScroll = (e: Event) => {\n    if (!this.currentDoc) return\n    e.preventDefault()\n    this.saveContainerPosition()\n  }\n\n  onTouchStart = (e: React.TouchEvent<HTMLDivElement>) => {\n    if (!this.currentDoc) return\n    this.isTouching = true\n    if (this.props.onTouchRequest && !this.props.onTouchRequest(e)) {\n      return\n    }\n\n    this.currentDoc.addEventListener('touchmove', this.onTouchMove, { passive: false }) // iOS 11 now defaults to passive: true\n    this.currentDoc.addEventListener('touchend', this.onDragStopped)\n\n    this.saveContainerPosition()\n\n    if (e.touches.length === 2) {\n      this.onPinchStart(e)\n    } else if (e.touches.length === 1) {\n      this.onDragStart(Cropper.getTouchPoint(e.touches[0]))\n    }\n  }\n\n  onTouchMove = (e: TouchEvent) => {\n    // Prevent whole page from scrolling on iOS.\n    e.preventDefault()\n    if (e.touches.length === 2) {\n      this.onPinchMove(e)\n    } else if (e.touches.length === 1) {\n      this.onDrag(Cropper.getTouchPoint(e.touches[0]))\n    }\n  }\n\n  onGestureStart = (e: GestureEvent) => {\n    if (!this.currentDoc) return\n    e.preventDefault()\n    this.currentDoc.addEventListener('gesturechange', this.onGestureChange as EventListener)\n    this.currentDoc.addEventListener('gestureend', this.onGestureEnd as EventListener)\n    this.gestureZoomStart = this.props.zoom\n    this.gestureRotationStart = this.props.rotation\n  }\n\n  onGestureChange = (e: GestureEvent) => {\n    e.preventDefault()\n    if (this.isTouching) {\n      // this is to avoid conflict between gesture and touch events\n      return\n    }\n\n    const point = Cropper.getMousePoint(e)\n    const newZoom = this.gestureZoomStart - 1 + e.scale\n    this.setNewZoom(newZoom, point, { shouldUpdatePosition: true })\n    if (this.props.onRotationChange) {\n      const newRotation = this.gestureRotationStart + e.rotation\n      this.props.onRotationChange(newRotation)\n    }\n  }\n\n  onGestureEnd = (e: GestureEvent) => {\n    this.cleanEvents()\n  }\n\n  onDragStart = ({ x, y }: Point) => {\n    this.dragStartPosition = { x, y }\n    this.dragStartCrop = { ...this.props.crop }\n    this.props.onInteractionStart?.()\n  }\n\n  onDrag = ({ x, y }: Point) => {\n    if (!this.currentWindow) return\n    if (this.rafDragTimeout) this.currentWindow.cancelAnimationFrame(this.rafDragTimeout)\n\n    this.rafDragTimeout = this.currentWindow.requestAnimationFrame(() => {\n      if (!this.state.cropSize) return\n      if (x === undefined || y === undefined) return\n      const offsetX = x - this.dragStartPosition.x\n      const offsetY = y - this.dragStartPosition.y\n      const requestedPosition = {\n        x: this.dragStartCrop.x + offsetX,\n        y: this.dragStartCrop.y + offsetY,\n      }\n\n      const newPosition = this.props.restrictPosition\n        ? restrictPosition(\n            requestedPosition,\n            this.mediaSize,\n            this.state.cropSize,\n            this.props.zoom,\n            this.props.rotation\n          )\n        : requestedPosition\n      this.props.onCropChange(newPosition)\n    })\n  }\n\n  onDragStopped = () => {\n    this.isTouching = false\n    this.cleanEvents()\n    this.emitCropData()\n    this.props.onInteractionEnd?.()\n  }\n\n  onPinchStart(e: React.TouchEvent<HTMLDivElement>) {\n    const pointA = Cropper.getTouchPoint(e.touches[0])\n    const pointB = Cropper.getTouchPoint(e.touches[1])\n    this.lastPinchDistance = getDistanceBetweenPoints(pointA, pointB)\n    this.lastPinchRotation = getRotationBetweenPoints(pointA, pointB)\n    this.onDragStart(getCenter(pointA, pointB))\n  }\n\n  onPinchMove(e: TouchEvent) {\n    if (!this.currentDoc || !this.currentWindow) return\n    const pointA = Cropper.getTouchPoint(e.touches[0])\n    const pointB = Cropper.getTouchPoint(e.touches[1])\n    const center = getCenter(pointA, pointB)\n    this.onDrag(center)\n\n    if (this.rafPinchTimeout) this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout)\n    this.rafPinchTimeout = this.currentWindow.requestAnimationFrame(() => {\n      const distance = getDistanceBetweenPoints(pointA, pointB)\n      const newZoom = this.props.zoom * (distance / this.lastPinchDistance)\n      this.setNewZoom(newZoom, center, { shouldUpdatePosition: false })\n      this.lastPinchDistance = distance\n\n      const rotation = getRotationBetweenPoints(pointA, pointB)\n      const newRotation = this.props.rotation + (rotation - this.lastPinchRotation)\n      this.props.onRotationChange && this.props.onRotationChange(newRotation)\n      this.lastPinchRotation = rotation\n    })\n  }\n\n  onWheel = (e: WheelEvent) => {\n    if (!this.currentWindow) return\n    if (this.props.onWheelRequest && !this.props.onWheelRequest(e)) {\n      return\n    }\n\n    e.preventDefault()\n    const point = Cropper.getMousePoint(e)\n    const { pixelY } = normalizeWheel(e)\n    const newZoom = this.props.zoom - (pixelY * this.props.zoomSpeed) / 200\n    this.setNewZoom(newZoom, point, { shouldUpdatePosition: true })\n\n    if (!this.state.hasWheelJustStarted) {\n      this.setState({ hasWheelJustStarted: true }, () => this.props.onInteractionStart?.())\n    }\n\n    if (this.wheelTimer) {\n      clearTimeout(this.wheelTimer)\n    }\n    this.wheelTimer = this.currentWindow.setTimeout(\n      () => this.setState({ hasWheelJustStarted: false }, () => this.props.onInteractionEnd?.()),\n      250\n    )\n  }\n\n  getPointOnContainer = ({ x, y }: Point, containerTopLeft: Point): Point => {\n    if (!this.containerRect) {\n      throw new Error('The Cropper is not mounted')\n    }\n    return {\n      x: this.containerRect.width / 2 - (x - containerTopLeft.x),\n      y: this.containerRect.height / 2 - (y - containerTopLeft.y),\n    }\n  }\n\n  getPointOnMedia = ({ x, y }: Point) => {\n    const { crop, zoom } = this.props\n    return {\n      x: (x + crop.x) / zoom,\n      y: (y + crop.y) / zoom,\n    }\n  }\n\n  setNewZoom = (zoom: number, point: Point, { shouldUpdatePosition = true } = {}) => {\n    if (!this.state.cropSize || !this.props.onZoomChange) return\n\n    const newZoom = clamp(zoom, this.props.minZoom, this.props.maxZoom)\n\n    if (shouldUpdatePosition) {\n      const zoomPoint = this.getPointOnContainer(point, this.containerPosition)\n      const zoomTarget = this.getPointOnMedia(zoomPoint)\n      const requestedPosition = {\n        x: zoomTarget.x * newZoom - zoomPoint.x,\n        y: zoomTarget.y * newZoom - zoomPoint.y,\n      }\n\n      const newPosition = this.props.restrictPosition\n        ? restrictPosition(\n            requestedPosition,\n            this.mediaSize,\n            this.state.cropSize,\n            newZoom,\n            this.props.rotation\n          )\n        : requestedPosition\n\n      this.props.onCropChange(newPosition)\n    }\n    this.props.onZoomChange(newZoom)\n  }\n\n  getCropData = () => {\n    if (!this.state.cropSize) {\n      return null\n    }\n\n    // this is to ensure the crop is correctly restricted after a zoom back (https://github.com/ValentinH/react-easy-crop/issues/6)\n    const restrictedPosition = this.props.restrictPosition\n      ? restrictPosition(\n          this.props.crop,\n          this.mediaSize,\n          this.state.cropSize,\n          this.props.zoom,\n          this.props.rotation\n        )\n      : this.props.crop\n    return computeCroppedArea(\n      restrictedPosition,\n      this.mediaSize,\n      this.state.cropSize,\n      this.getAspect(),\n      this.props.zoom,\n      this.props.rotation,\n      this.props.restrictPosition\n    )\n  }\n\n  emitCropData = () => {\n    const cropData = this.getCropData()\n    if (!cropData) return\n\n    const { croppedAreaPercentages, croppedAreaPixels } = cropData\n    if (this.props.onCropComplete) {\n      this.props.onCropComplete(croppedAreaPercentages, croppedAreaPixels)\n    }\n\n    if (this.props.onCropAreaChange) {\n      this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels)\n    }\n  }\n\n  emitCropAreaChange = () => {\n    const cropData = this.getCropData()\n    if (!cropData) return\n\n    const { croppedAreaPercentages, croppedAreaPixels } = cropData\n    if (this.props.onCropAreaChange) {\n      this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels)\n    }\n  }\n\n  recomputeCropPosition = () => {\n    if (!this.state.cropSize) return\n\n    let adjustedCrop = this.props.crop\n\n    // Only scale if we're initialized and this is a legitimate resize\n    if (this.isInitialized && this.previousCropSize?.width && this.previousCropSize?.height) {\n      const sizeChanged =\n        Math.abs(this.previousCropSize.width - this.state.cropSize.width) > 1e-6 ||\n        Math.abs(this.previousCropSize.height - this.state.cropSize.height) > 1e-6\n\n      if (sizeChanged) {\n        const scaleX = this.state.cropSize.width / this.previousCropSize.width\n        const scaleY = this.state.cropSize.height / this.previousCropSize.height\n\n        adjustedCrop = {\n          x: this.props.crop.x * scaleX,\n          y: this.props.crop.y * scaleY,\n        }\n      }\n    }\n\n    const newPosition = this.props.restrictPosition\n      ? restrictPosition(\n          adjustedCrop,\n          this.mediaSize,\n          this.state.cropSize,\n          this.props.zoom,\n          this.props.rotation\n        )\n      : adjustedCrop\n\n    this.previousCropSize = this.state.cropSize\n\n    this.props.onCropChange(newPosition)\n    this.emitCropData()\n  }\n\n  onKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    const { crop, onCropChange, keyboardStep, zoom, rotation } = this.props\n    let step = keyboardStep\n\n    if (!this.state.cropSize) return\n\n    // if the shift key is pressed, reduce the step to allow finer control\n    if (event.shiftKey) {\n      step *= 0.2\n    }\n\n    let newCrop = { ...crop }\n\n    switch (event.key) {\n      case 'ArrowUp':\n        newCrop.y -= step\n        event.preventDefault()\n        break\n      case 'ArrowDown':\n        newCrop.y += step\n        event.preventDefault()\n        break\n      case 'ArrowLeft':\n        newCrop.x -= step\n        event.preventDefault()\n        break\n      case 'ArrowRight':\n        newCrop.x += step\n        event.preventDefault()\n        break\n      default:\n        return\n    }\n\n    if (this.props.restrictPosition) {\n      newCrop = restrictPosition(newCrop, this.mediaSize, this.state.cropSize, zoom, rotation)\n    }\n\n    if (!event.repeat) {\n      this.props.onInteractionStart?.()\n    }\n\n    onCropChange(newCrop)\n  }\n\n  onKeyUp = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    switch (event.key) {\n      case 'ArrowUp':\n      case 'ArrowDown':\n      case 'ArrowLeft':\n      case 'ArrowRight':\n        event.preventDefault()\n        break\n      default:\n        return\n    }\n    this.emitCropData()\n    this.props.onInteractionEnd?.()\n  }\n\n  render() {\n    const {\n      image,\n      video,\n      mediaProps,\n      cropperProps,\n      transform,\n      crop: { x, y },\n      rotation,\n      zoom,\n      cropShape,\n      showGrid,\n      roundCropAreaPixels,\n      style: { containerStyle, cropAreaStyle, mediaStyle },\n      classes: { containerClassName, cropAreaClassName, mediaClassName },\n    } = this.props\n\n    const objectFit = this.state.mediaObjectFit ?? this.getObjectFit()\n\n    return (\n      <div\n        onMouseDown={this.onMouseDown}\n        onTouchStart={this.onTouchStart}\n        ref={(el) => (this.containerRef = el)}\n        data-testid=\"container\"\n        style={containerStyle}\n        className={classNames('reactEasyCrop_Container', containerClassName)}\n      >\n        {image ? (\n          <img\n            alt=\"\"\n            className={classNames(\n              'reactEasyCrop_Image',\n              objectFit === 'contain' && 'reactEasyCrop_Contain',\n              objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal',\n              objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical',\n              mediaClassName\n            )}\n            {...(mediaProps as React.ImgHTMLAttributes<HTMLElement>)}\n            src={image}\n            ref={this.imageRef}\n            style={{\n              ...mediaStyle,\n              transform:\n                transform || `translate(${x}px, ${y}px) rotate(${rotation}deg) scale(${zoom})`,\n            }}\n            onLoad={this.onMediaLoad}\n          />\n        ) : (\n          video && (\n            <video\n              autoPlay\n              playsInline\n              loop\n              muted={true}\n              className={classNames(\n                'reactEasyCrop_Video',\n                objectFit === 'contain' && 'reactEasyCrop_Contain',\n                objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal',\n                objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical',\n                mediaClassName\n              )}\n              {...mediaProps}\n              ref={this.videoRef}\n              onLoadedMetadata={this.onMediaLoad}\n              style={{\n                ...mediaStyle,\n                transform:\n                  transform || `translate(${x}px, ${y}px) rotate(${rotation}deg) scale(${zoom})`,\n              }}\n              controls={false}\n            >\n              {(Array.isArray(video) ? video : [{ src: video }]).map((item) => (\n                <source key={item.src} {...item} />\n              ))}\n            </video>\n          )\n        )}\n        {this.state.cropSize && (\n          <div\n            ref={this.cropperRef}\n            style={{\n              ...cropAreaStyle,\n              width: roundCropAreaPixels\n                ? Math.round(this.state.cropSize.width)\n                : this.state.cropSize.width,\n              height: roundCropAreaPixels\n                ? Math.round(this.state.cropSize.height)\n                : this.state.cropSize.height,\n            }}\n            tabIndex={0}\n            onKeyDown={this.onKeyDown}\n            onKeyUp={this.onKeyUp}\n            data-testid=\"cropper\"\n            className={classNames(\n              'reactEasyCrop_CropArea',\n              cropShape === 'round' && 'reactEasyCrop_CropAreaRound',\n              showGrid && 'reactEasyCrop_CropAreaGrid',\n              cropAreaClassName\n            )}\n            {...cropperProps}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default Cropper\n"],"names":["getCropSize","mediaWidth","mediaHeight","containerWidth","containerHeight","aspect","rotation","_a","rotateSize","width","height","fittingWidth","Math","min","fittingHeight","mediaSize","naturalWidth","naturalHeight","restrictPosition","position","cropSize","zoom","x","restrictPositionCoord","y","maxPosition","clamp","getDistanceBetweenPoints","pointA","pointB","sqrt","pow","getRotationBetweenPoints","atan2","PI","computeCroppedArea","crop","limitArea","noOp","mediaNaturalBBoxSize","croppedAreaPercentages","limitAreaFn","mediaBBoxSize","widthInPixels","heightInPixels","round","isImgWiderThanHigh","sizePixels","croppedAreaPixels","__assign","value","max","getInitialCropFromCroppedAreaPercentages","minZoom","maxZoom","getZoomFromCroppedAreaPixels","getMediaZoom","mediaZoom","getInitialCropFromCroppedAreaPixels","cropZoom","getCenter","a","b","getRadianAngle","degreeValue","rotRad","abs","cos","sin","classNames","args","_i","arguments","length","filter","join","trim","MIN_ZOOM","MAX_ZOOM","KEYBOARD_STEP","Cropper","_super","__extends","_this","apply","cropperRef","React","createRef","imageRef","videoRef","containerPosition","containerRef","styleRef","containerRect","dragStartPosition","dragStartCrop","gestureZoomStart","gestureRotationStart","lastPinchDistance","lastPinchRotation","rafDragTimeout","rafPinchTimeout","wheelTimer","currentDoc","document","currentWindow","window","resizeObserver","previousCropSize","isInitialized","state","hasWheelJustStarted","mediaObjectFit","undefined","initResizeObserver","ResizeObserver","isFirstResize","entries","computeSizes","observe","preventZoomSafari","e","preventDefault","removeEventListener","onMouseMove","onDragStopped","onTouchMove","onGestureChange","onGestureEnd","onScroll","clearScrollEvent","onWheel","clearTimeout","onMediaLoad","emitCropData","setInitialCrop","props","onMediaLoaded","initialCroppedAreaPercentages","onZoomChange","initialCroppedAreaPixels","_b","onCropChange","mediaRef","current","getBoundingClientRect","saveContainerPosition","containerAspect","videoWidth","_c","_d","videoHeight","isMediaScaledDown","offsetWidth","offsetHeight","mediaAspect","renderedMediaSize","setMediaSize","_e","_f","onCropSizeChange","setState","recomputeCropPosition","setCropSize","bounds","left","top","onMouseDown","addEventListener","onDragStart","getMousePoint","onDrag","onTouchStart","isTouching","onTouchRequest","passive","touches","onPinchStart","getTouchPoint","onPinchMove","onGestureStart","point","newZoom","scale","setNewZoom","shouldUpdatePosition","onRotationChange","newRotation","cleanEvents","onInteractionStart","cancelAnimationFrame","requestAnimationFrame","offsetX","offsetY","requestedPosition","newPosition","onInteractionEnd","onWheelRequest","pixelY","normalizeWheel","zoomSpeed","call","setTimeout","getPointOnContainer","containerTopLeft","Error","getPointOnMedia","zoomPoint","zoomTarget","getCropData","restrictedPosition","getAspect","cropData","onCropComplete","onCropAreaChange","emitCropAreaChange","adjustedCrop","sizeChanged","scaleX","scaleY","onKeyDown","event","keyboardStep","step","shiftKey","newCrop","key","repeat","onKeyUp","prototype","componentDidMount","ownerDocument","defaultView","zoomWithScroll","disableAutomaticStylesInjection","createElement","setAttribute","nonce","innerHTML","cssStyles","head","appendChild","complete","setImageRef","setVideoRef","setCropperRef","componentWillUnmount","disconnect","parentNode","removeChild","componentDidUpdate","prevProps","objectFit","_g","_h","video","_j","load","getObjectFit","center","distance","render","image","mediaProps","cropperProps","transform","cropShape","showGrid","roundCropAreaPixels","style","containerStyle","cropAreaStyle","mediaStyle","classes","containerClassName","cropAreaClassName","mediaClassName","ref","el","className","alt","src","concat","onLoad","autoPlay","playsInline","loop","muted","onLoadedMetadata","controls","Array","isArray","map","item","tabIndex","defaultProps","Number","clientX","clientY","touch","Component"],"mappings":"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","ignoreList":[0,1,2,3,4,7,8]}