{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/leaderboard/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { motion } from \"framer-motion\";\nimport { createClient } from \"@/src/lib/supabase/client\";\nimport type { LeaderboardEntry } from \"@/src/state/types\";\n\ntype SortKey = \"total_score\" | \"win_rate\" | \"wins\" | \"losses\";\n\nconst TABS: { key: SortKey; label: string }[] = [\n  { key: \"total_score\", label: \"Score\" },\n  { key: \"win_rate\", label: \"Win Rate\" },\n  { key: \"wins\", label: \"Wins\" },\n  { key: \"losses\", label: \"Losses\" },\n];\n\nfunction sortEntries(entries: LeaderboardEntry[], key: SortKey): LeaderboardEntry[] {\n  return [...entries].sort((a, b) => {\n    if (key === \"losses\") return b.losses - a.losses || b.total_score - a.total_score;\n    return (b[key] as number) - (a[key] as number);\n  });\n}\n\nexport default function LeaderboardPage() {\n  const router = useRouter();\n  const supabase = createClient();\n  const [entries, setEntries] = useState<LeaderboardEntry[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [currentUserId, setCurrentUserId] = useState<string | null>(null);\n  const [sortBy, setSortBy] = useState<SortKey>(\"total_score\");\n\n  useEffect(() => {\n    async function load() {\n      const {\n        data: { user },\n      } = await supabase.auth.getUser();\n      if (user) setCurrentUserId(user.id);\n\n      const { data, error } = await supabase\n        .from(\"leaderboard\")\n        .select(\"*\")\n        .limit(50);\n\n      if (!error && data) {\n        setEntries(data as unknown as LeaderboardEntry[]);\n      }\n      setLoading(false);\n    }\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const sorted = sortEntries(entries, sortBy);\n\n  // Column label for the active sort metric\n  const metricLabel = TABS.find((t) => t.key === sortBy)?.label ?? \"Score\";\n\n  return (\n    <div className=\"flex flex-col h-dvh\" style={{ background: \"var(--bg)\" }}>\n      {/* Header */}\n      <div\n        className=\"flex items-center gap-3 px-5 py-3.5 shrink-0\"\n        style={{ borderBottom: \"1px solid var(--border-subtle)\" }}\n      >\n        <button\n          onClick={() => router.push(\"/\")}\n          className=\"text-sm px-3.5 py-1.5 rounded-full border cursor-pointer transition-all duration-150\"\n          style={{\n            borderColor: \"var(--chip-border)\",\n            color: \"var(--text-secondary)\",\n          }}\n        >\n          <svg\n            width=\"14\"\n            height=\"14\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            className=\"inline mr-1 -mt-0.5\"\n          >\n            <path\n              d=\"M19 12H5M12 19l-7-7 7-7\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </svg>\n          Back\n        </button>\n        <h1 className=\"text-sm font-medium flex-1\" style={{ color: \"var(--text-primary)\" }}>\n          Leaderboard\n        </h1>\n      </div>\n\n      {/* Sort Tabs */}\n      <div className=\"flex gap-1 px-5 py-3 shrink-0 overflow-x-auto hide-scrollbar\">\n        {TABS.map((tab) => (\n          <button\n            key={tab.key}\n            onClick={() => setSortBy(tab.key)}\n            className=\"px-4 py-2 rounded-full text-xs font-medium tracking-wide transition-all duration-150 cursor-pointer whitespace-nowrap\"\n            style={{\n              background:\n                sortBy === tab.key ? \"var(--primary)\" : \"var(--bg-light)\",\n              color: sortBy === tab.key ? \"white\" : \"var(--text-muted)\",\n              border:\n                sortBy === tab.key\n                  ? \"1px solid var(--primary)\"\n                  : \"1px solid var(--border-subtle)\",\n            }}\n          >\n            {tab.label}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto\">\n        {loading ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <div\n              className=\"w-6 h-6 border-2 border-t-transparent rounded-full animate-spin\"\n              style={{\n                borderColor: \"var(--primary)\",\n                borderTopColor: \"transparent\",\n              }}\n            />\n          </div>\n        ) : entries.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center py-20 gap-3\">\n            <p className=\"text-sm\" style={{ color: \"var(--text-muted)\" }}>\n              No players on the board yet.\n            </p>\n            <p className=\"text-xs\" style={{ color: \"var(--text-muted)\" }}>\n              Play a game to get ranked.\n            </p>\n          </div>\n        ) : (\n          <div className=\"px-5 py-2\">\n            {/* Column headers */}\n            <div\n              className=\"flex items-center gap-3 px-4 pb-3 mb-1\"\n              style={{ borderBottom: \"1px solid var(--border-subtle)\" }}\n            >\n              <span\n                className=\"w-8 text-[10px] font-medium tracking-wider\"\n                style={{ color: \"var(--text-muted)\" }}\n              >\n                #\n              </span>\n              <span\n                className=\"flex-1 text-[10px] font-medium tracking-wider\"\n                style={{ color: \"var(--text-muted)\" }}\n              >\n                PLAYER\n              </span>\n              <span\n                className=\"w-16 text-[10px] font-medium tracking-wider text-right\"\n                style={{ color: \"var(--text-muted)\" }}\n              >\n                W/L\n              </span>\n              <span\n                className=\"w-20 text-[10px] font-medium tracking-wider text-right\"\n                style={{\n                  color:\n                    sortBy === \"total_score\" || sortBy === \"win_rate\"\n                      ? \"var(--accent)\"\n                      : \"var(--text-muted)\",\n                }}\n              >\n                {metricLabel.toUpperCase()}\n              </span>\n            </div>\n\n            {sorted.map((entry, idx) => {\n              const isMe = entry.id === currentUserId;\n              const metricValue =\n                sortBy === \"total_score\"\n                  ? entry.total_score.toLocaleString()\n                  : sortBy === \"win_rate\"\n                  ? `${entry.win_rate}%`\n                  : sortBy === \"wins\"\n                  ? entry.wins.toString()\n                  : entry.losses.toString();\n\n              return (\n                <motion.div\n                  key={entry.id}\n                  initial={{ opacity: 0, y: 6 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: idx * 0.02 }}\n                  className=\"flex items-center gap-3 px-4 py-3 rounded-xl mb-1 transition-all\"\n                  style={{\n                    background: isMe\n                      ? \"rgba(255,56,92,0.08)\"\n                      : idx < 3\n                      ? \"rgba(224,185,122,0.04)\"\n                      : \"transparent\",\n                  }}\n                >\n                  <span\n                    className=\"w-8 text-sm font-semibold tabular-nums\"\n                    style={{\n                      color: idx < 3 ? \"var(--accent)\" : \"var(--text-muted)\",\n                    }}\n                  >\n                    {idx + 1}\n                  </span>\n                  <span\n                    className=\"flex-1 text-sm font-medium truncate\"\n                    style={{\n                      color: isMe\n                        ? \"var(--primary)\"\n                        : \"var(--text-primary)\",\n                    }}\n                  >\n                    {entry.display_name}\n                    {isMe && (\n                      <span\n                        className=\"text-[10px] ml-1.5 font-normal\"\n                        style={{ color: \"var(--text-muted)\" }}\n                      >\n                        (you)\n                      </span>\n                    )}\n                  </span>\n                  <span\n                    className=\"w-16 text-sm tabular-nums text-right\"\n                    style={{ color: \"var(--text-secondary)\" }}\n                  >\n                    {entry.wins}/{entry.losses}\n                  </span>\n                  <span\n                    className=\"w-20 text-sm font-semibold tabular-nums text-right\"\n                    style={{ color: \"var(--text-primary)\" }}\n                  >\n                    {metricValue}\n                  </span>\n                </motion.div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}