(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88653,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(71645),n=e.i(31178),s=e.i(47414),i=e.i(74008),r=e.i(21476),l=e.i(72846),o=a,c=e.i(37806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,a=(0,l.isHTMLElement)(e)&&e.offsetWidth||0,n=(0,l.isHTMLElement)(e)&&e.offsetHeight||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=a-s.width-s.left,s.bottom=n-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:e,isPresent:n,anchorX:s,anchorY:i,root:r,pop:l}){let m=(0,o.useId)(),p=(0,o.useRef)(null),h=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:x}=(0,o.useContext)(c.MotionConfigContext),f=function(...e){return a.useCallback(function(...e){return t=>{let a=!1,n=e.map(e=>{let n=d(e,t);return a||"function"!=typeof n||(a=!0),n});if(a)return()=>{for(let t=0;t<n.length;t++){let a=n[t];"function"==typeof a?a():d(e[t],null)}}}}(...e),e)}(p,e.props?.ref??e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:o,right:c,bottom:d}=h.current;if(n||!1===l||!p.current||!e||!t)return;let u="left"===s?`left: ${o}`:`right: ${c}`,f="bottom"===i?`bottom: ${d}`:`top: ${a}`;p.current.dataset.motionPopId=m;let g=document.createElement("style");x&&(g.nonce=x);let y=r??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${m}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            ${f}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[n]),(0,t.jsx)(u,{isPresent:n,childRef:p,sizeRef:h,pop:l,children:!1===l?e:o.cloneElement(e,{ref:f})})}let p=({children:e,initial:n,isPresent:i,onExitComplete:l,custom:o,presenceAffectsLayout:c,mode:d,anchorX:u,anchorY:p,root:x})=>{let f=(0,s.useConstant)(h),g=(0,a.useId)(),y=!0,v=(0,a.useMemo)(()=>(y=!1,{id:g,initial:n,isPresent:i,custom:o,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;l&&l()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[i,f,l]);return c&&y&&(v={...v}),(0,a.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[i]),a.useEffect(()=>{i||f.size||!l||l()},[i]),e=(0,t.jsx)(m,{pop:"popLayout"===d,isPresent:i,anchorX:u,anchorY:p,root:x,children:e}),(0,t.jsx)(r.PresenceContext.Provider,{value:v,children:e})};function h(){return new Map}var x=e.i(64978);let f=e=>e.key||"";function g(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let y=({children:e,custom:r,initial:l=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:m="left",anchorY:h="top",root:y})=>{let[v,b]=(0,x.usePresence)(u),j=(0,a.useMemo)(()=>g(e),[e]),w=u&&!v?[]:j.map(f),N=(0,a.useRef)(!0),S=(0,a.useRef)(j),P=(0,s.useConstant)(()=>new Map),k=(0,a.useRef)(new Set),[C,_]=(0,a.useState)(j),[T,E]=(0,a.useState)(j);(0,i.useIsomorphicLayoutEffect)(()=>{N.current=!1,S.current=j;for(let e=0;e<T.length;e++){let t=f(T[e]);w.includes(t)?(P.delete(t),k.current.delete(t)):!0!==P.get(t)&&P.set(t,!1)}},[T,w.length,w.join("-")]);let A=[];if(j!==C){let e=[...j];for(let t=0;t<T.length;t++){let a=T[t],n=f(a);w.includes(n)||(e.splice(t,0,a),A.push(a))}return"wait"===d&&A.length&&(e=A),E(g(e)),_(j),null}let{forceRender:$}=(0,a.useContext)(n.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:T.map(e=>{let a=f(e),n=(!u||!!v)&&(j===T||w.includes(a));return(0,t.jsx)(p,{isPresent:n,initial:(!N.current||!!l)&&void 0,custom:r,presenceAffectsLayout:c,mode:d,root:y,onExitComplete:n?void 0:()=>{if(k.current.has(a)||(k.current.add(a),!P.has(a)))return;P.set(a,!0);let e=!0;P.forEach(t=>{t||(e=!1)}),e&&($?.(),E(S.current),u&&b?.(),o&&o())},anchorX:m,anchorY:h,children:e},a)})})};e.s(["AnimatePresence",()=>y],88653)},68834,e=>{"use strict";var t=e.i(71645);let a=e=>{let t,a=new Set,n=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),a.forEach(a=>a(t,e))}},s=()=>t,i={setState:n,getState:s,getInitialState:()=>r,subscribe:e=>(a.add(e),()=>a.delete(e))},r=t=e(n,s,i);return i},n=e=>{let n=e?a(e):a,s=e=>(function(e,a=e=>e){let n=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>a(e.getState()),[e,a]),t.default.useCallback(()=>a(e.getInitialState()),[e,a]));return t.default.useDebugValue(n),n})(n,e);return Object.assign(s,n),s},s=e=>e?n(e):n;e.s(["create",()=>s],68834)},399,85459,e=>{"use strict";var t=e.i(68834);function a(e){return`# ${e.title}

## Charge
${e.charge}

## Context
${e.context}

## The Real Question
${e.philosophical_tension}
`}function n(e,t){let a=e.map(e=>`| ${e.id} | ${e.claim} | ${e.evidence} | ${e.status} |`).join("\n"),n=e.filter(e=>"refuted"===e.status).map(e=>`- ${e.id}: ${e.claim}`).join("\n");return`# ${"prosecution"===t?"Prosecution Arguments":"Defense Arguments"}

| ID | Claim | Evidence | Status |
|----|-------|----------|--------|
${a}

## Concessions
${n||"- None"}
`}function s(e){let t=e.assumptions.map(e=>`| ${e.side} | ${e.assumption} | ${e.state} |`).join("\n"),a=e.fallacies.map(e=>`| ${e.side} | ${e.type} | ${e.context} | ${e.exchangeNumber} |`).join("\n");return`# Argument Analysis

## Key Assumptions
| Side | Assumption | State |
|------|-----------|-------|
${t||"| - | - | - |"}

## Fallacies Identified
| Side | Type | Context | Exchange # |
|------|------|---------|-----------|
${a||"| - | - | - | - |"}

## Score
- Attorney: ${e.attorneyScore.validPoints} valid points, ${e.attorneyScore.fallacies} fallacies, ${e.attorneyScore.challenged} challenged
- Defendant: ${e.defendantScore.validPoints} valid points, ${e.defendantScore.fallacies} fallacies, ${e.defendantScore.challenged} challenged
`}function i(e){if(0===e.length)return"# Conversation Log\n\n(No exchanges yet)\n";let t="# Conversation Log\n\n",a=0,n="";for(let s of e){"attorney"===s.sender&&"attorney"!==n&&(a++,t+=`## Exchange ${a}
`);let e="attorney"===s.sender?"Attorney":"User";t+=`**${e}:** ${s.text}

`,n=s.sender}return t}function r(e,t,a){let n=[...e],s=[...t];for(let e of a){let t=n.findIndex(t=>t.id===e.id);if(t>=0){n[t]={...n[t],status:e.new_status};continue}let a=s.findIndex(t=>t.id===e.id);a>=0&&(s[a]={...s[a],status:e.new_status})}return{attorneyPoints:n,defendantPoints:s}}function l(e,t,a){let n=[...e.fallacies,...t.map(e=>({...e,exchangeNumber:a}))],s=n.filter(e=>"attorney"===e.side).length,i=n.filter(e=>"defendant"===e.side).length;return{...e,fallacies:n,attorneyScore:{...e.attorneyScore,fallacies:s},defendantScore:{...e.defendantScore,fallacies:i}}}function o(e,t){let a=[...e.assumptions];for(let e of t){let t=a.findIndex(t=>t.side===e.side&&t.assumption===e.assumption);t>=0?a[t]={...a[t],state:e.new_state}:a.push({side:e.side,assumption:e.assumption,state:e.new_state})}return{...e,assumptions:a}}function c(e,t,a){return{...e,attorneyScore:{...e.attorneyScore,validPoints:t.filter(e=>"unchallenged"===e.status||"proven"===e.status).length,challenged:t.filter(e=>"challenged"===e.status).length},defendantScore:{...e.defendantScore,validPoints:a.filter(e=>"unchallenged"===e.status||"proven"===e.status).length,challenged:a.filter(e=>"challenged"===e.status).length}}}function d(){return{assumptions:[],fallacies:[],attorneyScore:{validPoints:0,fallacies:0,challenged:0},defendantScore:{validPoints:0,fallacies:0,challenged:0}}}e.s(["applyAssumptions",()=>o,"applyFallacies",()=>l,"applyPointUpdates",()=>r,"createInitialAnalysis",()=>d,"generateAnalysisMd",()=>s,"generateConversationMd",()=>i,"generateIssueMd",()=>a,"generatePointsMd",()=>n,"recalcScores",()=>c],85459);let u="ace_attorney_state",m={attorneyHP:100,defendantHP:100,maxHP:100},p={phase:"splash",caseData:null,attorneyPoints:[],defendantPoints:[],analysis:d(),health:{...m},messages:[],suggestions:[],evidenceCards:[],exchangeCount:0,isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1,outcome:null},h=(0,t.create)((e,t)=>({...p,initCase:t=>e({caseData:t,attorneyPoints:t.attorney_points,defendantPoints:t.defendant_points,analysis:{...d(),attorneyScore:{validPoints:t.attorney_points.length,fallacies:0,challenged:0},defendantScore:{validPoints:t.defendant_points.length,fallacies:0,challenged:0}},health:{...m},messages:[],suggestions:[],evidenceCards:[],exchangeCount:0,outcome:null,phase:"intro"}),setPhase:t=>e({phase:t}),reset:()=>e({...p}),addMessage:(t,a,n)=>{let s={id:`msg_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,text:t,sender:a,timestamp:Date.now(),intensity:n};e(e=>({messages:[...e.messages,s]}))},setSuggestions:t=>e({suggestions:t}),incrementExchange:()=>e(e=>({exchangeCount:e.exchangeCount+1})),updatePoints:t=>e(e=>{let a=r(e.attorneyPoints,e.defendantPoints,t),n=c(e.analysis,a.attorneyPoints,a.defendantPoints);return{...a,analysis:n}}),updateAnalysis:(t,a)=>e(e=>{let n=e.analysis;return t.length>0&&(n=l(n,t,e.exchangeCount)),a.length>0&&(n=o(n,a)),{analysis:n}}),setGeneratingCase:t=>e({isGeneratingCase:t}),setAttorneyThinking:t=>e({isAttorneyThinking:t}),setSuggestionsLoading:t=>e({isSuggestionsLoading:t}),setOutcome:t=>e({outcome:t,phase:"ended"}),applyDamage:(a,n)=>{let s=t(),i=Math.max(0,s.health.attorneyHP-a),r=Math.max(0,s.health.defendantHP-n);return(e({health:{...s.health,attorneyHP:i,defendantHP:r}}),i<=0)?"attorney_ko":r<=0?"defendant_ko":"none"},applyDamageToOne:(a,n)=>{let s=t();if("attorney"===a){let t=Math.max(0,s.health.attorneyHP-n);if(e({health:{...s.health,attorneyHP:t}}),t<=0)return"attorney_ko"}else{let t=Math.max(0,s.health.defendantHP-n);if(e({health:{...s.health,defendantHP:t}}),t<=0)return"defendant_ko"}return"none"},evidenceCards:[],selectEvidenceCards:a=>{let n=t();n.caseData&&e({evidenceCards:n.caseData.defendant_points.filter(e=>a.includes(e.id)).map(e=>({id:e.id,claim:e.claim,evidence:e.evidence,used:!1}))})},useEvidenceCard:t=>{e(e=>({evidenceCards:e.evidenceCards.map(e=>e.id===t?{...e,used:!0}:e)}))},persist:()=>{try{let e=t(),a={phase:e.phase,caseData:e.caseData,attorneyPoints:e.attorneyPoints,defendantPoints:e.defendantPoints,analysis:e.analysis,health:e.health,messages:e.messages,suggestions:e.suggestions,evidenceCards:e.evidenceCards,exchangeCount:e.exchangeCount,isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1,outcome:e.outcome};localStorage.setItem(u,JSON.stringify(a))}catch{}},hydrate:()=>{try{let t=localStorage.getItem(u);if(t){let a=JSON.parse(t);e({...a,health:a.health??{...m},isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1})}}catch{}}}));e.s(["useArgumentStore",0,h],399)},37768,e=>{"use strict";var t=e.i(43476),a=e.i(46932);function n({message:e}){let n="attorney"===e.sender,s=e.intensity??1;return(0,t.jsxs)(a.motion.div,{initial:n?s>=7?{opacity:0,scale:.9}:{opacity:0,x:-20}:{opacity:0,x:20},animate:{opacity:1,x:0,scale:1},transition:{duration:s>=7?.4:.3,type:s>=7?"spring":"tween"},className:`flex flex-col max-w-[82%] my-1.5 px-5 ${n?"self-start":"self-end"}`,children:[(0,t.jsx)("span",{className:`text-[10px] font-medium tracking-wider mb-1 ${n?"text-left":"text-right"}`,style:{color:n?"var(--primary)":"var(--accent)"},children:n?"PROSECUTION":"YOU"}),(0,t.jsx)("div",{className:`rounded-2xl px-4 py-3.5 ${n?"rounded-tl-md":"rounded-tr-md"}`,style:{background:n?"var(--attorney-bubble)":"var(--user-bubble)",transform:`scale(${s>=4?1+(s-4)*.008:1})`,boxShadow:"0 1px 3px rgba(0,0,0,0.2)"},children:(0,t.jsx)("p",{className:"text-[15px] leading-relaxed whitespace-pre-wrap",style:{color:n?"var(--attorney-text)":"var(--user-text)"},children:e.text})})]})}e.s(["MessageBubble",()=>n])},86489,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(46932),s=e.i(88653);function i(e,t){let a=e/t;return a>.6?"#22c55e":a>.35?"#eab308":a>.15?"#f97316":"#ef4444"}function r({damage:e,side:a}){return e<=0?null:(0,t.jsxs)(n.motion.span,{initial:{opacity:1,y:0},animate:{opacity:0,y:-30},transition:{duration:1.2},className:`absolute top-0 text-sm font-black pointer-events-none ${"left"===a?"left-2":"right-2"}`,style:{color:"#ef4444",textShadow:"0 0 8px rgba(239,68,68,0.6)"},children:["-",e]})}function l({health:e,lastDamageToAttorney:l=0,lastDamageToDefendant:o=0}){let[c,d]=(0,a.useState)(0);(0,a.useEffect)(()=>{(l>0||o>0)&&d(e=>e+1)},[l,o]);let u=e.attorneyHP/e.maxHP*100,m=e.defendantHP/e.maxHP*100,p=i(e.attorneyHP,e.maxHP),h=i(e.defendantHP,e.maxHP);return(0,t.jsxs)("div",{className:"flex items-center gap-3 px-5 py-2.5 shrink-0",style:{borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wider",style:{color:"var(--primary)"},children:"PROSECUTION"}),(0,t.jsx)("span",{className:"text-[10px] font-medium tabular-nums",style:{color:p},children:e.attorneyHP})]}),(0,t.jsx)("div",{className:"h-2 rounded-full overflow-hidden",style:{background:"rgba(255,255,255,0.06)"},children:(0,t.jsx)(n.motion.div,{className:"h-full rounded-full",style:{background:p,originX:0},animate:{width:`${u}%`},transition:{duration:.6,ease:"easeOut"}})}),(0,t.jsx)(s.AnimatePresence,{mode:"popLayout",children:l>0&&(0,t.jsx)(r,{damage:l,side:"left"},`att-${c}`)})]}),(0,t.jsx)("div",{className:"flex flex-col items-center shrink-0 px-1",children:(0,t.jsx)("span",{className:"text-[9px] font-semibold tracking-widest",style:{color:"var(--text-muted)"},children:"VS"})}),(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-[10px] font-medium tabular-nums",style:{color:h},children:e.defendantHP}),(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wider",style:{color:"var(--accent)"},children:"DEFENSE"})]}),(0,t.jsx)("div",{className:"h-2 rounded-full overflow-hidden",style:{background:"rgba(255,255,255,0.06)"},children:(0,t.jsx)(n.motion.div,{className:"h-full rounded-full ml-auto",style:{background:h,originX:1},animate:{width:`${m}%`},transition:{duration:.6,ease:"easeOut"}})}),(0,t.jsx)(s.AnimatePresence,{mode:"popLayout",children:o>0&&(0,t.jsx)(r,{damage:o,side:"right"},`def-${c}`)})]})]})}function o({health:e}){let a=e.attorneyHP/e.maxHP*100,n=e.defendantHP/e.maxHP*100,s=i(e.attorneyHP,e.maxHP),r=i(e.defendantHP,e.maxHP);return(0,t.jsxs)("div",{className:"flex items-center gap-3 px-5 py-2.5",style:{borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wider",style:{color:"var(--primary)"},children:"PROSECUTION"}),(0,t.jsx)("span",{className:"text-[10px] font-medium tabular-nums",style:{color:s},children:e.attorneyHP})]}),(0,t.jsx)("div",{className:"h-2 rounded-full overflow-hidden",style:{background:"rgba(255,255,255,0.06)"},children:(0,t.jsx)("div",{className:"h-full rounded-full",style:{background:s,width:`${a}%`}})})]}),(0,t.jsx)("span",{className:"text-[9px] font-semibold tracking-widest shrink-0 px-1",style:{color:"var(--text-muted)"},children:"VS"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-[10px] font-medium tabular-nums",style:{color:r},children:e.defendantHP}),(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wider",style:{color:"var(--accent)"},children:"DEFENSE"})]}),(0,t.jsx)("div",{className:"h-2 rounded-full overflow-hidden",style:{background:"rgba(255,255,255,0.06)"},children:(0,t.jsx)("div",{className:"h-full rounded-full ml-auto",style:{background:r,width:`${n}%`}})})]})]})}e.s(["HealthBar",()=>l,"HealthBarStatic",()=>o])},73319,e=>{"use strict";var t=e.i(68834),a=e.i(11795);let n="ace_attorney_history";function s(e){return{id:e.id,user_id:e.user_id,caseData:e.case_data,messages:e.messages,outcome:e.outcome,finalHealth:e.final_health,exchangeCount:e.exchange_count,score:e.score??0,starred:e.starred,is_public:e.is_public,createdAt:new Date(e.created_at).getTime()}}let i=(0,t.create)((e,t)=>({arguments:[],userId:null,setUserId:t=>e({userId:t}),saveArgument:async n=>{let{userId:s}=t(),i=(0,a.createClient)();if(!s)return r(n,e,t);{let{data:a,error:l}=await i.from("arguments").insert({user_id:s,case_data:n.caseData,messages:n.messages,outcome:n.outcome,final_health:n.finalHealth,exchange_count:n.exchangeCount,score:n.score,is_public:n.is_public??!0}).select("id").single();if(l)return console.error("Failed to save argument to Supabase:",l.message),r(n,e,t);let o=a.id,c={...n,id:o,user_id:s,starred:!1,is_public:n.is_public??!0,createdAt:Date.now()};return e(e=>({arguments:[c,...e.arguments]})),o}},toggleStar:async n=>{let{userId:s}=t(),i=t().arguments.find(e=>e.id===n);if(i)if(e(e=>({arguments:e.arguments.map(e=>e.id===n?{...e,starred:!e.starred}:e)})),s){let e=(0,a.createClient)();await e.from("arguments").update({starred:!i.starred}).eq("id",n)}else l(t)},deleteArgument:async n=>{let{userId:s}=t();if(e(e=>({arguments:e.arguments.filter(e=>e.id!==n)})),s){let e=(0,a.createClient)();await e.from("arguments").delete().eq("id",n)}else l(t)},getArgument:e=>t().arguments.find(t=>t.id===e),hydrate:async()=>{let{userId:i}=t();if(i){let t=(0,a.createClient)(),{data:n,error:r}=await t.from("arguments").select("*").eq("user_id",i).order("created_at",{ascending:!1});if(!r&&n)return void e({arguments:n.map(s)})}try{let t=localStorage.getItem(n);if(t){let a=JSON.parse(t),n=(Array.isArray(a)?a:[]).map(e=>({...e,score:e.score??0,is_public:e.is_public??!0}));e({arguments:n})}}catch{}}}));function r(e,t,a){let n=`arg_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,s={...e,id:n,createdAt:Date.now(),starred:!1,is_public:e.is_public??!0};return t(e=>({arguments:[s,...e.arguments]})),setTimeout(()=>l(a),0),n}function l(e){try{let{arguments:t}=e();localStorage.setItem(n,JSON.stringify(t))}catch{}}e.s(["useHistoryStore",0,i])},98089,e=>{"use strict";var t=e.i(85459),a=e.i(399);function n(){let e=a.useArgumentStore.getState(),n=[];return e.caseData&&(n.push("=== issue.md ==="),n.push((0,t.generateIssueMd)(e.caseData))),e.attorneyPoints.length>0&&(n.push("=== attorney_points.md ==="),n.push((0,t.generatePointsMd)(e.attorneyPoints,"prosecution"))),e.defendantPoints.length>0&&(n.push("=== defendant_points.md ==="),n.push((0,t.generatePointsMd)(e.defendantPoints,"defense"))),e.messages.length>0&&(n.push("=== conversation.md ==="),n.push((0,t.generateConversationMd)(e.messages))),n.push("=== analysis.md ==="),n.push((0,t.generateAnalysisMd)(e.analysis)),n.join("\n\n")}async function s(e){let t=await fetch("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({error:"Request failed"}))).error||`API error (${t.status})`);return(await t.json()).result}async function i(){return s({agent:"case_creator"})}async function r(e,t=!1){return s({agent:"lawyer",context:n(),userMessage:e,surrender:t})}async function l(e){return s({agent:"defendant",context:n(),exchangeCount:e})}e.s(["callCaseCreator",()=>i,"callDefendant",()=>l,"callLawyer",()=>r])},41222,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(18566),s=e.i(46932),i=e.i(88653),r=e.i(399),l=e.i(73319),o=e.i(98089);async function c(e,t=!1){let a=JSON.parse(await (0,o.callLawyer)(e,t));if(!a.message)throw Error("Invalid lawyer response: missing message");return{message:a.message,updated_points:a.updated_points??[],fallacies_identified:a.fallacies_identified??[],assumptions_challenged:a.assumptions_challenged??[],intensity_level:Math.min(10,Math.max(1,a.intensity_level??3)),damage_to_attorney:Math.min(25,Math.max(0,a.damage_to_attorney??5)),damage_to_defendant:Math.min(25,Math.max(0,a.damage_to_defendant??5))}}async function d(e){let t=JSON.parse(await (0,o.callDefendant)(e));if(!t.suggestions||0===t.suggestions.length)throw Error("Invalid defendant response: no suggestions");let a=t.suggestions.map(e=>({text:e.text,type:e.type||"strategic",variant:e.variant||"default"})),n=a.findIndex(e=>"surrender"===e.variant);if(n>=0&&n!==a.length-1){let[e]=a.splice(n,1);a.push(e)}return e>=6&&!a.find(e=>"surrender"===e.variant)&&a.push({text:"...I surrender.",type:"surrender",variant:"surrender"}),{suggestions:a,defense_analysis:t.defense_analysis??"No analysis",recommended_strategy:t.recommended_strategy??"No recommendation"}}var u=e.i(37768);function m(){return(0,t.jsxs)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"self-start px-5 my-1.5 max-w-[70%]",children:[(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wider block mb-1",style:{color:"var(--primary)"},children:"PROSECUTION"}),(0,t.jsxs)("div",{className:"rounded-2xl rounded-tl-md px-4 py-3.5",style:{background:"var(--attorney-bubble)",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"},children:[(0,t.jsx)("div",{className:"flex gap-1.5 mb-1.5",children:[0,1,2].map(e=>(0,t.jsx)(s.motion.div,{className:"w-1.5 h-1.5 rounded-full",style:{background:"var(--attorney-text)"},animate:{opacity:[.2,.8,.2]},transition:{duration:1,repeat:1/0,delay:.2*e}},e))}),(0,t.jsx)("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Preparing argument..."})]})]})}let p={objection:"#FF385C",evidence:"#34D399",dramatic:"#E0B97A",strategic:"#60A5FA",surrender:"#DC2626"};function h({suggestion:e,onPress:a,index:n,disabled:i}){let r="surrender"===e.variant;return(0,t.jsxs)(s.motion.button,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.06*n,duration:.25},onClick:()=>a(e),disabled:i,className:`flex items-center gap-2.5 px-4 py-2.5 rounded-xl border shrink-0
                  transition-all duration-150 cursor-pointer select-none
                  hover:bg-white/5 active:scale-[0.97]
                  disabled:opacity-40 disabled:cursor-not-allowed
                  max-w-[280px] min-w-[140px]`,style:{background:r?"var(--chip-surrender)":"var(--chip-default)",borderColor:r?"#991b1b":"var(--chip-border)"},children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full shrink-0",style:{background:p[e.type]??"#717171"}}),(0,t.jsx)("span",{className:"text-[13px] font-medium text-left leading-snug",style:{color:r?"#fff":"var(--chip-text)"},children:e.text})]})}function x({index:e}){return(0,t.jsxs)("div",{className:"w-[180px] h-[48px] rounded-xl border shrink-0 p-4 flex flex-col justify-center gap-1.5 skeleton-shimmer",style:{background:"var(--chip-default)",borderColor:"var(--chip-border)",animationDelay:`${.15*e}s`},children:[(0,t.jsx)("div",{className:"h-2 rounded-full bg-white/[0.04] w-4/5"}),(0,t.jsx)("div",{className:"h-2 rounded-full bg-white/[0.04] w-3/5"})]})}function f({suggestions:e,onSelect:a,isLoading:n,disabled:r}){return n?(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("p",{className:"text-[11px] font-medium tracking-wider uppercase px-5 mb-1.5",style:{color:"var(--text-muted)"},children:"Preparing your options..."}),(0,t.jsx)("div",{className:"flex gap-2.5 px-5 overflow-x-auto hide-scrollbar",children:[0,1,2,3].map(e=>(0,t.jsx)(x,{index:e},e))})]}):0===e.length?null:(0,t.jsxs)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"py-2",children:[(0,t.jsx)("p",{className:"text-[11px] font-medium tracking-wider uppercase px-5 mb-1.5",style:{color:"var(--text-muted)"},children:"Your response"}),(0,t.jsx)("div",{className:"flex gap-2.5 px-5 overflow-x-auto hide-scrollbar pb-1",children:(0,t.jsx)(i.AnimatePresence,{mode:"popLayout",children:e.map((e,n)=>(0,t.jsx)(h,{suggestion:e,onPress:a,index:n,disabled:r},`${e.text}-${n}`))})})]})}var g=e.i(86489),y=e.i(47414),v=e.i(74008),b=e.i(76859),j=e.i(47834),w=e.i(65566);function N(e,t){[...t].reverse().forEach(a=>{let n=e.getVariant(a);n&&(0,j.setTarget)(e,n),e.variantChildren&&e.variantChildren.forEach(e=>{N(e,t)})})}function S(){let e=!1,t=new Set,a={subscribe:e=>(t.add(e),()=>void t.delete(e)),start(a,n){(0,w.invariant)(e,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");let s=[];return t.forEach(e=>{s.push((0,b.animateVisualElement)(e,a,{transitionOverride:n}))}),Promise.all(s)},set:a=>((0,w.invariant)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),t.forEach(e=>{var t,n;t=e,Array.isArray(n=a)?N(t,n):"string"==typeof n?N(t,[n]):(0,j.setTarget)(t,n)})),stop(){t.forEach(e=>{e.values.forEach(e=>e.stop())})},mount:()=>(e=!0,()=>{e=!1,a.stop()})};return a}let P=function(){let e=(0,y.useConstant)(S);return(0,v.useIsomorphicLayoutEffect)(e.mount,[]),e};function k({visible:e,color:a="rgba(255,255,255,0.9)"}){return(0,t.jsx)(i.AnimatePresence,{children:e&&(0,t.jsx)(s.motion.div,{initial:{opacity:1},animate:{opacity:0},exit:{opacity:0},transition:{duration:.4},className:"fixed inset-0 z-[100] pointer-events-none",style:{background:a}})})}function C({visible:e,text:a="OBJECTION!"}){return(0,t.jsx)(i.AnimatePresence,{children:e&&(0,t.jsx)(s.motion.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",duration:.3},className:"fixed inset-0 z-[99] flex items-center justify-center pointer-events-none",children:(0,t.jsx)("div",{className:"px-12 py-4 rounded",style:{background:"var(--objection)",boxShadow:"0 0 60px rgba(255, 68, 68, 0.8)"},children:(0,t.jsx)("span",{className:"text-4xl md:text-5xl font-black text-white tracking-widest",style:{textShadow:"2px 2px 4px rgba(0,0,0,0.5)"},children:a})})})})}function _({shake:e,intensity:n,children:i}){let r=P();return(0,a.useEffect)(()=>{if(e&&n>=4){let e=Math.min((n-3)*2,10);r.start({x:[0,e,-e,.6*e,-(.6*e),.3*e,0],transition:{duration:.3,ease:"easeOut"}})}},[e,n,r]),(0,t.jsx)(s.motion.div,{animate:r,className:"flex flex-col h-full",children:i})}function T({visible:e}){return(0,t.jsx)(i.AnimatePresence,{children:e&&(0,t.jsxs)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[100] flex flex-col items-center justify-center pointer-events-none",style:{background:"rgba(0,0,0,0.6)"},children:[(0,t.jsx)(s.motion.span,{initial:{scale:3,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.3},className:"text-8xl",children:"ðŸ”¨"}),(0,t.jsx)(s.motion.span,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},className:"text-3xl font-black tracking-[0.3em] mt-4",style:{color:"var(--accent)"},children:"ORDER!"})]})})}function E({visible:e,reason:a="surrender"}){return(0,t.jsx)(i.AnimatePresence,{children:e&&(0,t.jsxs)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.6},className:"fixed inset-0 z-[200] flex flex-col items-center justify-center pointer-events-none",style:{background:"rgba(10,10,26,0.92)"},children:[(0,t.jsx)(s.motion.span,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",duration:.4},className:"text-6xl md:text-7xl font-black tracking-[0.4em]",style:{color:"var(--guilty)",textShadow:"0 0 60px rgba(220,38,38,0.6)"},children:"GUILTY"}),(0,t.jsx)(s.motion.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.4},className:"text-base mt-6 tracking-wider",style:{color:"var(--text-secondary)"},children:"surrender"===a?"The defendant has surrendered.":"The prosecution's case was too strong."})]})})}function A({visible:e}){return(0,t.jsx)(i.AnimatePresence,{children:e&&(0,t.jsxs)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.6},className:"fixed inset-0 z-[200] flex flex-col items-center justify-center pointer-events-none",style:{background:"rgba(10,26,10,0.92)"},children:[(0,t.jsx)(s.motion.span,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",duration:.4},className:"text-5xl md:text-6xl font-black tracking-[0.3em] text-center",style:{color:"#22c55e",textShadow:"0 0 60px rgba(34,197,94,0.6)"},children:"NOT GUILTY"}),(0,t.jsx)(s.motion.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.4},className:"text-base mt-6 tracking-wider",style:{color:"var(--text-secondary)"},children:"The prosecution's case has been demolished."})]})})}var $=e.i(11795);function H({open:e,onClose:a}){let{caseData:n,attorneyPoints:l,defendantPoints:o,analysis:c}=(0,r.useArgumentStore)();if(!n)return null;let d=({p:e})=>(0,t.jsxs)("div",{className:"flex gap-3 mb-3",children:[(0,t.jsx)("span",{className:"text-xs font-semibold shrink-0 w-7 pt-0.5",style:{color:"var(--primary)"},children:e.id}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm text-white leading-relaxed",children:e.claim}),(0,t.jsx)("span",{className:"text-[10px] font-medium tracking-wider",style:{color:(e=>{switch(e){case"unchallenged":return"var(--text-secondary)";case"challenged":return"var(--hold-it)";case"refuted":return"var(--objection)";case"proven":return"var(--take-that)";default:return"var(--text-muted)"}})(e.status)},children:e.status.toUpperCase()})]})]});return(0,t.jsx)(i.AnimatePresence,{children:e&&(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center",style:{background:"rgba(0,0,0,0.5)"},onClick:a,children:(0,t.jsxs)(s.motion.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:28,stiffness:300},className:"w-full max-w-lg max-h-[80dvh] rounded-t-3xl px-7 pt-6 pb-8 overflow-y-auto",style:{background:"var(--bg-light)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"flex justify-center mb-4",children:(0,t.jsx)("div",{className:"w-10 h-1 rounded-full",style:{background:"rgba(255,255,255,0.15)"}})}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Case Summary"}),(0,t.jsx)("button",{onClick:a,className:"text-sm p-2 cursor-pointer rounded-full hover:bg-white/5 transition-colors",style:{color:"var(--text-muted)"},children:(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,t.jsx)("path",{d:"M12 4L4 12M4 4l8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]}),(0,t.jsxs)(D,{title:"The Case",children:[(0,t.jsx)("p",{className:"text-sm mb-1.5 leading-relaxed",style:{color:"var(--text-secondary)"},children:n.charge}),(0,t.jsx)("p",{className:"text-sm mb-1.5 leading-relaxed",style:{color:"var(--text-secondary)"},children:n.context}),(0,t.jsxs)("p",{className:"text-sm italic",style:{color:"var(--accent)"},children:["â€œ",n.philosophical_tension,"â€"]})]}),(0,t.jsx)(D,{title:"Prosecution Points",children:l.map(e=>(0,t.jsx)(d,{p:e},e.id))}),(0,t.jsx)(D,{title:"Defense Points",children:o.map(e=>(0,t.jsx)(d,{p:e},e.id))}),(0,t.jsxs)(D,{title:"Score",children:[(0,t.jsxs)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Prosecution: ",c.attorneyScore.validPoints," valid, ",c.attorneyScore.fallacies," fallacies"]}),(0,t.jsxs)("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:["Defense: ",c.defendantScore.validPoints," valid, ",c.defendantScore.fallacies," fallacies"]})]}),c.fallacies.length>0&&(0,t.jsx)(D,{title:"Fallacies Identified",children:c.fallacies.map((e,a)=>(0,t.jsxs)("p",{className:"text-sm mb-1 leading-relaxed",style:{color:"var(--text-secondary)"},children:[(0,t.jsxs)("span",{className:"font-medium",children:[e.side,":"]})," ",e.type," â€” ",e.context]},a))})]})})})}function D({title:e,children:a}){return(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("h3",{className:"text-xs font-medium tracking-wider uppercase mt-5 mb-2.5",style:{color:"var(--accent)"},children:e}),a]})}function I({cards:e,onDeploy:a,disabled:n}){let s=e.filter(e=>!e.used);return 0===s.length?null:(0,t.jsxs)("div",{className:"px-4 py-2 shrink-0",style:{borderTop:"1px solid rgba(255,255,255,0.04)"},children:[(0,t.jsxs)("p",{className:"text-[10px] font-medium tracking-wider uppercase mb-1.5",style:{color:"var(--accent)"},children:["Evidence (",s.length," remaining)"]}),(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-none",children:e.map(e=>(0,t.jsxs)("button",{onClick:()=>!e.used&&!n&&a(e),disabled:e.used||n,className:"shrink-0 px-3.5 py-2 rounded-xl text-left transition-all duration-150 active:scale-[0.97] cursor-pointer disabled:cursor-not-allowed",style:{background:e.used?"rgba(255,255,255,0.02)":"rgba(255,56,92,0.1)",border:e.used?"1px solid rgba(255,255,255,0.04)":"1px solid rgba(255,56,92,0.3)",opacity:e.used?.35:n?.5:1,maxWidth:200},children:[(0,t.jsxs)("span",{className:"text-[10px] font-bold block",style:{color:e.used?"var(--text-muted)":"var(--primary)"},children:[e.id," ",e.used&&"â€” USED"]}),(0,t.jsx)("span",{className:"text-[11px] leading-tight block mt-0.5 line-clamp-2",style:{color:e.used?"var(--text-muted)":"var(--text-secondary)"},children:e.claim})]},e.id))})]})}function O(){let e=(0,n.useRouter)(),s=(0,a.useRef)(null),[o,p]=(0,a.useState)(""),[h,x]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[b,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(0),[S,P]=(0,a.useState)(0),[D,O]=(0,a.useState)(!1),[M,L]=(0,a.useState)("rgba(255,255,255,0.9)"),[R,B]=(0,a.useState)(!1),[U,J]=(0,a.useState)("OBJECTION!"),[F,z]=(0,a.useState)(!1),[G,K]=(0,a.useState)(0),[Y,V]=(0,a.useState)(!1),[q,X]=(0,a.useState)(!1),[W,Q]=(0,a.useState)("surrender"),[Z,ee]=(0,a.useState)(!1),et=(0,a.useRef)(null),ea=(0,a.useRef)(!1),{caseData:en,messages:es,suggestions:ei,evidenceCards:er,exchangeCount:el,health:eo,isAttorneyThinking:ec,isSuggestionsLoading:ed,addMessage:eu,setSuggestions:em,incrementExchange:ep,updatePoints:eh,updateAnalysis:ex,applyDamageToOne:ef,setAttorneyThinking:eg,setSuggestionsLoading:ey,setPhase:ev,setOutcome:eb,useEvidenceCard:ej,persist:ew}=(0,r.useArgumentStore)(),{saveArgument:eN}=(0,l.useHistoryStore)(),eS=(0,a.useCallback)(e=>{let{health:t,exchangeCount:a}=r.useArgumentStore.getState();return t.maxHP-t.attorneyHP+Math.min(3*a,30)+50*("won"===e)},[]),eP=(0,a.useCallback)(async e=>{let t=r.useArgumentStore.getState();if(!t.caseData)return;let a=eS(e);await eN({caseData:t.caseData,messages:t.messages,outcome:e,finalHealth:t.health,exchangeCount:t.exchangeCount,score:a});let n=(0,$.createClient)(),{data:{user:s}}=await n.auth.getUser();if(s){let t="won"===e?"wins":"losses",{data:i}=await n.from("profiles").select("wins, losses, total_score").eq("id",s.id).single();i&&await n.from("profiles").update({[t]:i[t]+1,total_score:i.total_score+a}).eq("id",s.id)}},[eN,eS]);(0,a.useEffect)(()=>{en||e.replace("/")},[en,e]),(0,a.useEffect)(()=>{en&&0===es.length&&!ea.current&&(ea.current=!0,eE())},[en]),(0,a.useEffect)(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[es.length,ec]);let ek=(0,a.useCallback)(e=>{et.current={x:e.clientX,y:e.clientY}},[]),eC=(0,a.useCallback)(t=>{if(!et.current)return;let a=t.clientX-et.current.x,n=t.clientY-et.current.y;(et.current=null,a>100&&80>Math.abs(n))?e.replace("/"):n>50&&50>Math.abs(a)&&x(!0)},[e]),e_=(0,a.useCallback)(e=>{if(e>=4&&(K(e),z(!0),setTimeout(()=>z(!1),350)),e>=7&&e<10){O(!0),L("rgba(255,255,255,0.9)"),setTimeout(()=>O(!1),500);let e=r.useArgumentStore.getState(),t=e.messages[e.messages.length-1];if(t){let e=t.text.toUpperCase();e.includes("OBJECTION")?(J("OBJECTION!"),B(!0),setTimeout(()=>B(!1),1200)):e.includes("HOLD IT")?(J("HOLD IT!"),B(!0),setTimeout(()=>B(!1),1200)):e.includes("TAKE THAT")&&(J("TAKE THAT!"),B(!0),setTimeout(()=>B(!1),1200))}}e>=10&&(V(!0),O(!0),L("rgba(255,255,255,0.9)"),setTimeout(()=>{O(!1),V(!1)},1500))},[]),eT=(0,a.useCallback)(async t=>{j(!0),em([]),await new Promise(e=>setTimeout(e,800)),"attorney_ko"===t?(ee(!0),e_(10),await eP("won"),ew(),setTimeout(()=>{eb("won"),ee(!1),e.replace("/")},3500)):(Q("ko"),X(!0),e_(10),await eP("lost"),ew(),setTimeout(()=>{eb("lost"),X(!1),e.replace("/")},3500))},[e_,eP,ew,eb,em,e]),eE=async()=>{if(en){eg(!0),await new Promise(e=>setTimeout(e,1500)),eu(en.opening_statement,"attorney",5),eg(!1),e_(5),ey(!0);try{let e=await d(0);em(e.suggestions)}catch{em([{text:"OBJECTION! I demand to see the evidence!",type:"objection",variant:"default"},{text:"That opening statement is misleading!",type:"strategic",variant:"default"},{text:"The defense is ready to present its case!",type:"dramatic",variant:"default"},{text:"Let's examine the facts more carefully.",type:"strategic",variant:"default"}])}ey(!1)}},eA=async t=>{if(y||b||!t.trim())return;v(!0);let a="...I surrender."===t;eu(t.trim(),"user"),ep(),em([]),p("");let n=0;for(let e of r.useArgumentStore.getState().evidenceCards.filter(e=>!e.used))if(t.toUpperCase().includes(e.id)){ej(e.id),n+=10;break}if(a){ev("surrender"),await new Promise(e=>setTimeout(e,2e3)),eg(!0);try{let a=await c(t,!0);eu(a.message,"attorney",10),eg(!1),e_(10),await new Promise(e=>setTimeout(e,1500)),Q("surrender"),X(!0),await eP("lost"),ew(),setTimeout(()=>{eb("lost"),X(!1),e.replace("/")},3e3)}catch{eg(!1)}v(!1);return}eg(!0);try{let e=await c(t),a=e.damage_to_attorney+n;N(a),P(0);let s=ef("attorney",a);if("none"!==s){e.updated_points.length>0&&eh(e.updated_points),eu(e.message,"attorney",e.intensity_level),eg(!1),e_(e.intensity_level),await eT(s),v(!1);return}await new Promise(e=>setTimeout(e,600)),e.updated_points.length>0&&eh(e.updated_points),(e.fallacies_identified.length>0||e.assumptions_challenged.length>0)&&ex(e.fallacies_identified,e.assumptions_challenged),eu(e.message,"attorney",e.intensity_level),eg(!1),e_(e.intensity_level),await new Promise(e=>setTimeout(e,400)),N(0),P(e.damage_to_defendant);let i=ef("defendant",e.damage_to_defendant);if("none"!==i){await eT(i),v(!1);return}ey(!0);let l=r.useArgumentStore.getState().exchangeCount;try{let e=await d(l);em(e.suggestions)}catch{em([{text:"OBJECTION! That argument is flawed!",type:"objection",variant:"default"},{text:"Let me present my evidence.",type:"evidence",variant:"default"},{text:"The truth will prevail!",type:"dramatic",variant:"default"}])}ey(!1),ew()}catch{eg(!1),ey(!1)}v(!1)},e$=(0,a.useCallback)(e=>{eA(e.text)},[y,b]),eH=(0,a.useCallback)(()=>{o.trim()&&eA(o.trim())},[o,y,b]),eD=(0,a.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eH())},[eH]);return en?(0,t.jsxs)("div",{className:"h-dvh flex flex-col select-none overflow-hidden",style:{background:"var(--bg)"},onPointerDown:ek,onPointerUp:eC,children:[(0,t.jsxs)(_,{shake:F,intensity:G,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 py-3.5 shrink-0",style:{borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[(0,t.jsx)("h1",{className:"text-sm font-medium text-white truncate flex-1 mr-3",children:en.title}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"text-xs font-medium tabular-nums",style:{color:"var(--text-muted)"},children:["Round ",el]}),(0,t.jsx)("button",{onClick:()=>x(!0),className:"text-xs px-3.5 py-1.5 rounded-full border cursor-pointer hover:bg-white/5 transition-all duration-150",style:{borderColor:"var(--chip-border)",color:"var(--text-secondary)"},children:"Case Details"})]})]}),(0,t.jsxs)("div",{className:"px-5 py-3 shrink-0",style:{background:"rgba(255,255,255,0.02)",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[(0,t.jsxs)("p",{className:"text-xs font-medium",style:{color:"var(--text-secondary)"},children:[(0,t.jsx)("span",{style:{color:"var(--text-muted)"},children:"Charged with: "}),en.charge]}),en.philosophical_tension&&(0,t.jsxs)("p",{className:"text-[11px] italic mt-0.5",style:{color:"var(--text-muted)"},children:["â€œ",en.philosophical_tension,"â€"]})]}),(0,t.jsx)(g.HealthBar,{health:eo,lastDamageToAttorney:w,lastDamageToDefendant:S}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto flex flex-col py-2",children:[(0,t.jsx)(i.AnimatePresence,{mode:"popLayout",children:es.map(e=>(0,t.jsx)(u.MessageBubble,{message:e},e.id))}),ec&&(0,t.jsx)(m,{}),(0,t.jsx)("div",{ref:s})]}),!b&&er.filter(e=>!e.used).length>0&&(0,t.jsx)(I,{cards:er,onDeploy:e=>{eA(`TAKE THAT! I present ${e.id} â€” ${e.claim}! The evidence clearly shows: ${e.evidence}`)},disabled:y}),!b&&(0,t.jsx)(f,{suggestions:ei,onSelect:e$,isLoading:ed,disabled:y}),!b&&(0,t.jsxs)("div",{className:"flex items-center gap-3 px-5 py-3 shrink-0",style:{borderTop:"1px solid rgba(255,255,255,0.06)"},children:[(0,t.jsx)("input",{type:"text",placeholder:"Type your own argument...",value:o,onChange:e=>p(e.target.value),onKeyDown:eD,disabled:y,className:"flex-1 rounded-xl px-4 py-3 text-sm border outline-none disabled:opacity-50 placeholder:text-[var(--text-muted)] transition-colors duration-150",style:{background:"var(--bg-light)",borderColor:"rgba(255,255,255,0.08)",color:"var(--text-primary)"}}),(0,t.jsx)("button",{onClick:eH,disabled:!o.trim()||y,className:"w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-150 cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed hover:brightness-110 active:scale-[0.96]",style:{background:"var(--primary)"},children:(0,t.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:(0,t.jsx)("path",{d:"M5 12h14M13 5l7 7-7 7",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),(0,t.jsx)(k,{visible:D,color:M}),(0,t.jsx)(C,{visible:R,text:U}),(0,t.jsx)(T,{visible:Y}),(0,t.jsx)(E,{visible:q,reason:W}),(0,t.jsx)(A,{visible:Z}),(0,t.jsx)(H,{open:h,onClose:()=>x(!1)})]}):null}e.s(["default",()=>O],41222)}]);