(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88653,e=>{"use strict";e.i(47167);var t=e.i(43476),n=e.i(71645),a=e.i(31178),s=e.i(47414),i=e.i(74008),o=e.i(21476),l=e.i(72846),r=n,c=e.i(37806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,n=(0,l.isHTMLElement)(e)&&e.offsetWidth||0,a=(0,l.isHTMLElement)(e)&&e.offsetHeight||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=n-s.width-s.left,s.bottom=a-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:a,anchorX:s,anchorY:i,root:o,pop:l}){let h=(0,r.useId)(),f=(0,r.useRef)(null),p=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:g}=(0,r.useContext)(c.MotionConfigContext),m=function(...e){return n.useCallback(function(...e){return t=>{let n=!1,a=e.map(e=>{let a=d(e,t);return n||"function"!=typeof a||(n=!0),a});if(n)return()=>{for(let t=0;t<a.length;t++){let n=a[t];"function"==typeof n?n():d(e[t],null)}}}}(...e),e)}(f,e.props?.ref??e?.ref);return(0,r.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:r,right:c,bottom:d}=p.current;if(a||!1===l||!f.current||!e||!t)return;let u="left"===s?`left: ${r}`:`right: ${c}`,m="bottom"===i?`bottom: ${d}`:`top: ${n}`;f.current.dataset.motionPopId=h;let y=document.createElement("style");g&&(y.nonce=g);let x=o??document.head;return x.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            ${m}px !important;
          }
        `),()=>{x.contains(y)&&x.removeChild(y)}},[a]),(0,t.jsx)(u,{isPresent:a,childRef:f,sizeRef:p,pop:l,children:!1===l?e:r.cloneElement(e,{ref:m})})}let f=({children:e,initial:a,isPresent:i,onExitComplete:l,custom:r,presenceAffectsLayout:c,mode:d,anchorX:u,anchorY:f,root:g})=>{let m=(0,s.useConstant)(p),y=(0,n.useId)(),x=!0,v=(0,n.useMemo)(()=>(x=!1,{id:y,initial:a,isPresent:i,custom:r,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;l&&l()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[i,m,l]);return c&&x&&(v={...v}),(0,n.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[i]),n.useEffect(()=>{i||m.size||!l||l()},[i]),e=(0,t.jsx)(h,{pop:"popLayout"===d,isPresent:i,anchorX:u,anchorY:f,root:g,children:e}),(0,t.jsx)(o.PresenceContext.Provider,{value:v,children:e})};function p(){return new Map}var g=e.i(64978);let m=e=>e.key||"";function y(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}let x=({children:e,custom:o,initial:l=!0,onExitComplete:r,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:h="left",anchorY:p="top",root:x})=>{let[v,S]=(0,g.usePresence)(u),C=(0,n.useMemo)(()=>y(e),[e]),P=u&&!v?[]:C.map(m),$=(0,n.useRef)(!0),b=(0,n.useRef)(C),A=(0,s.useConstant)(()=>new Map),E=(0,n.useRef)(new Set),[j,w]=(0,n.useState)(C),[I,k]=(0,n.useState)(C);(0,i.useIsomorphicLayoutEffect)(()=>{$.current=!1,b.current=C;for(let e=0;e<I.length;e++){let t=m(I[e]);P.includes(t)?(A.delete(t),E.current.delete(t)):!0!==A.get(t)&&A.set(t,!1)}},[I,P.length,P.join("-")]);let T=[];if(C!==j){let e=[...C];for(let t=0;t<I.length;t++){let n=I[t],a=m(n);P.includes(a)||(e.splice(t,0,n),T.push(n))}return"wait"===d&&T.length&&(e=T),k(y(e)),w(C),null}let{forceRender:M}=(0,n.useContext)(a.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:I.map(e=>{let n=m(e),a=(!u||!!v)&&(C===I||P.includes(n));return(0,t.jsx)(f,{isPresent:a,initial:(!$.current||!!l)&&void 0,custom:o,presenceAffectsLayout:c,mode:d,root:x,onExitComplete:a?void 0:()=>{if(E.current.has(n)||(E.current.add(n),!A.has(n)))return;A.set(n,!0);let e=!0;A.forEach(t=>{t||(e=!1)}),e&&(M?.(),k(b.current),u&&S?.(),r&&r())},anchorX:h,anchorY:p,children:e},n)})})};e.s(["AnimatePresence",()=>x],88653)},68834,e=>{"use strict";var t=e.i(71645);let n=e=>{let t,n=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,i={setState:a,getState:s,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(a,s,i);return i},a=e=>{let a=e?n(e):n,s=e=>(function(e,n=e=>e){let a=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>n(e.getState()),[e,n]),t.default.useCallback(()=>n(e.getInitialState()),[e,n]));return t.default.useDebugValue(a),a})(a,e);return Object.assign(s,a),s},s=e=>e?a(e):a;e.s(["create",()=>s],68834)},399,85459,e=>{"use strict";var t=e.i(68834);function n(e){return`# ${e.title}

## Charge
${e.charge}

## Context
${e.context}

## The Real Question
${e.philosophical_tension}
`}function a(e,t){let n=e.map(e=>`| ${e.id} | ${e.claim} | ${e.evidence} | ${e.status} |`).join("\n"),a=e.filter(e=>"refuted"===e.status).map(e=>`- ${e.id}: ${e.claim}`).join("\n");return`# ${"prosecution"===t?"Prosecution Arguments":"Defense Arguments"}

| ID | Claim | Evidence | Status |
|----|-------|----------|--------|
${n}

## Concessions
${a||"- None"}
`}function s(e){let t=e.assumptions.map(e=>`| ${e.side} | ${e.assumption} | ${e.state} |`).join("\n"),n=e.fallacies.map(e=>`| ${e.side} | ${e.type} | ${e.context} | ${e.exchangeNumber} |`).join("\n");return`# Argument Analysis

## Key Assumptions
| Side | Assumption | State |
|------|-----------|-------|
${t||"| - | - | - |"}

## Fallacies Identified
| Side | Type | Context | Exchange # |
|------|------|---------|-----------|
${n||"| - | - | - | - |"}

## Score
- Attorney: ${e.attorneyScore.validPoints} valid points, ${e.attorneyScore.fallacies} fallacies, ${e.attorneyScore.challenged} challenged
- Defendant: ${e.defendantScore.validPoints} valid points, ${e.defendantScore.fallacies} fallacies, ${e.defendantScore.challenged} challenged
`}function i(e){if(0===e.length)return"# Conversation Log\n\n(No exchanges yet)\n";let t="# Conversation Log\n\n",n=0,a="";for(let s of e){"attorney"===s.sender&&"attorney"!==a&&(n++,t+=`## Exchange ${n}
`);let e="attorney"===s.sender?"Attorney":"User";t+=`**${e}:** ${s.text}

`,a=s.sender}return t}function o(e,t,n){let a=[...e],s=[...t];for(let e of n){let t=a.findIndex(t=>t.id===e.id);if(t>=0){a[t]={...a[t],status:e.new_status};continue}let n=s.findIndex(t=>t.id===e.id);n>=0&&(s[n]={...s[n],status:e.new_status})}return{attorneyPoints:a,defendantPoints:s}}function l(e,t,n){let a=[...e.fallacies,...t.map(e=>({...e,exchangeNumber:n}))],s=a.filter(e=>"attorney"===e.side).length,i=a.filter(e=>"defendant"===e.side).length;return{...e,fallacies:a,attorneyScore:{...e.attorneyScore,fallacies:s},defendantScore:{...e.defendantScore,fallacies:i}}}function r(e,t){let n=[...e.assumptions];for(let e of t){let t=n.findIndex(t=>t.side===e.side&&t.assumption===e.assumption);t>=0?n[t]={...n[t],state:e.new_state}:n.push({side:e.side,assumption:e.assumption,state:e.new_state})}return{...e,assumptions:n}}function c(e,t,n){return{...e,attorneyScore:{...e.attorneyScore,validPoints:t.filter(e=>"unchallenged"===e.status||"proven"===e.status).length,challenged:t.filter(e=>"challenged"===e.status).length},defendantScore:{...e.defendantScore,validPoints:n.filter(e=>"unchallenged"===e.status||"proven"===e.status).length,challenged:n.filter(e=>"challenged"===e.status).length}}}function d(){return{assumptions:[],fallacies:[],attorneyScore:{validPoints:0,fallacies:0,challenged:0},defendantScore:{validPoints:0,fallacies:0,challenged:0}}}e.s(["applyAssumptions",()=>r,"applyFallacies",()=>l,"applyPointUpdates",()=>o,"createInitialAnalysis",()=>d,"generateAnalysisMd",()=>s,"generateConversationMd",()=>i,"generateIssueMd",()=>n,"generatePointsMd",()=>a,"recalcScores",()=>c],85459);let u="ace_attorney_state",h={attorneyHP:100,defendantHP:100,maxHP:100},f={phase:"splash",caseData:null,attorneyPoints:[],defendantPoints:[],analysis:d(),health:{...h},messages:[],suggestions:[],evidenceCards:[],exchangeCount:0,isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1,outcome:null},p=(0,t.create)((e,t)=>({...f,initCase:t=>e({caseData:t,attorneyPoints:t.attorney_points,defendantPoints:t.defendant_points,analysis:{...d(),attorneyScore:{validPoints:t.attorney_points.length,fallacies:0,challenged:0},defendantScore:{validPoints:t.defendant_points.length,fallacies:0,challenged:0}},health:{...h},messages:[],suggestions:[],evidenceCards:[],exchangeCount:0,outcome:null,phase:"intro"}),setPhase:t=>e({phase:t}),reset:()=>e({...f}),addMessage:(t,n,a)=>{let s={id:`msg_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,text:t,sender:n,timestamp:Date.now(),intensity:a};e(e=>({messages:[...e.messages,s]}))},setSuggestions:t=>e({suggestions:t}),incrementExchange:()=>e(e=>({exchangeCount:e.exchangeCount+1})),updatePoints:t=>e(e=>{let n=o(e.attorneyPoints,e.defendantPoints,t),a=c(e.analysis,n.attorneyPoints,n.defendantPoints);return{...n,analysis:a}}),updateAnalysis:(t,n)=>e(e=>{let a=e.analysis;return t.length>0&&(a=l(a,t,e.exchangeCount)),n.length>0&&(a=r(a,n)),{analysis:a}}),setGeneratingCase:t=>e({isGeneratingCase:t}),setAttorneyThinking:t=>e({isAttorneyThinking:t}),setSuggestionsLoading:t=>e({isSuggestionsLoading:t}),setOutcome:t=>e({outcome:t,phase:"ended"}),applyDamage:(n,a)=>{let s=t(),i=Math.max(0,s.health.attorneyHP-n),o=Math.max(0,s.health.defendantHP-a);return(e({health:{...s.health,attorneyHP:i,defendantHP:o}}),i<=0)?"attorney_ko":o<=0?"defendant_ko":"none"},applyDamageToOne:(n,a)=>{let s=t();if("attorney"===n){let t=Math.max(0,s.health.attorneyHP-a);if(e({health:{...s.health,attorneyHP:t}}),t<=0)return"attorney_ko"}else{let t=Math.max(0,s.health.defendantHP-a);if(e({health:{...s.health,defendantHP:t}}),t<=0)return"defendant_ko"}return"none"},evidenceCards:[],selectEvidenceCards:n=>{let a=t();a.caseData&&e({evidenceCards:a.caseData.defendant_points.filter(e=>n.includes(e.id)).map(e=>({id:e.id,claim:e.claim,evidence:e.evidence,used:!1}))})},useEvidenceCard:t=>{e(e=>({evidenceCards:e.evidenceCards.map(e=>e.id===t?{...e,used:!0}:e)}))},persist:()=>{try{let e=t(),n={phase:e.phase,caseData:e.caseData,attorneyPoints:e.attorneyPoints,defendantPoints:e.defendantPoints,analysis:e.analysis,health:e.health,messages:e.messages,suggestions:e.suggestions,evidenceCards:e.evidenceCards,exchangeCount:e.exchangeCount,isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1,outcome:e.outcome};localStorage.setItem(u,JSON.stringify(n))}catch{}},hydrate:()=>{try{let t=localStorage.getItem(u);if(t){let n=JSON.parse(t);e({...n,health:n.health??{...h},isGeneratingCase:!1,isAttorneyThinking:!1,isSuggestionsLoading:!1})}}catch{}}}));e.s(["useArgumentStore",0,p],399)},66395,e=>{"use strict";var t=e.i(43476),n=e.i(71645),a=e.i(18566),s=e.i(46932),i=e.i(88653),o=e.i(399);function l(){let e=(0,a.useRouter)(),{caseData:l,setPhase:r}=(0,o.useArgumentStore)(),[c,d]=(0,n.useState)(0),[u,h]=(0,n.useState)(!1),f=l?[{text:"COURT IS NOW IN SESSION",style:"label",delay:0},{text:l.title,style:"title",delay:800},{text:l.charge,style:"charge",delay:1800},{text:l.context,style:"context",delay:3e3},{text:`\u201C${l.philosophical_tension}\u201D`,style:"tension",delay:4500}]:[];if((0,n.useEffect)(()=>{if(!l)return void e.replace("/");let t=[];f.forEach((e,n)=>{t.push(setTimeout(()=>{d(e=>Math.max(e,n+1))},e.delay))});let n=f[f.length-1]?.delay??0;return t.push(setTimeout(()=>{h(!0)},n+600)),()=>t.forEach(clearTimeout)},[l]),!l)return null;let p={label:"text-xs tracking-[0.4em] font-semibold",title:"text-2xl md:text-3xl font-semibold tracking-wide text-white",charge:"text-base md:text-lg font-medium italic",context:"text-sm leading-relaxed",tension:"text-sm md:text-base italic leading-relaxed"},g={label:"var(--accent)",title:"var(--text-primary)",charge:"var(--primary)",context:"var(--text-secondary)",tension:"var(--accent)"};return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-dvh p-8 select-none",style:{background:"var(--bg)"},children:[(0,t.jsx)("div",{className:"flex flex-col items-center gap-7 max-w-lg",children:(0,t.jsx)(i.AnimatePresence,{children:f.slice(0,c).map((e,n)=>(0,t.jsxs)(s.motion.div,{initial:"title"===e.style?{opacity:0,scale:.95}:{opacity:0,y:16},animate:"title"===e.style?{opacity:1,scale:1}:{opacity:1,y:0},transition:{duration:"title"===e.style?.6:.5,type:"title"===e.style?"spring":"tween"},className:"text-center",children:[(0,t.jsx)("p",{className:p[e.style],style:{color:g[e.style]},children:e.text}),"title"===e.style&&(0,t.jsx)(s.motion.div,{initial:{width:0},animate:{width:64},transition:{delay:.3,duration:.4},className:"h-[2px] mx-auto mt-3 rounded-full",style:{background:"var(--primary)"}})]},n))})}),(0,t.jsx)(i.AnimatePresence,{children:u&&(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},className:"absolute bottom-16",children:(0,t.jsx)("button",{onClick:()=>{e.push("/evidence-select")},className:"px-10 py-3.5 rounded-full text-white text-sm font-semibold tracking-widest transition-all duration-200 hover:brightness-110 active:scale-[0.97] cursor-pointer",style:{background:"var(--primary)",boxShadow:"0 4px 24px rgba(255,56,92,0.35)"},children:"BEGIN TRIAL"})})})]})}e.s(["default",()=>l])}]);