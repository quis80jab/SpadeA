{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/settings/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { motion } from \"framer-motion\";\nimport { createClient } from \"@/src/lib/supabase/client\";\nimport type { UserProfile } from \"@/src/state/types\";\n\nexport default function SettingsPage() {\n  const router = useRouter();\n  const supabase = createClient();\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [displayName, setDisplayName] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [saved, setSaved] = useState(false);\n\n  useEffect(() => {\n    async function load() {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        router.replace(\"/login\");\n        return;\n      }\n\n      const { data } = await supabase\n        .from(\"profiles\")\n        .select(\"*\")\n        .eq(\"id\", user.id)\n        .single();\n\n      if (data) {\n        const p = data as unknown as UserProfile;\n        setProfile(p);\n        setDisplayName(p.display_name);\n      }\n      setLoading(false);\n    }\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleSave = async () => {\n    if (!profile || saving) return;\n    setSaving(true);\n    setSaved(false);\n\n    await supabase\n      .from(\"profiles\")\n      .update({\n        display_name: displayName.trim() || profile.display_name,\n        arguments_public_by_default: profile.arguments_public_by_default,\n        theme: profile.theme,\n      })\n      .eq(\"id\", profile.id);\n\n    // Apply theme\n    document.documentElement.classList.toggle(\"light\", profile.theme === \"light\");\n\n    setSaving(false);\n    setSaved(true);\n    setTimeout(() => setSaved(false), 2000);\n  };\n\n  const handleSignOut = async () => {\n    await supabase.auth.signOut();\n    router.push(\"/\");\n    router.refresh();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-dvh\" style={{ background: \"var(--bg)\" }}>\n        <div className=\"w-6 h-6 border-2 border-t-transparent rounded-full animate-spin\" style={{ borderColor: \"var(--primary)\", borderTopColor: \"transparent\" }} />\n      </div>\n    );\n  }\n\n  if (!profile) return null;\n\n  return (\n    <div className=\"flex flex-col h-dvh\" style={{ background: \"var(--bg)\" }}>\n      {/* Header */}\n      <div className=\"flex items-center gap-3 px-5 py-3.5 shrink-0\" style={{ borderBottom: \"1px solid rgba(255,255,255,0.06)\" }}>\n        <button\n          onClick={() => router.push(\"/profile\")}\n          className=\"text-sm px-3.5 py-1.5 rounded-full border cursor-pointer hover:bg-white/5 transition-all duration-150\"\n          style={{ borderColor: \"var(--chip-border)\", color: \"var(--text-secondary)\" }}\n        >\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"inline mr-1 -mt-0.5\"><path d=\"M19 12H5M12 19l-7-7 7-7\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n          Back\n        </button>\n        <h1 className=\"text-sm font-medium text-white flex-1\">Settings</h1>\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto\">\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"px-6 py-6 flex flex-col gap-6\"\n        >\n          {/* Display Name */}\n          <div>\n            <label className=\"text-xs font-medium tracking-wider uppercase block mb-2\" style={{ color: \"var(--text-muted)\" }}>\n              Display Name\n            </label>\n            <input\n              type=\"text\"\n              value={displayName}\n              onChange={(e) => setDisplayName(e.target.value)}\n              className=\"w-full rounded-xl px-4 py-3 text-sm border outline-none\n                         placeholder:text-[var(--text-muted)] transition-colors duration-150\"\n              style={{ background: \"var(--bg-light)\", borderColor: \"rgba(255,255,255,0.08)\", color: \"var(--text-primary)\" }}\n            />\n          </div>\n\n          {/* Theme */}\n          <div>\n            <label className=\"text-xs font-medium tracking-wider uppercase block mb-2\" style={{ color: \"var(--text-muted)\" }}>\n              Theme\n            </label>\n            <div className=\"flex gap-2\">\n              {([\"dark\", \"light\"] as const).map((t) => (\n                <button\n                  key={t}\n                  onClick={() => setProfile({ ...profile, theme: t })}\n                  className=\"flex-1 py-2.5 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer\"\n                  style={{\n                    background: profile.theme === t ? \"rgba(255,255,255,0.1)\" : \"var(--bg-light)\",\n                    color: profile.theme === t ? \"var(--text-primary)\" : \"var(--text-muted)\",\n                    border: profile.theme === t ? \"1px solid rgba(255,255,255,0.15)\" : \"1px solid transparent\",\n                  }}\n                >\n                  {t === \"dark\" ? \"Dark\" : \"Light\"}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Privacy Default */}\n          <div>\n            <label className=\"text-xs font-medium tracking-wider uppercase block mb-2\" style={{ color: \"var(--text-muted)\" }}>\n              Default Argument Privacy\n            </label>\n            <div className=\"flex gap-2\">\n              {[\n                { value: true, label: \"Public\" },\n                { value: false, label: \"Private\" },\n              ].map((opt) => (\n                <button\n                  key={String(opt.value)}\n                  onClick={() => setProfile({ ...profile, arguments_public_by_default: opt.value })}\n                  className=\"flex-1 py-2.5 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer\"\n                  style={{\n                    background: profile.arguments_public_by_default === opt.value ? \"rgba(255,255,255,0.1)\" : \"var(--bg-light)\",\n                    color: profile.arguments_public_by_default === opt.value ? \"var(--text-primary)\" : \"var(--text-muted)\",\n                    border: profile.arguments_public_by_default === opt.value ? \"1px solid rgba(255,255,255,0.15)\" : \"1px solid transparent\",\n                  }}\n                >\n                  {opt.label}\n                </button>\n              ))}\n            </div>\n            <p className=\"text-[11px] mt-1.5\" style={{ color: \"var(--text-muted)\" }}>\n              Public arguments can be shared and appear on your profile.\n            </p>\n          </div>\n\n          {/* Save */}\n          <button\n            onClick={handleSave}\n            disabled={saving}\n            className=\"w-full py-3 rounded-xl text-white text-sm font-semibold tracking-wide\n                       transition-all duration-200 hover:brightness-110 active:scale-[0.98]\n                       cursor-pointer disabled:opacity-50\"\n            style={{ background: \"var(--primary)\" }}\n          >\n            {saving ? \"Saving...\" : saved ? \"Saved\" : \"Save Changes\"}\n          </button>\n\n          {/* Divider */}\n          <div className=\"h-px\" style={{ background: \"rgba(255,255,255,0.06)\" }} />\n\n          {/* Sign Out */}\n          <button\n            onClick={handleSignOut}\n            className=\"w-full py-3 rounded-xl text-sm font-medium transition-all duration-150 cursor-pointer hover:bg-white/5\"\n            style={{ color: \"var(--primary)\", border: \"1px solid rgba(255,56,92,0.2)\" }}\n          >\n            Sign Out\n          </button>\n        </motion.div>\n      </div>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}