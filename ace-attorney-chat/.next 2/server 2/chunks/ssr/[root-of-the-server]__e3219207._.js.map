{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/profile/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { motion } from \"framer-motion\";\nimport { createClient } from \"@/src/lib/supabase/client\";\nimport type { UserProfile, SavedArgument } from \"@/src/state/types\";\n\nfunction formatDate(ts: string): string {\n  return new Date(ts).toLocaleDateString(\"en-US\", { month: \"short\", day: \"numeric\", year: \"numeric\" });\n}\n\nconst outcomeBadge: Record<string, { label: string; color: string; bg: string }> = {\n  won: { label: \"Won\", color: \"#34D399\", bg: \"rgba(52,211,153,0.12)\" },\n  lost: { label: \"Lost\", color: \"#F87171\", bg: \"rgba(248,113,113,0.12)\" },\n};\n\nexport default function ProfilePage() {\n  const router = useRouter();\n  const supabase = createClient();\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [args, setArgs] = useState<SavedArgument[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function load() {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        router.replace(\"/login\");\n        return;\n      }\n\n      const { data: profileData } = await supabase\n        .from(\"profiles\")\n        .select(\"*\")\n        .eq(\"id\", user.id)\n        .single();\n\n      if (profileData) setProfile(profileData as unknown as UserProfile);\n\n      const { data: argsData } = await supabase\n        .from(\"arguments\")\n        .select(\"*\")\n        .eq(\"user_id\", user.id)\n        .order(\"created_at\", { ascending: false })\n        .limit(20);\n\n      if (argsData) {\n        setArgs(\n          argsData.map((row: Record<string, unknown>) => ({\n            id: row.id as string,\n            user_id: row.user_id as string,\n            caseData: row.case_data as SavedArgument[\"caseData\"],\n            messages: row.messages as SavedArgument[\"messages\"],\n            outcome: row.outcome as SavedArgument[\"outcome\"],\n            finalHealth: row.final_health as SavedArgument[\"finalHealth\"],\n            exchangeCount: row.exchange_count as number,\n            score: (row.score as number) ?? 0,\n            starred: row.starred as boolean,\n            is_public: row.is_public as boolean,\n            createdAt: new Date(row.created_at as string).getTime(),\n          }))\n        );\n      }\n\n      setLoading(false);\n    }\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-dvh\" style={{ background: \"var(--bg)\" }}>\n        <div className=\"w-6 h-6 border-2 border-t-transparent rounded-full animate-spin\" style={{ borderColor: \"var(--primary)\", borderTopColor: \"transparent\" }} />\n      </div>\n    );\n  }\n\n  if (!profile) return null;\n\n  const winRate = (profile.wins + profile.losses) > 0\n    ? Math.round((profile.wins / (profile.wins + profile.losses)) * 100)\n    : 0;\n\n  return (\n    <div className=\"flex flex-col h-dvh\" style={{ background: \"var(--bg)\" }}>\n      {/* Header */}\n      <div className=\"flex items-center gap-3 px-5 py-3.5 shrink-0\" style={{ borderBottom: \"1px solid rgba(255,255,255,0.06)\" }}>\n        <button\n          onClick={() => router.push(\"/\")}\n          className=\"text-sm px-3.5 py-1.5 rounded-full border cursor-pointer hover:bg-white/5 transition-all duration-150\"\n          style={{ borderColor: \"var(--chip-border)\", color: \"var(--text-secondary)\" }}\n        >\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"inline mr-1 -mt-0.5\"><path d=\"M19 12H5M12 19l-7-7 7-7\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n          Back\n        </button>\n        <h1 className=\"text-sm font-medium text-white flex-1\">Profile</h1>\n        <button\n          onClick={() => router.push(\"/settings\")}\n          className=\"text-xs px-3.5 py-1.5 rounded-full border cursor-pointer hover:bg-white/5 transition-all duration-150\"\n          style={{ borderColor: \"var(--chip-border)\", color: \"var(--text-secondary)\" }}\n        >\n          Settings\n        </button>\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto\">\n        {/* Profile Card */}\n        <motion.div\n          initial={{ opacity: 0, y: 8 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"px-6 pt-8 pb-6\"\n        >\n          <div className=\"flex items-center gap-4 mb-6\">\n            <div\n              className=\"w-14 h-14 rounded-full flex items-center justify-center text-xl font-semibold\"\n              style={{ background: \"var(--bg-card)\", color: \"var(--primary)\" }}\n            >\n              {profile.display_name.charAt(0).toUpperCase()}\n            </div>\n            <div>\n              <h2 className=\"text-lg font-semibold text-white\">{profile.display_name}</h2>\n              <p className=\"text-xs mt-0.5\" style={{ color: \"var(--text-muted)\" }}>\n                Joined {formatDate(profile.created_at)}\n              </p>\n            </div>\n          </div>\n\n          {/* Stats Grid */}\n          <div className=\"grid grid-cols-4 gap-3\">\n            {[\n              { label: \"Score\", value: profile.total_score.toLocaleString() },\n              { label: \"Wins\", value: profile.wins.toString() },\n              { label: \"Losses\", value: profile.losses.toString() },\n              { label: \"Win Rate\", value: `${winRate}%` },\n            ].map((stat) => (\n              <div\n                key={stat.label}\n                className=\"rounded-xl p-3 text-center\"\n                style={{ background: \"var(--bg-light)\" }}\n              >\n                <p className=\"text-lg font-semibold text-white\">{stat.value}</p>\n                <p className=\"text-[10px] mt-0.5\" style={{ color: \"var(--text-muted)\" }}>{stat.label}</p>\n              </div>\n            ))}\n          </div>\n        </motion.div>\n\n        {/* Divider */}\n        <div className=\"px-6 pb-2\">\n          <div className=\"h-px\" style={{ background: \"rgba(255,255,255,0.06)\" }} />\n        </div>\n\n        {/* Arguments list */}\n        <div className=\"px-6 pb-6\">\n          <h3 className=\"text-xs font-medium tracking-wider uppercase mb-3\" style={{ color: \"var(--text-muted)\" }}>\n            Recent Arguments\n          </h3>\n          {args.length === 0 ? (\n            <p className=\"text-sm py-8 text-center\" style={{ color: \"var(--text-muted)\" }}>\n              No arguments yet. Enter the courtroom to begin.\n            </p>\n          ) : (\n            <div className=\"flex flex-col gap-2.5\">\n              {args.map((arg, idx) => {\n                const badge = outcomeBadge[arg.outcome] ?? outcomeBadge[\"lost\"];\n                return (\n                  <motion.div\n                    key={arg.id}\n                    initial={{ opacity: 0, y: 6 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: idx * 0.03 }}\n                    className=\"rounded-xl p-4 flex items-center gap-3 cursor-pointer hover:bg-white/[0.03] transition-all\"\n                    style={{ background: \"var(--bg-light)\" }}\n                    onClick={() => router.push(`/argument/${arg.id}`)}\n                  >\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium text-white truncate\">{arg.caseData.title}</p>\n                      <p className=\"text-[11px] mt-0.5 truncate\" style={{ color: \"var(--text-muted)\" }}>\n                        {arg.exchangeCount} rounds &middot; +{arg.score} pts\n                        {arg.is_public && \" \\u00B7 Public\"}\n                      </p>\n                    </div>\n                    <span\n                      className=\"text-[10px] font-medium tracking-wide px-2.5 py-1 rounded-full shrink-0\"\n                      style={{ color: badge.color, background: badge.bg }}\n                    >\n                      {badge.label}\n                    </span>\n                    {arg.is_public && (\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          navigator.clipboard.writeText(`${window.location.origin}/a/${arg.id}`);\n                        }}\n                        className=\"text-xs px-2.5 py-1 rounded-full border cursor-pointer hover:bg-white/5 transition-all shrink-0\"\n                        style={{ borderColor: \"var(--chip-border)\", color: \"var(--text-muted)\" }}\n                        title=\"Copy share link\"\n                      >\n                        Share\n                      </button>\n                    )}\n                  </motion.div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}